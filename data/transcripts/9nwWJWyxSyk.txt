
[00:00:00.000 --> 00:00:04.560]   Okay, so beginning with chapter one, we're going to be covering prompting.
[00:00:04.560 --> 00:00:10.520]   Now, I know prompting isn't the most exciting thing about agents in the entire world,
[00:00:10.520 --> 00:00:16.460]   but prompting is a core component of any AI system.
[00:00:16.460 --> 00:00:20.020]   You just can't get around or avoid prompting.
[00:00:20.020 --> 00:00:21.300]   You have to learn it.
[00:00:21.300 --> 00:00:29.480]   And what I want to cover in this chapter is, of course, just the hands-on of prompting with agents SDK,
[00:00:29.480 --> 00:00:38.080]   but also I really want to talk about how you might want to think about the various prompts
[00:00:38.080 --> 00:00:44.800]   and the way of building a conversation with an agent in a very different way.
[00:00:44.800 --> 00:00:49.580]   And I think that will be very useful for a lot of people out there building with agents.
[00:00:49.580 --> 00:00:55.720]   So that part, in my opinion, is actually quite exciting and for sure, very useful.
[00:00:56.040 --> 00:01:00.960]   So we're going to start in the agents SDK course repo, we're going to go to chapters,
[00:01:00.960 --> 00:01:02.640]   and of course, we're going to chapter one.
[00:01:02.640 --> 00:01:08.220]   I would highly recommend that you go with the open with Colab approach here.
[00:01:08.220 --> 00:01:11.980]   It's going to save you time rather than setting it up locally,
[00:01:11.980 --> 00:01:14.340]   but of course, you can set it up locally if you prefer.
[00:01:14.340 --> 00:01:17.320]   I actually do have it set up locally, so that's what I'm going to do.
[00:01:17.320 --> 00:01:22.400]   So in Colab, the first thing you'll need to do is just install OpenAI agents using 0.1,
[00:01:22.400 --> 00:01:23.400]   as you can see here.
[00:01:23.400 --> 00:01:28.580]   Then if you're running this locally, of course, you should have already set up your UV environment
[00:01:28.580 --> 00:01:33.380]   and you would just be clicking up here and clicking here to select that UV environment.
[00:01:33.380 --> 00:01:37.940]   Then we're going to come down and the first thing we're going to do is set up our OpenAI API key.
[00:01:37.940 --> 00:01:41.860]   Now you'll get this from platformopenai.com API keys.
[00:01:41.860 --> 00:01:47.900]   Once you have it, run this cell here and we'll get a little text box pop up locally,
[00:01:47.900 --> 00:01:51.580]   at least in cursor and VS Code, it's going to be here.
[00:01:51.580 --> 00:01:54.960]   And in Colab, it will be just under the cell.
[00:01:54.960 --> 00:02:01.180]   So now we're going to take a look at the first type prompt, which is the most basic.
[00:02:01.180 --> 00:02:02.220]   It's just a prompt.
[00:02:03.040 --> 00:02:08.800]   And it is the static and it is static instructions.
[00:02:08.800 --> 00:02:15.640]   So this is when I say instructions here, for those of you that have been using agents or LLMs,
[00:02:15.640 --> 00:02:21.360]   think of instructions as your system prompt, because that is exactly what it is.
[00:02:22.060 --> 00:02:24.880]   So the instructions are the system prompt.
[00:02:24.880 --> 00:02:31.660]   They guide the behavior of your agent and we require them here.
[00:02:31.660 --> 00:02:36.500]   OK, so in these instructions, we're telling our agent to speak like a pirate.
[00:02:36.500 --> 00:02:39.740]   And this is how we would initialize our agent.
[00:02:39.740 --> 00:02:40.500]   It's very simple.
[00:02:40.500 --> 00:02:41.720]   You have the name of the agent.
[00:02:41.720 --> 00:02:44.680]   You have the model that we'd like to use, GP 4.1 mini.
[00:02:45.520 --> 00:02:47.760]   And it is pretty simple.
[00:02:47.760 --> 00:02:49.620]   So we'll run that.
[00:02:49.620 --> 00:02:54.500]   And once we've defined our agent, we want to run it.
[00:02:54.500 --> 00:03:02.200]   Now, the way that we run an agent is, I suppose it would be, it feels a little more complicated,
[00:03:02.200 --> 00:03:04.420]   but it's still very simple and it makes sense.
[00:03:04.980 --> 00:03:08.840]   So there are these various runner objects in Agents SDK.
[00:03:08.840 --> 00:03:16.680]   There are different runner objects that you would use in various scenarios.
[00:03:16.680 --> 00:03:21.460]   I think for the most part, you're going to be using this runner object.
[00:03:21.460 --> 00:03:27.040]   The others that you might be using are for like synchronous execution,
[00:03:27.040 --> 00:03:34.120]   which it would be kind of weird if you're building an AI application and writing synchronous code
[00:03:34.120 --> 00:03:42.180]   In general, I don't think I've ever been on a project where we haven't needed to use async code.
[00:03:42.180 --> 00:03:49.340]   So in general, I would say, yeah, you can use synchronous code and methods.
[00:03:49.340 --> 00:03:52.540]   And I know that might be simpler if you haven't used async before,
[00:03:52.540 --> 00:03:57.940]   but I would learn async as quickly as possible.
[00:03:57.940 --> 00:04:01.300]   And it's very simple, especially when you're using these libraries.
[00:04:01.300 --> 00:04:09.380]   So in this case, all we need to do is, okay, this runner object that we have down here,
[00:04:09.380 --> 00:04:11.380]   we're going to run it.
[00:04:11.380 --> 00:04:19.260]   This will run the async execution of our, or whatever we set up in our job here.
[00:04:19.260 --> 00:04:22.960]   And because it's async, we need to await it.
[00:04:23.140 --> 00:04:28.760]   Okay, so this is for the most part, this is all we really need to modify in many cases.
[00:04:28.760 --> 00:04:31.300]   Sometimes it can get a little more complicated.
[00:04:31.300 --> 00:04:32.840]   Depends on what you're doing.
[00:04:32.840 --> 00:04:39.860]   But anyway, in this case, all we need to do to run our async job is to await it here.
[00:04:39.860 --> 00:04:43.020]   Now, there's a little more going on within this job.
[00:04:43.020 --> 00:04:46.660]   As you can see, we have a starting agent and we also have our input.
[00:04:46.760 --> 00:04:48.560]   The input is the user query.
[00:04:48.560 --> 00:04:50.680]   Okay, that is your user prompt.
[00:04:50.680 --> 00:04:54.420]   You may modify this in some cases.
[00:04:54.420 --> 00:04:57.020]   You can have multiple messages, for example.
[00:04:57.840 --> 00:05:00.460]   But in this case, it's just a user query.
[00:05:00.460 --> 00:05:06.520]   The starting agent here, the reason that we even have a starting agent is because a agent
[00:05:06.520 --> 00:05:11.300]   may also be able to hand off the task to other agents.
[00:05:11.300 --> 00:05:17.040]   And in that case, it makes sense that you would call this parameter here the starting agent,
[00:05:17.040 --> 00:05:20.060]   because maybe our agent here can hand off to multiple other agents.
[00:05:20.060 --> 00:05:23.080]   You may be able to hand off to other multiple agents.
[00:05:23.620 --> 00:05:27.260]   And of course, in that case, we're not just using a single agent.
[00:05:27.260 --> 00:05:31.420]   So this is why this is called the starting agents, where we start.
[00:05:31.420 --> 00:05:35.000]   However, in this case, of course, we just have a single agent.
[00:05:35.000 --> 00:05:37.680]   So we're just running our single agent.
[00:05:37.680 --> 00:05:41.440]   So we can run that and we'll get some output down here.
[00:05:41.440 --> 00:05:42.380]   Okay.
[00:05:42.380 --> 00:05:44.600]   And what we've asked.
[00:05:44.600 --> 00:05:51.140]   Okay, so we've our system prompt, our instructions have told our agent to speak like a pirate.
[00:05:51.500 --> 00:05:56.740]   We've come down here and then our input or user query has said, write me a haiku.
[00:05:56.740 --> 00:06:00.080]   And that is exactly what it has done.
[00:06:00.080 --> 00:06:01.180]   Okay.
[00:06:01.180 --> 00:06:02.200]   So that's great.
[00:06:02.200 --> 00:06:02.920]   It's working.
[00:06:02.920 --> 00:06:07.620]   Now let's move on to some slightly more dynamic instructions.
[00:06:07.620 --> 00:06:11.020]   So this again, it's nothing complicated here.
[00:06:11.020 --> 00:06:16.000]   What we're doing is, for example, as we'll see in a moment,
[00:06:17.000 --> 00:06:21.080]   let's say we would like our agent to be aware of the current date and time.
[00:06:21.080 --> 00:06:27.620]   In this scenario, we might want our instructions to include the current date and time.
[00:06:27.620 --> 00:06:37.920]   But of course, we don't pre-create that prompt because then that prompt will include the current date and time from when we created the prompt.
[00:06:38.380 --> 00:06:48.540]   So what we need to do is pass a function to our agent that can be called whenever it is being used,
[00:06:48.540 --> 00:06:53.680]   whenever our agent is being used, and it can get the actual current date and time.
[00:06:53.680 --> 00:06:55.040]   So that's what we're doing here.
[00:06:55.040 --> 00:06:58.360]   We have this time-based instructions method.
[00:06:59.040 --> 00:07:06.000]   We have to pass a context, which is this run context wrapper, and we have to pass an agent here.
[00:07:06.000 --> 00:07:16.580]   So in the back end, when the agent method or job method is running and calling this time-based instructions function,
[00:07:16.580 --> 00:07:20.840]   it's going to be passing in those parameters, even though we don't actually use them.
[00:07:20.840 --> 00:07:24.120]   In this case, in other scenarios, you actually might.
[00:07:24.120 --> 00:07:25.400]   But in this case, we don't.
[00:07:25.400 --> 00:07:29.540]   So here, we're just saying, OK, the current time is time.
[00:07:29.540 --> 00:07:33.260]   If it is the afternoon, speak like a pirate.
[00:07:33.260 --> 00:07:34.680]   Otherwise, do not.
[00:07:34.680 --> 00:07:40.260]   OK, so right now it is just the afternoon, so it will probably speak like a pirate.
[00:07:40.260 --> 00:07:42.800]   So let's run that.
[00:07:42.800 --> 00:07:45.140]   We initialize our agent here.
[00:07:45.140 --> 00:07:48.940]   This is now the time agent, and we have our time-based instructions.
[00:07:48.940 --> 00:07:53.020]   And we can come down here, and I'm going to say, hello, what time is it?
[00:07:53.280 --> 00:07:54.220]   And we'll see.
[00:07:54.220 --> 00:07:57.960]   OK.
[00:07:57.960 --> 00:08:00.180]   It is in the afternoon.
[00:08:00.180 --> 00:08:03.920]   Now, we can modify this just to confirm, OK, is this working?
[00:08:03.920 --> 00:08:13.780]   I'm going to say, if it is later than 1 p.m., speak like a pirate.
[00:08:13.780 --> 00:08:14.820]   Otherwise, do not.
[00:08:15.920 --> 00:08:18.700]   OK, reinitialize those, come down here.
[00:08:18.700 --> 00:08:23.660]   OK, and now we can see that it is not speaking like a pirate.
[00:08:23.660 --> 00:08:26.220]   So, yeah, we have that.
[00:08:26.220 --> 00:08:27.800]   We can modify that, of course.
[00:08:27.800 --> 00:08:33.800]   It can, you know, these dynamic instructions can become much more complicated than what you see here.
[00:08:36.280 --> 00:08:38.820]   OK, so we have that.
[00:08:38.820 --> 00:08:41.420]   Now, I want to talk about message types.
[00:08:41.420 --> 00:08:49.780]   And this is where I want to be very specific about how you should think about a conversation with an agent.
[00:08:50.140 --> 00:09:04.020]   Because the default thinking here, when it comes to speaking with agents, is that your conversation or chat history with an agent is a set of messages.
[00:09:04.580 --> 00:09:07.640]   OK, it's like a set of back and forth, like you would have with a person.
[00:09:07.640 --> 00:09:11.600]   OK, it's like I say something, they say something, so on and so on.
[00:09:11.600 --> 00:09:26.680]   But I think, and this is from years of coding agents, I think the better way of thinking about chat history and interactions is not to think of them as chat history or interactions.
[00:09:27.180 --> 00:09:39.520]   I think the better way is to think about this as a sequence of events, this sequence of events does not need to be user-assistant, user-assistant.
[00:09:39.520 --> 00:09:42.000]   It can be many combinations of various things.
[00:09:42.000 --> 00:09:52.540]   And when we think more about these as events and the execution of these events, it becomes much more obvious, in my opinion,
[00:09:52.540 --> 00:10:06.420]   that an agent is more of a workflow execution engine that goes and performs different tasks based on particular triggers, right?
[00:10:06.420 --> 00:10:09.380]   Those triggers might be a user sending a message, right?
[00:10:09.380 --> 00:10:10.540]   That's the traditional approach.
[00:10:10.540 --> 00:10:12.560]   But it could be something else, right?
[00:10:12.560 --> 00:10:15.260]   You could just be doing something on your computer.
[00:10:16.460 --> 00:10:25.440]   Maybe you open a particular window and there is something, some event that gets triggered when you open that window.
[00:10:25.440 --> 00:10:35.000]   Maybe it's your browser that goes off to an AI agent and tells the AI agent to go and give a summary of the current weather, okay?
[00:10:35.000 --> 00:10:37.800]   And it will go and do that and it's going to come back, right?
[00:10:37.800 --> 00:10:38.760]   That's an event.
[00:10:38.760 --> 00:10:40.240]   It's not a user.
[00:10:40.240 --> 00:10:43.180]   You know, a user is triggering that event.
[00:10:43.440 --> 00:10:46.680]   They might not even realize they are triggering that event, but they are triggering that event.
[00:10:46.680 --> 00:10:50.660]   But it's not a user interaction, okay?
[00:10:50.660 --> 00:11:02.460]   So, in my opinion, it's best to think about the interactions with an agent as being more a log of events, okay?
[00:11:02.620 --> 00:11:08.860]   And with that in mind, there are five primary message types from OpenAI.
[00:11:08.860 --> 00:11:12.760]   So, here we have our five message types.
[00:11:12.760 --> 00:11:14.940]   We have the developer message.
[00:11:14.940 --> 00:11:19.420]   This is our new system message.
[00:11:19.420 --> 00:11:22.140]   So, OpenAI recently renamed this.
[00:11:22.140 --> 00:11:31.300]   So, rather than calling the system message or system prompt that, they are calling it the developer message or developer prompt.
[00:11:31.300 --> 00:11:41.340]   So, you know, just one of those complete switches of what OpenAI are calling various things for some reason.
[00:11:41.340 --> 00:11:42.360]   I don't know.
[00:11:42.800 --> 00:11:46.140]   So, for now, okay, this is now the developer message.
[00:11:46.140 --> 00:11:54.920]   I don't know if they could change that back because I can't imagine that change propagating across the wider AI industry.
[00:11:54.920 --> 00:11:56.400]   But maybe it does.
[00:11:56.400 --> 00:12:02.420]   So, think about this as either the developer or system message.
[00:12:02.780 --> 00:12:08.960]   So, we would have our developer message and that is what we have up here, okay?
[00:12:08.960 --> 00:12:18.960]   So, typical instructions, again, like more terminology that OpenAI is not being consistent with.
[00:12:18.960 --> 00:12:21.480]   This is also in Agents SDK.
[00:12:21.480 --> 00:12:25.120]   This is our, these are our instructions, okay?
[00:12:25.120 --> 00:12:28.160]   Instructions, developer or system message.
[00:12:28.160 --> 00:12:29.240]   As you prefer.
[00:12:29.240 --> 00:12:30.940]   You can choose any of them, apparently.
[00:12:31.720 --> 00:12:44.400]   So, these instructions are where we instruct our agent on what it should do, how it should behave, what it can or cannot do, right?
[00:12:44.400 --> 00:12:46.360]   All of that information is in here.
[00:12:46.360 --> 00:12:49.560]   Then, we have our user message.
[00:12:49.560 --> 00:12:53.840]   Again, as I mentioned, this is, this could be a written message.
[00:12:53.840 --> 00:12:55.440]   It could be a event trigger.
[00:12:55.440 --> 00:12:56.700]   It could be anything, okay?
[00:12:56.700 --> 00:12:59.720]   So, it's good to think about these as events.
[00:13:00.400 --> 00:13:03.100]   So, in this case, this is a typical chatbot scenario.
[00:13:03.100 --> 00:13:05.160]   I am a user.
[00:13:05.160 --> 00:13:05.780]   I'm going in.
[00:13:05.780 --> 00:13:10.300]   I'm saying, can you help me learn about OpenAI's Agents SDK?
[00:13:10.300 --> 00:13:14.120]   I'm using Python and I would like to understand what the library does.
[00:13:14.120 --> 00:13:14.500]   Okay?
[00:13:14.500 --> 00:13:15.760]   That's my, that's my question.
[00:13:15.760 --> 00:13:20.400]   Then, what's going to happen is this is going to go to our LM.
[00:13:20.560 --> 00:13:26.520]   So, these instructions here, our developer prompt, followed by our user prompt.
[00:13:26.520 --> 00:13:28.200]   This is going to go to our LLM.
[00:13:28.200 --> 00:13:31.360]   Our LLM is going to generate this here, the function call.
[00:13:31.360 --> 00:13:38.460]   And, look, it could use a function call or it could just go straight ahead and jump into an assistant message.
[00:13:39.140 --> 00:13:43.600]   It depends on how you've prompted things, the tools that you've got and everything set up here.
[00:13:43.600 --> 00:13:48.860]   In this scenario, we're going to assume that we have a RAG tool, okay?
[00:13:49.120 --> 00:13:59.580]   We're going to assume that this RAG tool will allow our assistant to go and retrieve information, particularly about the OpenAI Agents SDK, right?
[00:13:59.580 --> 00:14:00.600]   Or it could be something else.
[00:14:00.600 --> 00:14:07.120]   It could be, I don't know, like a big encyclopedia of various AI libraries or AI everything, right?
[00:14:07.420 --> 00:14:08.540]   It could be anything.
[00:14:08.540 --> 00:14:14.520]   It's essentially a kind of custom search engine, okay, that you've set up yourself.
[00:14:14.520 --> 00:14:18.220]   So, you put whatever in there, really.
[00:14:18.220 --> 00:14:21.720]   And we'll be talking more about RAG later in the course as well.
[00:14:21.720 --> 00:14:24.540]   So, we have that function call.
[00:14:24.540 --> 00:14:28.600]   This is, just to be very clear, this is generated by the LLM.
[00:14:28.600 --> 00:14:31.840]   The assistant message is also generated by the LLM.
[00:14:31.840 --> 00:14:34.120]   It's just the structure is slightly different.
[00:14:34.120 --> 00:14:41.160]   So, in some sense, I like to think of function calls as being also an assistant message in some way.
[00:14:41.160 --> 00:14:50.060]   But it is generally not referred to as a assistant message, even though it's generated in the same way, just in a slightly different format.
[00:14:50.060 --> 00:14:55.060]   So, a function call is always going to be a dictionary or JSON object.
[00:14:55.060 --> 00:14:59.400]   And it's going to include tool name, a tool call ID.
[00:14:59.400 --> 00:15:01.520]   This is unique and very important.
[00:15:02.400 --> 00:15:04.820]   And then, it's also going to have the tool args.
[00:15:04.820 --> 00:15:07.700]   These are the inputs to a particular tool, okay?
[00:15:07.700 --> 00:15:11.760]   A tool is just a function, okay?
[00:15:11.760 --> 00:15:14.540]   So, like a Python function.
[00:15:14.540 --> 00:15:25.200]   So, we would have, you know, we would have something which is called the, this is supposed to be death, defining a function here, which would be RAG tool.
[00:15:25.200 --> 00:15:32.000]   And one of the parameters of that function would be the query parameter, okay?
[00:15:32.000 --> 00:15:37.200]   And our LLM would generate a search query here, okay?
[00:15:37.200 --> 00:15:39.540]   So, this is not exactly what the user has written.
[00:15:39.540 --> 00:15:50.820]   It is a generated search query that our function, which is the RAG tool function, is going to use to search for some relevant information.
[00:15:51.320 --> 00:16:02.400]   Now, in between this function call here and the next function call output, in here, we are calling, like we, on our side, we call our RAG tool.
[00:16:02.400 --> 00:16:03.760]   It goes, does stuff.
[00:16:04.380 --> 00:16:08.940]   It goes and does some stuff, gets our information, and returns it to us.
[00:16:08.940 --> 00:16:15.500]   The information it's returning to us is what we get in this function call output message or event.
[00:16:15.500 --> 00:16:22.380]   And you can see here, I've, in this example, I've shortened it down because we obviously don't have much space.
[00:16:22.880 --> 00:16:26.440]   I've said there's two bits of information being returned, okay?
[00:16:26.440 --> 00:16:28.660]   One of them is from this doc, A-B-C.
[00:16:28.660 --> 00:16:31.040]   Another one is this doc, G-H-I, okay?
[00:16:31.040 --> 00:16:32.880]   So, it's coming from two documents.
[00:16:32.880 --> 00:16:41.700]   And the first one, though, is very introductory information about OpenAI Agents SDK being ideal for developing agentic apps.
[00:16:41.700 --> 00:16:48.800]   And the other one is specifically focusing on voice, which is a built-in feature of the SDK, right?
[00:16:49.000 --> 00:16:53.900]   And then there would, of course, be more information over here, but we don't have much space.
[00:16:53.900 --> 00:16:55.940]   So, shortening that down.
[00:16:55.940 --> 00:17:00.120]   So, we've got some information from our RAG tool.
[00:17:00.120 --> 00:17:10.180]   Then, that is going to be passed back to our LLM alongside all of these other events up here to generate that final assistant message, okay?
[00:17:10.180 --> 00:17:12.560]   And then, that is what we would return to the user.
[00:17:12.560 --> 00:17:16.220]   So, that is, again, returning to that chat component.
[00:17:16.620 --> 00:17:21.420]   So, all of these, like, pink components here, they're internal, okay?
[00:17:21.420 --> 00:17:30.580]   They are either events that are happening, like these here, or some setup that we've already done before even running anything.
[00:17:30.580 --> 00:17:36.780]   These white blocks are what, in a typical chat interface, the user would see.
[00:17:36.780 --> 00:17:41.200]   Now, there could be multiple other things going on here.
[00:17:41.200 --> 00:17:44.840]   We might have multiple function calls, multiple function call outputs.
[00:17:44.840 --> 00:17:53.100]   We might even have assistant messages that are being created but are internal, where the assistant is kind of reasoning and talking to itself and thinking,
[00:17:53.100 --> 00:17:57.820]   hey, maybe I should do this, but maybe I shouldn't because of this other thing over here, right?
[00:17:57.820 --> 00:17:59.520]   That sort of thing can be happening.
[00:17:59.880 --> 00:18:02.820]   So, it depends on what sort of workflow you've set up.
[00:18:02.820 --> 00:18:05.260]   In this scenario, it's pretty simple.
[00:18:05.260 --> 00:18:13.560]   So, that, you know, it would look something like this when we're just retrieving information from a reg tool and returning that to the user.
[00:18:13.560 --> 00:18:26.060]   So, we have those five message types and I'll just clarify that the user, developer, and assistant messages are actually all of the same message type, which is type message.
[00:18:26.060 --> 00:18:34.200]   And these, this single message type is actually differentiated as having various roles.
[00:18:34.360 --> 00:18:37.900]   So, the role is either developer, user, or assistant.
[00:18:37.900 --> 00:18:43.680]   Now, most of this detail, we don't even really need to know to use Agents SDK.
[00:18:43.680 --> 00:18:46.560]   It abstracts away quite a lot from us.
[00:18:46.560 --> 00:18:51.200]   So, we initialize our agent with the instructions parameter.
[00:18:51.200 --> 00:18:55.620]   We send messages with the input parameter.
[00:18:56.020 --> 00:19:02.100]   But, beyond that, we don't really need to use directly any of these other items.
[00:19:02.100 --> 00:19:11.720]   But, it's, of course, important to know this if you're developing and wanting to get good at developing AI systems.
[00:19:11.720 --> 00:19:21.080]   And, especially if you're thinking, okay, I'm going to use Agents SDK, but maybe in the future I might use another framework or no framework at all.
[00:19:21.080 --> 00:19:23.100]   It's important to know this sort of thing.
[00:19:23.540 --> 00:19:27.180]   And, even just to understand how your system works.
[00:19:27.180 --> 00:19:41.780]   And, it's also worth noting that, for example, if you have an application that you're building where maybe users are coming back to your application after, you know, some time away from it.
[00:19:41.780 --> 00:19:43.960]   And, they're wanting to continue a conversation.
[00:19:43.960 --> 00:19:45.700]   It's just one scenario.
[00:19:46.380 --> 00:19:56.420]   In that scenario, you would need to load all of your previous interactions and, of course, format them in the correct way for the Agents SDK.
[00:19:56.420 --> 00:19:57.400]   Right?
[00:19:57.400 --> 00:20:05.320]   So, in that scenario, you would actually have to understand, okay, this is an assistant message or a message with role assistant.
[00:20:05.720 --> 00:20:09.280]   This is a function call, this is a function call output and so on, right?
[00:20:09.280 --> 00:20:13.960]   You'd need to understand what those are so that you can use them later.
[00:20:13.960 --> 00:20:18.520]   Or, if you need to manipulate those in any way, like manipulate in a good way.
[00:20:18.520 --> 00:20:24.280]   Like, you need to add some intermediate system message, for example.
[00:20:24.960 --> 00:20:30.380]   Now, let's take a look at how we actually use each of these messages in Agents SDK.
[00:20:30.380 --> 00:20:34.840]   So, we already saw this one creating a user message.
[00:20:34.840 --> 00:20:40.500]   It is just, when we're running our job, we have our input, this is the user message.
[00:20:40.680 --> 00:20:46.500]   So, we run that, really simple, nothing to really teach you there.
[00:20:46.500 --> 00:20:51.820]   If you'd like to use the types, you would want to use something like this.
[00:20:51.820 --> 00:20:56.560]   So, this is actually coming directly from the OpenAI library.
[00:20:56.560 --> 00:21:01.640]   And, we are just importing the message object there.
[00:21:01.640 --> 00:21:03.260]   So, we run that.
[00:21:03.940 --> 00:21:15.220]   And, this is just, okay, if you want to, if you want to be a bit stricter about the typing, which I generally recommend if you're building anything serious, you probably should be.
[00:21:15.220 --> 00:21:22.200]   So, in this case, we'd create our message here and then we're passing in our message within the list here.
[00:21:22.200 --> 00:21:24.880]   So, I mean, that seems more complicated.
[00:21:24.880 --> 00:21:33.600]   But then, you know, again, if you're building this broader application and you're just kind of passing a string around,
[00:21:33.720 --> 00:21:40.900]   containing a user message rather than defining, hey, look, this is a user message, you know, you're kind of asking for trouble.
[00:21:40.900 --> 00:21:46.960]   So, I would recommend you just type everything as much as you possibly can.
[00:21:46.960 --> 00:21:48.840]   Cool.
[00:21:48.840 --> 00:21:50.180]   So, we have that.
[00:21:50.180 --> 00:21:55.520]   Now, other thing, we can, oh, yes, we can simplify this as well.
[00:21:55.520 --> 00:21:59.260]   So, our user message can also just be a dictionary if we want.
[00:21:59.260 --> 00:22:02.500]   And, you'll just pass that in again like this.
[00:22:03.500 --> 00:22:05.540]   Okay, does the same thing.
[00:22:05.540 --> 00:22:08.240]   But, again, I would recommend going with types.
[00:22:08.240 --> 00:22:11.140]   Okay, now, developer messages.
[00:22:11.140 --> 00:22:13.760]   Again, it's used to be system messages.
[00:22:13.760 --> 00:22:18.480]   So, that is defined with our instructions as we saw before.
[00:22:18.480 --> 00:22:22.720]   We can also define that directly using this.
[00:22:23.380 --> 00:22:31.720]   With the system messages in many cases, you probably wouldn't be passing those around as much as you would be a user message.
[00:22:31.720 --> 00:22:36.600]   But, yeah, you might also want to type those if you can as well.
[00:22:36.600 --> 00:22:37.660]   Okay.
[00:22:37.720 --> 00:22:47.100]   And then, we have developer or system messages that might actually be inserted, you know, not just as the first, like, initial system message.
[00:22:47.360 --> 00:22:54.200]   So, in this case, for example, we might want to, for whatever reason, right?
[00:22:54.200 --> 00:22:55.980]   I'll give you a better example at the moment.
[00:22:56.320 --> 00:23:03.160]   But, for whatever reason, in this case, where we have instructed our LM to speak like a pirate, and we're saying, write me a haiku.
[00:23:03.160 --> 00:23:12.440]   For whatever reason, maybe we've, you know, something gets triggered, and it looks like the user actually does not want the system to speak like a pirate.
[00:23:12.440 --> 00:23:15.900]   And, instead, they should use obvious British slang.
[00:23:15.900 --> 00:23:20.320]   In that case, we might insert a system message here.
[00:23:20.320 --> 00:23:23.000]   Let me give you a better example, though.
[00:23:23.000 --> 00:23:23.700]   Okay.
[00:23:23.700 --> 00:23:29.640]   So, in this example, right, going back to our earlier visual here.
[00:23:29.640 --> 00:23:40.820]   In this example, what we might find is that we would like to ensure that our assistant is always quoting where information is coming from.
[00:23:40.820 --> 00:23:52.020]   And, in this case, what we can do is we can say, okay, whenever you use the RAG tool, we're going to have some logic in our system, which is then going to go into here, right?
[00:23:52.020 --> 00:24:10.660]   So, we're going to go into here, and we're going to insert a developer message, which reminds our assistant to always use citations, to always use a particular format, and to never say anything that it doesn't know from the context provided.
[00:24:10.660 --> 00:24:11.400]   Okay.
[00:24:11.400 --> 00:24:20.740]   And, that can be a really, very, very strong way of ensuring certain behaviors at certain points in our agents.
[00:24:20.740 --> 00:24:30.700]   So, that is another scenario, more realistic scenario, where you might want to be inserting developer or system messages at various points within a conversation.
[00:24:30.700 --> 00:24:31.400]   Okay.
[00:24:31.660 --> 00:24:32.640]   So, we have that.
[00:24:32.640 --> 00:24:34.220]   Let's move on to assistant messages.
[00:24:34.220 --> 00:24:39.240]   So, again, these are typically our direct responses to the user.
[00:24:39.240 --> 00:24:46.820]   The content field in this scenario, the content field of a message is going to be generated by the LM.
[00:24:47.340 --> 00:24:48.980]   And, it might look something like this.
[00:24:48.980 --> 00:24:49.320]   Okay.
[00:24:49.320 --> 00:24:55.300]   So, we have our assistant role here, and then the content is going to look like this.
[00:24:55.300 --> 00:24:55.760]   Okay.
[00:24:55.760 --> 00:25:01.960]   And, we can actually add that to our, what is becoming our chat history now, like so.
[00:25:01.960 --> 00:25:05.680]   So, we would have our, you know, this is our original user message.
[00:25:05.680 --> 00:25:10.000]   We have that developer telling us to ignore the instructions and do something else.
[00:25:10.800 --> 00:25:12.640]   Then, we have our assistant message here.
[00:25:12.640 --> 00:25:13.140]   Okay.
[00:25:13.140 --> 00:25:14.900]   So, this is the assistant role.
[00:25:14.900 --> 00:25:19.560]   And, I'm just going to say, okay, this is my user message now.
[00:25:19.560 --> 00:25:21.520]   I'm going to say, can you repeat what you just said?
[00:25:21.520 --> 00:25:21.940]   Okay.
[00:25:21.940 --> 00:25:25.500]   And, let's just ensure that that does, in fact, work.
[00:25:25.500 --> 00:25:27.480]   And, it looks like it does.
[00:25:27.480 --> 00:25:30.840]   Now, the output from the result there.
[00:25:30.840 --> 00:25:31.180]   Okay.
[00:25:31.180 --> 00:25:32.200]   Let me even show you.
[00:25:32.200 --> 00:25:41.340]   So, our output is not quite the format that we need for feeding back into our next input.
[00:25:41.340 --> 00:25:49.620]   So, what we can do is, actually, we can take these results here, and we can use two input lists to convert them into the format that we would need.
[00:25:49.620 --> 00:25:50.180]   Okay.
[00:25:50.180 --> 00:25:52.400]   And, you see, this has been modified a little bit.
[00:25:52.400 --> 00:25:57.000]   It creates this list of dictionaries, which looks a bit more like what I was showing you before.
[00:25:57.840 --> 00:26:08.360]   And, okay, one additional thing that we get here is we get all of these additional optional fields that are returned from OpenAI that we didn't populate.
[00:26:08.360 --> 00:26:14.380]   We could populate these if we wanted to, but, you know, we created these on our side.
[00:26:14.380 --> 00:26:17.380]   So, there's no ID that OpenAI has created.
[00:26:17.380 --> 00:26:20.720]   The content field, you can see, is also far more complicated.
[00:26:20.720 --> 00:26:22.280]   We have these annotations.
[00:26:22.280 --> 00:26:24.300]   We have the type log props here.
[00:26:24.300 --> 00:26:25.880]   We don't really need all of these.
[00:26:26.340 --> 00:26:29.120]   The only one that we truly need is this text here.
[00:26:29.120 --> 00:26:30.980]   We have the status here.
[00:26:30.980 --> 00:26:32.500]   So, it's obviously completed.
[00:26:32.500 --> 00:26:36.660]   And, this is, of course, of type message, which I mentioned before.
[00:26:36.660 --> 00:26:37.360]   Okay.
[00:26:37.360 --> 00:26:44.740]   So, now, let's take a look at how the agent or runner maintains conversation history.
[00:26:44.740 --> 00:26:51.180]   So, first, I just want to point out that when we do two input lists here, we'll only see that most recent message.
[00:26:51.180 --> 00:26:58.160]   So, it doesn't seem like this is maintaining the history, and we can just confirm.
[00:26:58.160 --> 00:26:58.560]   Okay.
[00:26:58.560 --> 00:27:00.240]   So, could you give me another?
[00:27:00.240 --> 00:27:04.460]   We're just going to say, what were we talking about?
[00:27:04.460 --> 00:27:09.420]   What were we talking about?
[00:27:09.920 --> 00:27:19.500]   We'll be starting fresh on this here voyage.
[00:27:19.500 --> 00:27:22.200]   There'll be no previous parlay to recall.
[00:27:22.200 --> 00:27:22.800]   Okay.
[00:27:22.800 --> 00:27:31.080]   So, we can see that whenever we want to add the chat history in like this, we need to actually pass it in.
[00:27:31.080 --> 00:27:32.840]   We need to explicitly pass it in.
[00:27:32.840 --> 00:27:34.500]   It's not being maintained by our agent.
[00:27:34.640 --> 00:27:35.960]   It's not being maintained by the runner.
[00:27:35.960 --> 00:27:36.620]   Okay.
[00:27:36.620 --> 00:27:40.700]   And, it's not necessarily clear immediately whether that is the case or not.
[00:27:40.700 --> 00:27:42.340]   But, you know, that is the case.
[00:27:42.340 --> 00:27:52.700]   So, worth just making, you know, remembering that because you will, of course, need to implement things differently based on that one small little thing.
[00:27:52.700 --> 00:27:53.440]   Okay.
[00:27:53.440 --> 00:27:55.880]   So, we can move on to the function call messages.
[00:27:56.660 --> 00:27:58.420]   So, those look like this.
[00:27:58.420 --> 00:28:03.740]   So, we have a call ID, the tool or function name, and the arguments.
[00:28:03.740 --> 00:28:04.240]   Okay.
[00:28:04.240 --> 00:28:12.880]   So, let's say we want to construct a function call where the function or tool will be get current weather, it's called.
[00:28:12.880 --> 00:28:16.520]   And, the single input parameter here will be the location of London.
[00:28:16.520 --> 00:28:17.100]   Okay.
[00:28:17.100 --> 00:28:18.580]   And, this is what it would look like.
[00:28:18.580 --> 00:28:20.440]   So, we have the type, which is function call.
[00:28:20.440 --> 00:28:22.260]   We have the call ID.
[00:28:22.260 --> 00:28:23.180]   Okay.
[00:28:23.220 --> 00:28:23.920]   So, this is unique.
[00:28:23.920 --> 00:28:26.000]   This is important that we have this.
[00:28:26.000 --> 00:28:26.560]   Okay.
[00:28:26.560 --> 00:28:39.160]   Without the call, without the tool call ID, both here and in the next message, OpenAI cannot pass our history, our chats, our interactions.
[00:28:39.160 --> 00:28:39.880]   Okay.
[00:28:39.880 --> 00:28:41.460]   So, it's important that we have this.
[00:28:41.460 --> 00:28:43.040]   Then, we have the name.
[00:28:43.040 --> 00:28:44.800]   So, this is a function that we're going to call.
[00:28:44.800 --> 00:28:46.720]   And, then, we have the arguments for that function.
[00:28:46.720 --> 00:28:49.020]   So, I think this is just a keyword arguments.
[00:28:49.020 --> 00:28:51.800]   So, there will be a parameter in our function, which is location.
[00:28:51.800 --> 00:28:56.340]   And, we will provide the word London to that.
[00:28:56.340 --> 00:28:58.980]   So, let me come down here.
[00:28:58.980 --> 00:29:02.780]   We're going to add a function call in here to our history.
[00:29:02.780 --> 00:29:06.040]   And, well, let me show you.
[00:29:06.040 --> 00:29:08.000]   Okay.
[00:29:08.000 --> 00:29:08.920]   We got this error.
[00:29:09.800 --> 00:29:14.180]   And, this is what I mentioned before, that that tool call ID is very important.
[00:29:14.180 --> 00:29:21.760]   Because, with every function call or tool call, you need to have the response for that function or tool call in your chat history.
[00:29:21.760 --> 00:29:23.600]   So, you actually need two messages here.
[00:29:23.600 --> 00:29:28.000]   There must always be a pair of messages when we see that call ID field.
[00:29:28.480 --> 00:29:33.900]   So, this here, what we've just done, and you can see here, this is not valid.
[00:29:33.900 --> 00:29:34.660]   Okay.
[00:29:34.660 --> 00:29:40.740]   Developer, user, tool call, that's not a valid set of interactions.
[00:29:40.740 --> 00:29:46.540]   Whereas, developer, user, tool call, tool output, that is valid.
[00:29:46.540 --> 00:29:47.560]   Right.
[00:29:47.560 --> 00:29:51.380]   Then, just to be very clear here, right.
[00:29:51.380 --> 00:29:55.740]   Here, we can see that the call ID for our tool call and tool output is the same.
[00:29:55.740 --> 00:29:57.980]   Here, it is not.
[00:29:58.200 --> 00:30:01.580]   For the tool call, the call ID is call123.
[00:30:01.580 --> 00:30:06.080]   For the tool output, the call ID is call456.
[00:30:06.080 --> 00:30:07.640]   This is invalid.
[00:30:07.640 --> 00:30:10.200]   This, OpenAI won't process this.
[00:30:10.200 --> 00:30:10.980]   Okay.
[00:30:10.980 --> 00:30:19.640]   Your tool call and tool output, you need to have pairs of those messages, and they need to have the same ID.
[00:30:19.640 --> 00:30:22.820]   So, that's important to know.
[00:30:22.820 --> 00:30:25.620]   We'll cover more on that in the chapter on tools.
[00:30:26.040 --> 00:30:28.260]   So, we need a function call output.
[00:30:28.260 --> 00:30:31.280]   We're going to say this is a type.
[00:30:31.280 --> 00:30:32.240]   It's a function call output.
[00:30:32.240 --> 00:30:34.380]   The call ID here is call123.
[00:30:34.760 --> 00:30:36.800]   And the output here is, of course, it's London.
[00:30:36.800 --> 00:30:37.620]   It is raining.
[00:30:37.620 --> 00:30:38.980]   Okay.
[00:30:38.980 --> 00:30:40.300]   Now, we can try again.
[00:30:40.300 --> 00:30:41.520]   Let's see if it works this time.
[00:30:41.520 --> 00:30:42.760]   Now that we have our pair.
[00:30:42.760 --> 00:30:44.980]   We have our function call and function call output.
[00:30:44.980 --> 00:30:46.560]   Okay.
[00:30:48.140 --> 00:30:48.420]   Right.
[00:30:48.420 --> 00:30:49.300]   And we can see it.
[00:30:49.300 --> 00:30:49.980]   This is correct.
[00:30:49.980 --> 00:30:52.560]   So, obviously, we didn't actually use the tool here.
[00:30:52.560 --> 00:30:54.020]   I'm sure it probably is raining.
[00:30:54.020 --> 00:30:57.420]   But in any case, we didn't use an actual tool here.
[00:30:58.060 --> 00:31:02.520]   So, it's telling us, okay, London today is raining.
[00:31:02.840 --> 00:31:10.240]   So, that is it for this first chapter on prompting and, I think, a lot more in Agents SDK.
[00:31:10.560 --> 00:31:16.400]   We've covered a lot of things, of course, just how prompting works in Agents SDK.
[00:31:16.400 --> 00:31:20.260]   The many different ways that you can call a system prompt now.
[00:31:20.260 --> 00:31:24.660]   You can call it instructions or develop a message as well if you want.
[00:31:24.660 --> 00:31:27.500]   User messages as well are just as confusing.
[00:31:27.500 --> 00:31:30.380]   Are now user message or input.
[00:31:30.800 --> 00:31:35.220]   But then input can also mean a many input messages.
[00:31:35.220 --> 00:31:38.200]   You can use any of those as you prefer, of course.
[00:31:38.200 --> 00:31:45.600]   But what we actually get from all of this is just in reality, there's a lot of structure
[00:31:45.600 --> 00:31:49.080]   that is behind all these various prompt types.
[00:31:49.080 --> 00:31:54.940]   These different message types, the way that we do function calls, function call outputs, all of that.
[00:31:55.580 --> 00:32:03.880]   And it's important that we, as engineers using the Agents SDK, are fully aware of this
[00:32:03.880 --> 00:32:09.920]   and fully aware of, in the back-end, how all of these things are structured.
[00:32:09.920 --> 00:32:14.120]   So that we can avoid issues like what we just saw at the end there.
[00:32:14.120 --> 00:32:18.420]   Where we don't have a pair of function call and function call output.
[00:32:19.740 --> 00:32:26.680]   And it's also very important for us to be aware of how, you know, we can structure this chat history.
[00:32:26.680 --> 00:32:34.220]   And maybe think about it as less of a chat history and more as a stream of events.
[00:32:34.220 --> 00:32:36.440]   So that is it for this chapter.
[00:32:36.440 --> 00:32:38.780]   We'll move on to the next one.
[00:32:38.780 --> 00:32:39.540]   Thanks.
[00:32:43.540 --> 00:32:44.040]   Bye.
[00:32:44.040 --> 00:32:44.540]   Bye.
[00:32:44.540 --> 00:32:45.040]   Bye.
[00:32:45.040 --> 00:32:45.540]   Bye.
[00:32:45.540 --> 00:32:46.540]   Bye.
[00:32:46.540 --> 00:32:47.540]   Bye.
[00:32:47.540 --> 00:32:48.540]   Bye.
[00:32:48.540 --> 00:32:49.540]   Bye.
[00:32:49.540 --> 00:32:50.140]   Bye.
[00:32:50.140 --> 00:32:50.540]   Bye.
[00:32:50.540 --> 00:32:51.540]   Bye.
[00:32:51.540 --> 00:32:52.040]   you
[00:32:52.040 --> 00:32:52.540]   you
[00:32:52.540 --> 00:33:22.520]   Thank you.


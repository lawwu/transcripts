<html><head><title>2+2=5 in Java</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>2+2=5 in Java</h2><a href="https://www.youtube.com/watch?v=amXXYgu0eFY"><img src="https://i.ytimg.com/vi_webp/amXXYgu0eFY/maxresdefault.webp" style="width:50%;"></a><div><br></div><div style="text-align: left;"><a href="./amXXYgu0eFY.html">Whisper Transcript</a> | <a href="./transcript_amXXYgu0eFY.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">This video is about how we can hack Java by using reflection of its own source code to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=5" target="_blank">00:00:05.600</a></span> | <span class="t">make this 2+2 statement, output 5.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=12" target="_blank">00:00:12.680</a></span> | <span class="t">Just as George Orwell, one of my favorite writers, warned us about in 1984, about propaganda</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=19" target="_blank">00:00:19.020</a></span> | <span class="t">machines that sublimate the nature of truth.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=23" target="_blank">00:00:23.020</a></span> | <span class="t">This video is not about politics, philosophy, nor is it about the apparent, as I have just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=29" target="_blank">00:00:29.480</a></span> | <span class="t">learned, woke Twitter madness around 2+2=5.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=35" target="_blank">00:00:35.000</a></span> | <span class="t">Though perhaps if we're living in the simulation and it's written in Java, this might be a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=40" target="_blank">00:00:40.280</a></span> | <span class="t">way to make the simulation just a bit more dystopian.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=44" target="_blank">00:00:44.440</a></span> | <span class="t">So here's what the full source code looks like, and it uses Java's ability to do reflection,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=49" target="_blank">00:00:49.880</a></span> | <span class="t">which is the ability of a programming language to inspect itself.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=53" target="_blank">00:00:53.560</a></span> | <span class="t">So if we look at the code, it actually dives into the implementation of the integer class,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=59" target="_blank">00:00:59.200</a></span> | <span class="t">pulls out the integer cache class from that implementation, makes it accessible and writable,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=66" target="_blank">00:01:06.280</a></span> | <span class="t">pulls it into an array of integer object of size 256, and modifies that array.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=73" target="_blank">00:01:13.240</a></span> | <span class="t">Now what does this array contain?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=75" target="_blank">00:01:15.060</a></span> | <span class="t">So interestingly, if we look at the integer cache class inside the integer object implementation</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=80" target="_blank">00:01:20.320</a></span> | <span class="t">in Java, it defines a hard-coded low of -128 and a high that's passed in as a parameter,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=87" target="_blank">00:01:27.320</a></span> | <span class="t">that's 127 as a default.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=89" target="_blank">00:01:29.960</a></span> | <span class="t">And what that does is create a cache of integer objects from -128 to 127, and then reuses</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=97" target="_blank">00:01:37.820</a></span> | <span class="t">this cache every time an integer object with a value in this range is used.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=103" target="_blank">00:01:43.480</a></span> | <span class="t">This is exactly the cache with reflection that we pull out and modify.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=109" target="_blank">00:01:49.200</a></span> | <span class="t">It so happens that the 132nd element in the cache is where the 4 resides, and so by way</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=117" target="_blank">00:01:57.120</a></span> | <span class="t">of obfuscation, it takes the 133rd element, which has the number 5 in it, and it sizes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=123" target="_blank">00:02:03.360</a></span> | <span class="t">it to 132nd, but you can just assign value 5 here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=128" target="_blank">00:02:08.680</a></span> | <span class="t">And then the result, and you are else in the code, if you use integer objects and the number</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=134" target="_blank">00:02:14.200</a></span> | <span class="t">4 comes up, it will instead output the number 5.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=138" target="_blank">00:02:18.240</a></span> | <span class="t">There you go, 2+2=5.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=141" target="_blank">00:02:21.600</a></span> | <span class="t">Check out the link in the description that points to the Stack Exchange Code Golf, has</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=145" target="_blank">00:02:25.520</a></span> | <span class="t">a bunch of interesting discussions around this, including the possibility of taking</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=150" target="_blank">00:02:30.480</a></span> | <span class="t">the entire 256 element array and shuffling it, thereby not only making 2+2=5, but messing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=158" target="_blank">00:02:38.600</a></span> | <span class="t">with the entirety of low value arithmetic in Java.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=163" target="_blank">00:02:43.320</a></span> | <span class="t">So there you go, that's how you hack the simulation.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=165" target="_blank">00:02:45.960</a></span> | <span class="t">Let me quickly thank the sponsors that somehow amazingly support the podcast and the videos</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=170" target="_blank">00:02:50.320</a></span> | <span class="t">I make.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=171" target="_blank">00:02:51.760</a></span> | <span class="t">This time it's Asleep Mattress, click the link to get a discount in the description.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=176" target="_blank">00:02:56.320</a></span> | <span class="t">And by the way, I have a conversation with James Gosling, the creator of Java, coming</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=179" target="_blank">00:02:59.900</a></span> | <span class="t">up on the podcast, so check that out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=182" target="_blank">00:03:02.620</a></span> | <span class="t">And remember, try to learn something new every day.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=185" target="_blank">00:03:05.240</a></span> | <span class="t">Bye!</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=185" target="_blank">00:03:05.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=187" target="_blank">00:03:07.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=189" target="_blank">00:03:09.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=191" target="_blank">00:03:11.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=193" target="_blank">00:03:13.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=195" target="_blank">00:03:15.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=197" target="_blank">00:03:17.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=199" target="_blank">00:03:19.740</a></span> | <span class="t">[end]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=amXXYgu0eFY&t=201" target="_blank">00:03:21.740</a></span> | <span class="t">[BLANK_AUDIO]</span></div></div></body></html>
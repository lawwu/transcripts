<html><head><title>Building AI agents with Claude in Google Cloud's Vertex AI | Code w/ Claude</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">Back to Index</a><h2>Building AI agents with Claude in Google Cloud's Vertex AI | Code w/ Claude</h2><a href="https://www.youtube.com/watch?v=TUysIAtxyrQ" target="_blank"><img src="https://i.ytimg.com/vi/TUysIAtxyrQ/maxresdefault.jpg" style="width:50%;"></a><div><br></div><h3>Transcript</h3><div class='max-width'><p>Hello everyone, thank you for joining these this session so in this session we are going to talk about how you can build AI agents using cloud on vertex AI so before to start let's see the let's set the scene so as you probably know like building a agent is a very powerful with AI agents you can build such a cool applications but the reality is after you start developing and you know prototyping agents and let's assume that you are happy with what you build it's so hard to productionalize these agents right and the reason are essentially three so first of all you need to because right now to build agent you have so many frameworks that provides you know tools that provides capabilities that you can that you can use to enhance your agents like the landscape is so fragmented so you need to figure it out how to integrate the different frameworks and different tools to make the system work so the other the other reason is let's assume that you are capable of building one agent or a multi-agent system with one framework but at the same time you want to use different framework together it's not easy to like make make the communication happen between these two different agents and then even let's assume that even if you're able to build agents create this network of agents that are capable of communicating between them it's so hard to manage them in production because you need to take care of all the operation around the agents and the relative governance so all the monitoring capabilities the logging capabilities that you need to implement on your agent they are very hard to be managed in this sense able to build agents, create this network of agents that are capable of communicating between them, it's so hard to manage them in production because you need to take care of all the operation around the agents and the relative governance.</p><p>So all the monitoring capabilities, the logging capabilities that you need to implement on your agent, they are very hard to be managed. In this sense, let's imagine that you will be able to have a toolkit that will allows you to standardize and develop your agent in a very efficient way and then together with this toolkit you you get a set of protocols that will allow your agent to consume tool and contacts with the LLM but at the same time connect with other agent in a seamless way and third you will you will get an agent platform that will allows you to deploy at scale these agent system and you know manage all the operations that are around these are these new kind of application.</p><p>So with these challenges in mind and these three you know three main reason that we want to address that's why we define our own agent stack on Google Cloud and our agent stack is composed by four main components. So the first one is agent development kit which is an open source code first and developer friendly framework that will allows you to build evaluate and deploy your agents at scale.</p><p>But in order to announce your agent you have a you need a way to standardize the agent communicate with different tools as I saw you before. So to address these challenges of protocols one one thing that we did when we design agent development kit is made and is making it compatible with MCP.</p><p>So probably you know what is MCP you already heard about it but with MCP essentially you will make the agent compatible with several tools and in general application you will be you will provide your contacts to your application using LLMs. On top of MCP so we also introduce like these vertex AI engine engine which is essentially a managed platform that has been designed to deploy, manage and scale your AI agent in production and it takes care of all those operational challenges and you know possible capabilities that you need in order to deploy your agent in production and and finally to address the challenges of allow communication between different agent build with different frameworks we also introduce agent to agent protocol.</p><p>So which is essentially you know open source an open source protocol that will allow you to create this seamless communication and collaboration between agents in whatever framework you built. So with this stack we are so today we are going to use this stack to build multi-agent systems and but before to do that let me to introduce myself I'm Ivan Nardini I'm a developer advocate at Google Cloud I'm based in Sunnyvale and today I want to go through this journey with you and the journey will start with building a very simple ADK agents using cloud and then we are going to announce these agents using some pre-built tools and MCP and MCP and finally we will deploy the agents on agent engine.</p><p>As a bonus we will try to cover which I will try also to show you how you can connect multiple agents using agent to agent protocol but in case we are not we will not able to do that don't worry we are going to have a live webinar at the end of the month so we will show you how to do that later.</p><p>With that being said we want to build an agent but to build an agent we need an LLM so let me show you how you can get access to cloud models on vertex.ai so cloud models on vertex.ai are accessible through vertex.ai model garden which is essentially a centralized hub where you can discover deploy and manage a wide variety of foundational and open models including cloud.</p><p>So on model garden you will find the latest and greatest cloud model this morning we just roll out cloud 4 so I will show you and after you simply you know feel you know you provide some credential and everything you will get access to the model and you will be able to use it through API or through the console.</p><p>So without further ado let me show you how you can get access to cloud. Okay so let's switch on the yes so for people that doesn't know vertex.ai this is how the vertex.ai console looks like so you vertex.ai provide a set of services to build both the generative.ai and predictive.ai application and model garden as I said is a centralized app that provides you several models from different you know model providers including cloud.</p><p>including entropic in fact in fact in the partner session you will find the entropic models and here you can see all the entropic models that we provide including the latest that we released this morning. So in order to you can use the model garden to test this model so here is the vertex.ai vertex.ai studio which is our prompt UI that you can use for test this model as you see I already select cloud 3.4.7 sonnet which is the model that we are going to use today to build our agent.</p><p>We are already integrating cloud 4.4 with IDK so stay tuned in the coming weeks but through this UI what you can do you can test the model and you know you can start you can start interacting with it and using the API that you can get here to integrate with your application.</p><p>So with that being said now that you know more or less how you know to get access to cloud through vertex.ai let's go back to the presentation and let's start building agents using this model. So in this demo we are going to build a very simple agent which is a birthday planner agent.</p><p>So it's an agent that essentially will allow you to organize a birthday party such as in teams and you know getting the guest list and so on and you know before to start this before to build this agent you need to know some concept related to ADK. Just one thing I know this session is supposed to be a workshop but because of the Wi-Fi issue that you've already faced I will I know we will already give you some credits and I will share the repository with you.</p><p>So after this session you will be able to reproduce this code I'm going to show you at home and if you have questions you can always come back to me. Okay with that being said these are the core concept that you need to know about ADK in order to build an agent with the agent development kit.</p><p>First of all agent development kit provides several type of agents that you can use. You already pre-built some you know pattern some agenting pattern including sequential agents that you can use in order to implement your application. But the simplest pattern that you can find is the one that we use with the LLM agent which essentially use just an LLM to feed to you know build to use the agent to build the agents.</p><p>And so this class represents the brain of the agent and it supports several models including Claude. And essentially it requires you to set the model give the agent a name, some instructions and define the tool that you want to use. And then after you've done this you get your agent already up and running.</p><p>With respect of tools you know what tool is. It's essentially a mean that you can use to you know assign some skills to the agent. And ADK we provide some pre-build tools that you can use but you can also define your own tools and integrate with the framework. So you have the agents you have the tool.</p><p>In ADK you have this concept of runner that puts together everything and coordinates you know execute the agents. So you manage the session so the conversation state along the while you're running the agents. And it is integrated with a very nice CLI that you can see here. ADK run and ADK web that will allow you to interact with the agent programmatically or you know to a web UI that I will show you later.</p><p>And then last important thing that I want to mention you have this concept of session which essentially will allow you to store the conversation and interact with the agent in a way that you know it remembers what you what you already discussed with him before. Okay. So with that being said I told you ADK support Claude.</p><p>How it is support Claude with two you can use Claude in two ways with ADK through the light LLM integration which is something that I will assume you are familiar with. Or you can use the pre-built integration that we provide as a vertex AI team using Claude and the LLM registry which is the one that I will show you today.</p><p>It's just a nice way you know to integrate the model with the with the interface. So with that being said let me show you how you can build an agent using using ADK. So this is the repository that you will you will get once you download from once you get once you clone the repo from GitHub.</p><p>So in the repository you will have three agents we are going to cover them today. And the first one as I said is the birthday planner. So in order to build an agent with ADK all you need to do is providing essentially three files. The agent.py which contains the agent logics.</p><p>The environment variable file which contains all the environment variables that you want to use for your agent. And an init file as you probably are familiar with. So just these three files will allow you to run the agent. And as you can see we design ADK to be so close to software engineering best practices.</p><p>So this is something that you should be capable of running easily. With that being said here you can see how you can use ADK. So you need to import the LLM agent a class the cloud a class which is going to represent the cloud model that we are going to use today.</p><p>And then you can introduce you can also use some other classes related to memory the runner that already explained. But with that being said once you get these once you import this class. This is all the bullet play code that you need to write in order to create your first agent.</p><p>So you use the LLM agent class. You define a name. The model that you want to use. In this case the cloud 3.7. The description. So what the agent is going to do. And the instruction that you want to give to the agent. That's it. Once you have this you are ready to go.</p><p>So all you need to do is that running. If you want to interact with the agent in a programmatic way. You can run ADK run. And then behind the scene it will start a session with your agent. Oh sorry. I forgot one thing. ADK run birthday. And then it will run a session.</p><p>An interactive session with your agent. So from here you can start interacting with your agent. And you can start understanding how it works. And so in this way you can interactively develop the agents. And you can improve the agent depending on the task that you are trying to achieve.</p><p>So again. Three files. One CLI. And you are done. And you can start improving your agents. So let's go back to the slide. Okay. Okay. So let's assume that you know you clone the repo. You get your agent up and running. Let's make things a little bit more complicated.</p><p>So we want to extend our agents in a way that it becomes a multi-agent system. So we have this agent that it will give us suggestion for the birthday party. But then once we get the birthday party we want also you know to schedule some time in our agenda.</p><p>For example for going and buy the gift for the party or you know just setting a reminder of the birthday day. So how you do that? You do you introduce you know tools. And the cool thing of ADK is that we didn't want to reinvent the wheel. So we by day zero we introduced this integration with MCP.</p><p>So again I'm not going to explain you what it is MCP and the difference between you know the language specific tools or the API. The idea is essentially with MCP you standardize the way LLM get access to the context. Not only LLM but also agents. With ADK you have two ways to use MCP.</p><p>So you can use MCP some MCP existing server and you know integrate them as a tool with ADK. This is something that we are going to do today. So whatever MCP server is out there you can use just like you can use today already with ADK without you reinventing you know the wheel in that sense.</p><p>Or if you have ADK and you build some tool in ADK you can use MCP to deploy this tool and interact with other agents. So these are the two ways that you have that you can use to leverage NCP with ADK. So with that being said let me show you how you can use ADK with MCP.</p><p>So let's go back here. Let me exit to this agent. And then let's go to. So this is the second agent. So again as I said now we want to what we want to do is that we want to introduce a calendar service agent which will allow me to schedule some time in my agenda.</p><p>And because now we have two agents the birthday one and the calendar one we want to also introduce an orchestrator which route my you know request to the right agent depending on what I want to achieve. So in this particular case the birthday planner is exactly the same agent that we defined before except that now I want to create an hybrid system.</p><p>Because for example like for scheduling for some forgetting some birthday idea I can use also a very you know I can use also a different model like Gemini. But then I have these calendar agents that in this case we use again cloud 3.5 with an NCP server to schedule some time in my agenda.</p><p>So in order to use an MCP server we dedicate these are the two line of codes that you need to introduce. So you get you you get to the MCP server that you already have out there or you already created right or deployed as a as a serverless service.</p><p>And then you create a connection with it. And then what happened behind the scene when you start building your agent when you run this command and you start building your agent. What it does he like get all the information all the requirements to run your MCP server. It converts these MCP servers as a tool and they use these MCP servers as a tool of the agent.</p><p>That's it. But again the cool thing what I really believe is powerful already case that it will allows me with two line of codes to integrate any kind of NCP tool that you have already. Once you have these MCP tool you integrate it as a tool again in the our agent and you're done.</p><p>Same similar things so now we have the birthday agent we have the calendar agent. This is how the organizer look like. So look at how easy it is to pass multiple agents in an orchestrator like this one. Again you all you need to do is defining better instruction because in this case this agent is going to orchestrate a multi-agent system.</p><p>So you will define what agent like what each agent is capable of doing and then you pass all the agent as a tool in this orchestrator. So again it will figure it out what agent to use depending on your request. Once you have done this you are good to go.</p><p>So what we can do is that running going back here local actually let me do this let me show you this. So before I show you how you can interact I can spin up an agent interactive programmatically programmatically. But because now this system is more complicated we have three agents right.</p><p>We want something more a little bit more solid to try to understand what is happening behind the scene. So in any case you have these are web UI which allows you to debug and interact interact with your region. So this is the web UI. So in this case this is how it looks like.</p><p>So the web UI we select the agent that I want to run and this is a. So in this case it's like what we did before except that now we have the we have the other agents. We have the multi-agent system that is running behind the scene. And as you can see here this UI will nicely provides you a way to see what is happening behind the scene with your agent.</p><p>So while you are running the conversation with it you will see which agent is using for doing what. Okay with that being said so now you know also the web UI let's go back on the on the presentation. Thank you. Thank you. So. Let's. For the last part of this presentation I want to show you also how you can easily deploy the agent on agent engine.</p><p>So in order to do that. Let me do this. Yeah. In order to do that. Let me first introduce you what what is on it. What is why why you need an agent engine like this one. Essentially when when you need to deploy agent at scale in order to do that you need to figure it out a lot of complexity.</p><p>Right. You need to get your agent code. You need to. You know drop the agent in a one of those services like fast API or jungle. You need to build your container and then you know you need to figure it out your environment to run it. In this case you can be a GCP environment and then you need to handle all the operation related to infrastructure.</p><p>And at the same time you also need to monitor these agents because at the end of the day is an application right. So with the agent engine what you can simply deploy the agent using a metal like agent engine creates and you will get your agent up and running.</p><p>As well as all these observability all those ability capabilities and the monitoring that you need in order to deploy your agent. They are directly managed by the platform itself and also all the interaction that you have with the agents. They are going to be automatically collected by our logging system and you will directly use them to run some evaluation in a way that you know you can keep improving your agent a long time.</p><p>So these are like this gives you an idea of the reason why you want to consider an agent engine and this give you the picture on the overall picture of the agent of vertex agent engine. So in this picture as you can see agent engine is capable of integrating you know any kind of agent framework.</p><p>You can you can do that you can use those framework as well and then whatever tools and whatever model that you want and the agent engine will take care of deploying your agents and will enable all these observability capabilities of features that you need using some cloud tools and the evaluation part is also covered by one of our services which is the vertex AI evaluation service.</p><p>So to wrap up like the agent engine capabilities so you can deploy any agent that like you can define agent in any framework that you want. You can use these manager on time to deploy these agents and then you will automatically get you will automatically be able to observe the behavior of the agent call the agent at scale.</p><p>And we the agent engine is also has an integration with another with another services that we provide on Google code which is a agent space which I'm not going to cover today. But just to give an idea it's the gate that will allows your agent to go in the ends of business.</p><p>So really you know have an impact of the agents that you are going to build in an enterprise context. But with that being said let me jump in the last lab that we are going to cover today. So I already show you how you can build the agent. So in this last lab what I want to show you is how you can easily deploy an agent with a few line of codes.</p><p>So in the repository you will find these are these are module that essentially will allows you to iteratively deploy your agents. All you need to do to deploy an agent on vertex agent engine is providing the base requirements that your agent needs in order to run. And then as I said we provide already a class that will allows you to create an agent and point in this case on the agent engine.</p><p>So in this class you have your agent that you define in this case we are going to deploy the first agent the birth planner agent. And then here you have the requirements you can provide extra packages if you want. But then again few line of codes to deploy your agent in a manager in a manager service that is scalable and will allows you to open your agent to several users.</p><p>So with that being said let me run this script. So first of all let me close this session. Clear. Then let me go in the repository. Ls. Ls. And then here I have my module. So in this case I do Python deploy agent. So what happened behind the scene is that it will start deploying my agent.</p><p>So you can monitor the deploying on the agent directly in the vertex console. Now this step is going to get some time as you can imagine because it's building the image and deploying the agents. So let me directly jump into the UI. So once you once the deployment of the agent will successfully run.</p><p>What you will do is you will get an entry in the vertex AI agent engine UI. And from these UI you will be able to monitor this agent. So the query that he receives the latency that it takes. So how long it takes to respond to the query. And you will also monitor, you know, the CPU and the memory that the agent is using.</p><p>So you can better understand if you allocate enough resources to serve this agent at scale. The engine is also manage session. So in this case I just deployed one. So we don't start a session yet. But here you will see the session. And it will give you all the information that you need in order, you know, to integrate this agent in application.</p><p>Both in a real time or streaming depending on the method that you want to use. And you can always check the details of the of the deployment. Okay, so let's go. So now you have also an idea of how to deploy the agent. Let's go back to slide. Thank you.</p><p>So as I said, this was a bonus part. I don't think we are going to call. We have time to cover it. But what I want to tell you is that let's assume that you build your agent. You deploy it on agent engine, right? And right now we build all our agents using just ADK.</p><p>But what if you want to deploy or build your agent, build and deploy your agent using land chain, crew AI or whatever framework. As I already said, agent engine support this. But what the main problem is that you don't have a way to connect these agents that are built with different framework together, right?</p><p>So that's when you need a protocol to do that. So in a world where you are going to have multiple agents that they are built and deployed with different framework. There is this need to find a common language between these agents to interact and collaborate in order to achieve some task.</p><p>And that's why as a Google Cloud, we introduce agent to agent protocol. So again, it's an open protocol that has been designed to enhance, to foster the agent collaboration using very simple concept that I will show you in a minute. But the key thing that I want to share with you is that has been already designed to be enterprise ready.</p><p>So it has a bunch of features that will allow you to govern in a secure way your agent. And again, also in this case, we didn't invent the wheel because it's based on some standard protocol, HTTP, JSON-RCP, something that is common adopting in the industry. The concept that you need to know about 8-Way is the concept of agent skills.</p><p>So which essentially describe the function or the capability of the agents. And it's like a business card of your agent with respect to other agents. And then you have the agent skills describe what the agent is capable of doing. So you manage the function that the agent has. And then you have the agent card that essentially is a digital business card for the agent with allow other agent or other application to know what are the skills of the agent and how to interact with it.</p><p>So one is describe the agent. The other one describe what is the agent capable of doing to the other agents. And then, as before, you have an agent executor that essentially manages the communication, the request, and the response that this system generates between agents. So with these three concepts, you can build a system like this one where you will essentially have multiple agents written with different framework communicating between each other in order to achieve a particular and more complex task rather than the one we built today of, you know, scheduling or buying a birthday gift.</p><p>So we are not going to cover this today. But again, as I said at the beginning, we are going to have a live webinar at the end of the month. So I will share with you the QR code. So just to recap, we start from these three main problems, right?</p><p>Building agents is powerful, but there are several challenges when you want to put them in production. You have a fragmented landscape. There are some integration complexity that you need to manage. And even if you are capable of fixing this, you have to manage all the operational overhead that you need to handle in order to deploy these agents.</p><p>And then that's when you want to enable, like, you want to get access to a toolkit, protocols, and engine platform that at the end it allows you to standardize the way you build your agent and scale them to production. And to give you this kind of tool, we put together this agentic stack using ADK, MCP, agent engine, and end way.</p><p>It will essentially allow you to confidently build a genetic system and scale them in production as required. Okay. So, scanner alert. So, please get your phone out. I'm going to share with you some useful QR codes. So, the first one that I want to share with you is code.</p><p>So, in this repository, you will find all the code related to ADK. So, samples, you know, getting start, everything you will find here. Three, two, one. Okay. And then, if you want to know how, if you want, I mean, we covered this in 30 minutes, but it can be like a one hour workshop.</p><p>So, here you can find a webinar we are going to run together with Anthropic next month. And where we show also the integration with 8Way. So, please scan this code. Three, two, one. Okay. Okay. And then, I mean, I was fast. So, I assume that you have several questions.</p><p>So, feel free to reach out. I'm always happy to answer your questions. But with that being said, I hope you enjoyed the session. I am just 20 seconds late. So, I hope you enjoyed. And, yeah. Thank you for attending this. attending this. Thank you. Thank you. Thank you. Thank you.</p><p>Thank you.</p></div></div></body></html>
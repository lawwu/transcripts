<html><head><title>Hybrid Search Walkthrough in Pinecone</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>Hybrid Search Walkthrough in Pinecone</h2><a href="https://www.youtube.com/watch?v=iCkftKsnQgg"><img src="https://i.ytimg.com/vi_webp/iCkftKsnQgg/maxresdefault.webp" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=0">0:0</a> <Untitled Chapter 1><br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=52">0:52</a> How Hybrid Search Works<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=85">1:25</a> Preprocessing<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=181">3:1</a> Creating Keywords<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=334">5:34</a> Creating an Index<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=410">6:50</a> Data Upsert<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=513">8:33</a> Query Setup<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=652">10:52</a> Keyword Search<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=751">12:31</a> OR Logic<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=889">14:49</a> AND Logic<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=910">15:10</a> Negation<br><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1024">17:4</a> Outro<br><br><div style="text-align: left;"><a href="./iCkftKsnQgg.html">Whisper Transcript</a> | <a href="./transcript_iCkftKsnQgg.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">Today we're going to have a look at how we can perform a hybrid search in Pinecone.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=6" target="_blank">00:00:06.620</a></span> | <span class="t">Now a hybrid search is where we perform a semantic search and also a keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=15" target="_blank">00:00:15.240</a></span> | <span class="t">Now we know semantic search is an incredibly useful tool that allows us to search based</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=21" target="_blank">00:00:21.280</a></span> | <span class="t">on meaning or concepts rather than relying on specific keywords, but sometimes a more</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=30" target="_blank">00:00:30.360</a></span> | <span class="t">traditional basic keyword search can be quite useful, particularly if you know what keywords</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=36" target="_blank">00:00:36.300</a></span> | <span class="t">appear in the documents that you're searching for.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=39" target="_blank">00:00:39.780</a></span> | <span class="t">So Pinecone allows you to perform a hybrid search, allowing us to both perform a semantic</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=46" target="_blank">00:00:46.580</a></span> | <span class="t">search and a keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=50" target="_blank">00:00:50.080</a></span> | <span class="t">Let's have a look at how that works.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=52" target="_blank">00:00:52.400</a></span> | <span class="t">So we start with our full index with all of our vectors, and what we do is apply our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=59" target="_blank">00:00:59.040</a></span> | <span class="t">keyword search to filter out irrelevant vectors from our search scope.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=65" target="_blank">00:01:05.960</a></span> | <span class="t">And then we introduce our query vector, and using that query vector we find top K, in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=71" target="_blank">00:01:11.640</a></span> | <span class="t">this case three, most similar vectors.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=75" target="_blank">00:01:15.580</a></span> | <span class="t">And this is a semantic search portion of our query.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=79" target="_blank">00:01:19.880</a></span> | <span class="t">And those are our top K most similar results using hybrid search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=85" target="_blank">00:01:25.680</a></span> | <span class="t">Now let's have a look at how we can actually implement that in Pinecone and start adding</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=92" target="_blank">00:01:32.120</a></span> | <span class="t">some basic keyword search logic in there using AND, OR, AND, NOT modifiers.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=100" target="_blank">00:01:40.720</a></span> | <span class="t">So we're going to start with a few sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=103" target="_blank">00:01:43.160</a></span> | <span class="t">So here we just have 10 sentences that are completely random.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=108" target="_blank">00:01:48.160</a></span> | <span class="t">And what we first need to do with these sentences, as we usually would with semantic search,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=114" target="_blank">00:01:54.320</a></span> | <span class="t">is we need to encode them.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=117" target="_blank">00:01:57.300</a></span> | <span class="t">And we'll be encoding them to produce sentence embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=120" target="_blank">00:02:00.680</a></span> | <span class="t">For that, the easiest approach is to use the sentence transformers library, which you can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=126" target="_blank">00:02:06.120</a></span> | <span class="t">pip install using this code here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=130" target="_blank">00:02:10.080</a></span> | <span class="t">And of course, you will also need the Pinecone client as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=135" target="_blank">00:02:15.120</a></span> | <span class="t">So here, all we're doing is initializing a sentence transformer.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=140" target="_blank">00:02:20.420</a></span> | <span class="t">And we're using one of the more recent sentence transformers to produce our embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=147" target="_blank">00:02:27.960</a></span> | <span class="t">To produce our embeddings, we've initialized our model up here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=154" target="_blank">00:02:34.600</a></span> | <span class="t">And all we do is we call the encode method and pass all of our sentences to that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=159" target="_blank">00:02:39.740</a></span> | <span class="t">And that will produce all of our embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=162" target="_blank">00:02:42.320</a></span> | <span class="t">And we can find a shape that it will be 10 embeddings, or 10 sentence embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=169" target="_blank">00:02:49.160</a></span> | <span class="t">And each one of those has a dimensionality of 768.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=174" target="_blank">00:02:54.500</a></span> | <span class="t">So now what we need to do-- so that's the semantic search portion of our data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=181" target="_blank">00:03:01.960</a></span> | <span class="t">Now we need to deal with the keyword search portion of our data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=187" target="_blank">00:03:07.840</a></span> | <span class="t">So when we upset our data to Pinecone, we're going to need to include a list of tokens</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=195" target="_blank">00:03:15.720</a></span> | <span class="t">or a list of words so that we can then use that list of words to filter and perform our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=201" target="_blank">00:03:21.400</a></span> | <span class="t">keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=205" target="_blank">00:03:25.140</a></span> | <span class="t">So to build that list of tokens for each one of our sentences, we're going to use Hugging</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=210" target="_blank">00:03:30.280</a></span> | <span class="t">Faces transformers library.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=213" target="_blank">00:03:33.080</a></span> | <span class="t">So for that, we're going to write, from transformers, import, and we're going to import the AutoTokenizer</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=221" target="_blank">00:03:41.720</a></span> | <span class="t">class.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=223" target="_blank">00:03:43.640</a></span> | <span class="t">Now it's important that we use a tokenizer that uses word-level tokenization, because</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=231" target="_blank">00:03:51.080</a></span> | <span class="t">many of these tokenizers do not split sentences into words, but they split into sub-words</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=238" target="_blank">00:03:58.620</a></span> | <span class="t">or even byte-level encodings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=241" target="_blank">00:04:01.080</a></span> | <span class="t">So we need to make sure that we're using a word-level tokenizer.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=247" target="_blank">00:04:07.840</a></span> | <span class="t">And that is what this model here is.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=252" target="_blank">00:04:12.360</a></span> | <span class="t">So this transform XLWT103, the tokenizer for that is a word-level tokenizer.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=264" target="_blank">00:04:24.320</a></span> | <span class="t">So we initialize that, and we'll put all of our INC tokens within a variable called AllTokens.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=274" target="_blank">00:04:34.480</a></span> | <span class="t">And we'll use list comprehension.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=275" target="_blank">00:04:35.480</a></span> | <span class="t">All we need to do is write tokenizer, and we use the tokenize method.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=282" target="_blank">00:04:42.280</a></span> | <span class="t">And then in here, we want to pass our sentence.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=286" target="_blank">00:04:46.440</a></span> | <span class="t">We also need to lowercase it, because this tokenizer will not lowercase our text by default.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=293" target="_blank">00:04:53.560</a></span> | <span class="t">So we just handle that, and we're doing that for each sentence in all of our sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=300" target="_blank">00:05:00.400</a></span> | <span class="t">And let's have a look at what that looks like for our first sentence.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=308" target="_blank">00:05:08.360</a></span> | <span class="t">So we see that we've split our first sentence, which you can see up here, into a list of</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=315" target="_blank">00:05:15.400</a></span> | <span class="t">words, which is exactly what we need in Pinecone to perform a keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=321" target="_blank">00:05:21.060</a></span> | <span class="t">So that's everything we need in terms of data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=324" target="_blank">00:05:24.620</a></span> | <span class="t">We have our dense vector representations, the sentence embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=329" target="_blank">00:05:29.400</a></span> | <span class="t">And we also have our keywords, the list of tokens.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=333" target="_blank">00:05:33.700</a></span> | <span class="t">So let's continue, and we will connect to a Pinecone instance.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=339" target="_blank">00:05:39.780</a></span> | <span class="t">If you haven't used Pinecone before, you can get a free API key over here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=345" target="_blank">00:05:45.740</a></span> | <span class="t">So we run our initialization cell, and then what we'll need to do is create a new index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=355" target="_blank">00:05:55.180</a></span> | <span class="t">Now before we create that index, what I'm going to do is list all of my current indexes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=361" target="_blank">00:06:01.120</a></span> | <span class="t">to make sure I don't overwrite any existing indexes.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=365" target="_blank">00:06:05.100</a></span> | <span class="t">Now I don't have any at the moment, so that's fine.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=367" target="_blank">00:06:07.780</a></span> | <span class="t">I can call this whatever I want, but I'm going to go with keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=372" target="_blank">00:06:12.520</a></span> | <span class="t">Now you can name this anything you'd like.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=375" target="_blank">00:06:15.540</a></span> | <span class="t">You don't have to use the same name as what I'm using here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=377" target="_blank">00:06:17.860</a></span> | <span class="t">So what I'm going to do is create the index, and then after that, I initialize my connection</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=385" target="_blank">00:06:25.460</a></span> | <span class="t">to that index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=388" target="_blank">00:06:28.060</a></span> | <span class="t">So I run both of those.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=392" target="_blank">00:06:32.220</a></span> | <span class="t">And then just note here, I'm passing the vector dimensionality when I create the index there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=400" target="_blank">00:06:40.580</a></span> | <span class="t">And we can check this, so this will be the 768 that we saw earlier.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=407" target="_blank">00:06:47.420</a></span> | <span class="t">So you can see the 768 there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=411" target="_blank">00:06:51.140</a></span> | <span class="t">And now what we want to do is merge all the data that we've created so far.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=416" target="_blank">00:06:56.980</a></span> | <span class="t">So when we upset data to Pinecone, we want a list of tuples.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=423" target="_blank">00:07:03.580</a></span> | <span class="t">Each one of those tuples is going to contain an ID, a value, which is our sentence embedding,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=429" target="_blank">00:07:09.780</a></span> | <span class="t">and also any metadata.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=431" target="_blank">00:07:11.940</a></span> | <span class="t">Now the tokens that we're creating, we will include within the metadata field.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=438" target="_blank">00:07:18.020</a></span> | <span class="t">And we'll include that using this format here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=441" target="_blank">00:07:21.420</a></span> | <span class="t">So we can imagine within that metadata field for every single record or sample, we are</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=452" target="_blank">00:07:32.100</a></span> | <span class="t">going to have this tokens, and that will map to the list of tokens for each sentence.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=460" target="_blank">00:07:40.740</a></span> | <span class="t">So we'll execute that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=465" target="_blank">00:07:45.300</a></span> | <span class="t">And then we upset all of that to our index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=474" target="_blank">00:07:54.060</a></span> | <span class="t">And we'll see a little response here telling us how many samples or records we upserted,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=482" target="_blank">00:08:02.340</a></span> | <span class="t">which in this case is 10, as we would expect.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=485" target="_blank">00:08:05.420</a></span> | <span class="t">Now alternatively, if you'd like, you can also upsert with a curl.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=491" target="_blank">00:08:11.400</a></span> | <span class="t">And for that, you just reformat your data into a dictionary format, save it to a JSON</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=498" target="_blank">00:08:18.500</a></span> | <span class="t">object, and then upsert it using this curl command here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=503" target="_blank">00:08:23.740</a></span> | <span class="t">Now the URL that you see here, you will have to go into your Pinecone dashboard and find</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=510" target="_blank">00:08:30.700</a></span> | <span class="t">the URL for your index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=513" target="_blank">00:08:33.220</a></span> | <span class="t">Now we've upserted all of the data into our index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=517" target="_blank">00:08:37.400</a></span> | <span class="t">So let's go ahead and start querying.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=519" target="_blank">00:08:39.820</a></span> | <span class="t">So the first thing we need to do is create a query sentence.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=525" target="_blank">00:08:45.020</a></span> | <span class="t">So we just have this string here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=529" target="_blank">00:08:49.540</a></span> | <span class="t">And what we do is we encode that using the same model that we used earlier to encode</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=534" target="_blank">00:08:54.940</a></span> | <span class="t">all of our sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=535" target="_blank">00:08:55.940</a></span> | <span class="t">And we then convert that to a list, because it is otherwise a numpy array, and we need</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=541" target="_blank">00:09:01.420</a></span> | <span class="t">to make sure we are sending our requests with a list.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=545" target="_blank">00:09:05.940</a></span> | <span class="t">So we execute that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=548" target="_blank">00:09:08.580</a></span> | <span class="t">And let's start with a simple query without any keyword search at the moment.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=557" target="_blank">00:09:17.460</a></span> | <span class="t">So we pass our query vector, xq.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=561" target="_blank">00:09:21.260</a></span> | <span class="t">We say we'd like to return the top k results.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=565" target="_blank">00:09:25.340</a></span> | <span class="t">I'm going to set that equal to 10, so we're just returning everything.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=570" target="_blank">00:09:30.220</a></span> | <span class="t">And I'm going to include metadata just for this column, and then I'll remove this just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=576" target="_blank">00:09:36.060</a></span> | <span class="t">so you can see what we have in our index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=579" target="_blank">00:09:39.500</a></span> | <span class="t">OK, so we can see we have our ID in here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=583" target="_blank">00:09:43.860</a></span> | <span class="t">And we also have inside this metadata field.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=586" target="_blank">00:09:46.460</a></span> | <span class="t">We have all of our tokens, and it's using these tokens here that will be performing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=592" target="_blank">00:09:52.860</a></span> | <span class="t">our keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=595" target="_blank">00:09:55.480</a></span> | <span class="t">And if we just save this, and if we just iterate through those results, we like this for x</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=610" target="_blank">00:10:10.300</a></span> | <span class="t">in-- we can just have a look here, results.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=615" target="_blank">00:10:15.840</a></span> | <span class="t">We see we have results, and then we want to enter the 0 index of that list.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=622" target="_blank">00:10:22.500</a></span> | <span class="t">And then we're going to matches to get to the records that have been returned to us.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=631" target="_blank">00:10:31.620</a></span> | <span class="t">So we write in results, results, 0, and matches.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=641" target="_blank">00:10:41.740</a></span> | <span class="t">You can see here that we're returning the 10 IDs of our sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=651" target="_blank">00:10:51.780</a></span> | <span class="t">So what we now want to do is move on to actually implementing a keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=658" target="_blank">00:10:58.300</a></span> | <span class="t">So we'll make it a very simple query to start with.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=662" target="_blank">00:11:02.860</a></span> | <span class="t">So the index.query of xq top k, we'll set that 10 again, we're just returning everything.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=674" target="_blank">00:11:14.940</a></span> | <span class="t">And then we can set our filter, and it's through this filter that we perform our keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=682" target="_blank">00:11:22.540</a></span> | <span class="t">So we want to return only records where, within tokens, there is the word bananas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=694" target="_blank">00:11:34.300</a></span> | <span class="t">And again, we will get these IDs from here, but we're going to store them in the IDs variable.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=702" target="_blank">00:11:42.820</a></span> | <span class="t">Let's have a look what we get.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=705" target="_blank">00:11:45.100</a></span> | <span class="t">OK, so you see straightaway we're restricting our search, and there are only four records</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=711" target="_blank">00:11:51.740</a></span> | <span class="t">that contain the word bananas, so we're now restricting our search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=717" target="_blank">00:11:57.020</a></span> | <span class="t">So what we can now do is, for i in IDs, I'm going to print each one of those sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=726" target="_blank">00:12:06.700</a></span> | <span class="t">So we have all sentences i.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=729" target="_blank">00:12:09.620</a></span> | <span class="t">OK, and we can see to make sure that we're converting this back to an integer value.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=740" target="_blank">00:12:20.340</a></span> | <span class="t">And now we return those sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=743" target="_blank">00:12:23.500</a></span> | <span class="t">So we can see each one of these does contain the word bananas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=749" target="_blank">00:12:29.440</a></span> | <span class="t">OK, now what we might say is that we'd like to return sentences where we have one of two</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=760" target="_blank">00:12:40.020</a></span> | <span class="t">words.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=761" target="_blank">00:12:41.120</a></span> | <span class="t">So we're going to do bananas and way this time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=765" target="_blank">00:12:45.220</a></span> | <span class="t">So we're going to introduce the or logic.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=769" target="_blank">00:12:49.220</a></span> | <span class="t">Now we take this code here, and let's take this as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=779" target="_blank">00:12:59.740</a></span> | <span class="t">And what we're going to do, in our filter here, we are going to modify this to use the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=786" target="_blank">00:13:06.720</a></span> | <span class="t">or modifier.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=787" target="_blank">00:13:07.720</a></span> | <span class="t">So we have or, and then using or, we can pass a list of conditions.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=795" target="_blank">00:13:15.860</a></span> | <span class="t">And if any one of these conditions is true, we will return that record.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=803" target="_blank">00:13:23.140</a></span> | <span class="t">So we're going to say tokens contains bananas, or tokens contains way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=816" target="_blank">00:13:36.900</a></span> | <span class="t">And let's return and see what we get.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=820" target="_blank">00:13:40.660</a></span> | <span class="t">So you can see that we're returning one new sentence, which is this one here, which does</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=828" target="_blank">00:13:48.980</a></span> | <span class="t">not contain bananas, but it does contain way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=833" target="_blank">00:13:53.500</a></span> | <span class="t">Now that's using the or statement here, but we can also use, which is probably simpler,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=844" target="_blank">00:14:04.780</a></span> | <span class="t">we can also write this using the in modifier.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=850" target="_blank">00:14:10.760</a></span> | <span class="t">So we first write tokens, and then we say within tokens, within or in, we want to search</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=863" target="_blank">00:14:23.140</a></span> | <span class="t">for any records that contain either bananas or way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=870" target="_blank">00:14:30.500</a></span> | <span class="t">And this will produce the exact same results as what we got before.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=874" target="_blank">00:14:34.020</a></span> | <span class="t">So you see, we return those same five sentences.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=879" target="_blank">00:14:39.380</a></span> | <span class="t">So they're the two tool alternatives we have for or logic in our keyword search.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=886" target="_blank">00:14:46.700</a></span> | <span class="t">And let's copy this one.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=889" target="_blank">00:14:49.380</a></span> | <span class="t">And what we're going to do is just modify or, and replace it with and.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=894" target="_blank">00:14:54.860</a></span> | <span class="t">So now we're saying we only want to return sentences that contain both the word bananas</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=901" target="_blank">00:15:01.540</a></span> | <span class="t">and also the word way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=904" target="_blank">00:15:04.480</a></span> | <span class="t">So we do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=906" target="_blank">00:15:06.220</a></span> | <span class="t">And we see now we're only returning these two, which contain both of those words.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=910" target="_blank">00:15:10.220</a></span> | <span class="t">Now another thing that you might want to add here is, let's say maybe we do want the word</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=919" target="_blank">00:15:19.780</a></span> | <span class="t">way, but we also want to specify that we actually don't want any records that contain the word</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=927" target="_blank">00:15:27.260</a></span> | <span class="t">bananas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=928" target="_blank">00:15:28.620</a></span> | <span class="t">And again, we can still use the and statement here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=932" target="_blank">00:15:32.620</a></span> | <span class="t">And the only thing we actually need to change is we have to add a not equals ne to the bananas</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=942" target="_blank">00:15:42.820</a></span> | <span class="t">condition.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=943" target="_blank">00:15:43.820</a></span> | <span class="t">And this will invert that single condition here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=948" target="_blank">00:15:48.180</a></span> | <span class="t">Okay, so now we're searching for any records that do not contain bananas and contain the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=956" target="_blank">00:15:56.980</a></span> | <span class="t">word way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=959" target="_blank">00:15:59.040</a></span> | <span class="t">So we execute that and we'll see that there's only actually one of those.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=963" target="_blank">00:16:03.260</a></span> | <span class="t">So there's only one sentence that contains the word way and does not contain the word</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=968" target="_blank">00:16:08.420</a></span> | <span class="t">bananas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=970" target="_blank">00:16:10.300</a></span> | <span class="t">And what if we'd like to negate both of these?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=974" target="_blank">00:16:14.500</a></span> | <span class="t">Well, we could just add this, this any to the way condition as well, or what is simpler</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=983" target="_blank">00:16:23.340</a></span> | <span class="t">using the not in modifier.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=987" target="_blank">00:16:27.940</a></span> | <span class="t">So actually what we can do is we'll come up here and you see we have the, we have the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=994" target="_blank">00:16:34.700</a></span> | <span class="t">in modifier here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=997" target="_blank">00:16:37.380</a></span> | <span class="t">Very very similar.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=998" target="_blank">00:16:38.380</a></span> | <span class="t">All we need to do is bring that down here and replace in with not in.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1004" target="_blank">00:16:44.940</a></span> | <span class="t">And if we then search, what we're doing here is searching for any records that do not contain</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1012" target="_blank">00:16:52.380</a></span> | <span class="t">the word bananas or the word way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1016" target="_blank">00:16:56.420</a></span> | <span class="t">So here we're saying any sentences that contain just one of these words, we're not interested,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1023" target="_blank">00:17:03.220</a></span> | <span class="t">we exclude those.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1024" target="_blank">00:17:04.580</a></span> | <span class="t">So that's it for this introduction to hybrid search using both semantic search and keyword</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1031" target="_blank">00:17:11.780</a></span> | <span class="t">search in Pinecone.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=iCkftKsnQgg&t=1034" target="_blank">00:17:14.380</a></span> | <span class="t">We hope that this has been useful and we'll see you in the next video.</span></div></div></body></html>
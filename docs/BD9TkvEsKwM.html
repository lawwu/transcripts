<html><head><title>Evaluation Measures for Search and Recommender Systems</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 80%;
        margin: auto;
        overflow: hidden;
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>Evaluation Measures for Search and Recommender Systems</h2><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM"><img src="https://i.ytimg.com/vi_webp/BD9TkvEsKwM/maxresdefault.webp" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=0">0:0</a> Intro<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=51">0:51</a> Offline Metrics<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=158">2:38</a> Dataset and Retrieval 101<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=368">6:8</a> Recall@K<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=477">7:57</a> Recall@K in Python<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=543">9:3</a> Disadvantages of Recall@K<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=621">10:21</a> MRR<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=812">13:32</a> MRR in Python<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=858">14:18</a> MAP@K<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1097">18:17</a> MAP@K in Python<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1167">19:27</a> NDCG@K<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1766">29:26</a> Pros and Cons of NDCG@K<br><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1788">29:48</a> Final Thoughts<br><br><div style="text-align: left;"><a href="./BD9TkvEsKwM.html">Whisper Transcript</a> | <a href="./transcript_BD9TkvEsKwM.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">Evaluation measures are the foundation behind many of the biggest tech companies in the world.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=7" target="_blank">00:00:07.360</a></span> | <span class="t">Many of these companies have publicly stated that a big part of their engagement is thanks to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=17" target="_blank">00:00:17.600</a></span> | <span class="t">well-implemented information retrieval systems. All of these systems rely on retrieving relevant</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=26" target="_blank">00:00:26.400</a></span> | <span class="t">information from some sort of database. These evaluation measures are how we can understand</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=34" target="_blank">00:00:34.480</a></span> | <span class="t">whether our retrieval performance is good or not. Evaluation measures are split into online and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=42" target="_blank">00:00:42.320</a></span> | <span class="t">offline metrics. Online metrics can only be measured with a deployed product. Usually this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=48" target="_blank">00:00:48.800</a></span> | <span class="t">begins with A/B testing but before we even reach the stage of A/B testing there is another step.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=55" target="_blank">00:00:55.280</a></span> | <span class="t">Another set of evaluation measures that we call offline metrics. These are critical because they</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=62" target="_blank">00:01:02.400</a></span> | <span class="t">help us predict our retrieval performance before needing to put it in front of users.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=68" target="_blank">00:01:08.480</a></span> | <span class="t">Now an organization should always use both online and offline metrics but offline metrics are the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=76" target="_blank">00:01:16.400</a></span> | <span class="t">starting point and that's what we're going to focus on in this video. We are going to have a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=81" target="_blank">00:01:21.920</a></span> | <span class="t">look at predicting the performance of an information retrieval system before deployment, before A/B</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=88" target="_blank">00:01:28.560</a></span> | <span class="t">testing, before any of that. Now there are many different types of offline metrics but some of</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=95" target="_blank">00:01:35.280</a></span> | <span class="t">the most popular that we are going to focus on are recall at K, mean reciprocal rank, the mean</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=102" target="_blank">00:01:42.080</a></span> | <span class="t">average precision at K and a normalized discounted cumulative gain at K. All these metrics at first</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=110" target="_blank">00:01:50.640</a></span> | <span class="t">glance might seem complicated but as you will see they're very simple and incredibly useful</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=117" target="_blank">00:01:57.680</a></span> | <span class="t">ways of measuring the performance of our systems. Now within offline metrics including those that I</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=125" target="_blank">00:02:05.920</a></span> | <span class="t">just described we have a separation into order unaware and order aware. This refers to whether</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=134" target="_blank">00:02:14.160</a></span> | <span class="t">the order of the results has any impact on the final score. In order aware the order of results</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=144" target="_blank">00:02:24.240</a></span> | <span class="t">doesn't really make a difference whereas with order aware they do. Now we'll see a few examples</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=151" target="_blank">00:02:31.760</a></span> | <span class="t">of this throughout the video so if it doesn't make sense yet don't worry about it we will cover all</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=157" target="_blank">00:02:37.200</a></span> | <span class="t">of this. Throughout this video we are going to be using a very small data set of just eight images.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=163" target="_blank">00:02:43.200</a></span> | <span class="t">Now in reality you will typically be working with millions or even billions of items.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=170" target="_blank">00:02:50.400</a></span> | <span class="t">So this is a very simplified version but it's ideal for understanding how each one of these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=178" target="_blank">00:02:58.240</a></span> | <span class="t">metrics works. So in this case our query is cat in a box and we may return any eight of these images</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=187" target="_blank">00:03:07.840</a></span> | <span class="t">in any particular order. Of course some of them are relevant and some of them are not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=192" target="_blank">00:03:12.960</a></span> | <span class="t">and we can see those relevant results here. So the actual relevant results refer to those results</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=201" target="_blank">00:03:21.040</a></span> | <span class="t">that we would like to return. Okay and everything else is is not relevant to us so we would rather</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=206" target="_blank">00:03:26.800</a></span> | <span class="t">not return those results. Now when evaluating the performance of our information retrieval system</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=213" target="_blank">00:03:33.120</a></span> | <span class="t">we are going to be comparing actual conditions to predicted conditions. Now an actual condition</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=220" target="_blank">00:03:40.880</a></span> | <span class="t">refers to the true relevance of a item in the data set. So our actual relevant items here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=229" target="_blank">00:03:49.840</a></span> | <span class="t">their actual condition is positive because they are relevant and for the other ones that are not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=236" target="_blank">00:03:56.960</a></span> | <span class="t">relevant their actual condition is negative. And we want to get our predicted conditions close as</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=245" target="_blank">00:04:05.120</a></span> | <span class="t">possible to these actual conditions. The predicted conditions are what is produced by our information</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=250" target="_blank">00:04:10.720</a></span> | <span class="t">retrieval system. Now the information retrieval system may predict something like this. So</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=257" target="_blank">00:04:17.040</a></span> | <span class="t">say we ask the information retrieval system to return two items. It may rank everything and the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=266" target="_blank">00:04:26.000</a></span> | <span class="t">top two items that it believes to be the most relevant to our particular query cat in a box</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=270" target="_blank">00:04:30.720</a></span> | <span class="t">are here. We have number one which has a predicted condition of true which is what you can see over</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=278" target="_blank">00:04:38.720</a></span> | <span class="t">here with this p. Okay so that p hat that you see means that the predicted condition is true</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=286" target="_blank">00:04:46.640</a></span> | <span class="t">but we can also see that there's a negative. Okay and that is because the actual condition</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=293" target="_blank">00:04:53.600</a></span> | <span class="t">of that item is false it is not relevant to us. Okay so we get this false positive so it's negative</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=304" target="_blank">00:05:04.480</a></span> | <span class="t">actual negative and predicted positive. On the other hand we have this other returned item</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=312" target="_blank">00:05:12.240</a></span> | <span class="t">and this is a good result because we have a predicted positive</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=317" target="_blank">00:05:17.280</a></span> | <span class="t">and an actual positive so that's a true positive. And we can also see down here we have these other</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=326" target="_blank">00:05:26.960</a></span> | <span class="t">items so again another good result this is a true negative because the actual condition is negative</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=332" target="_blank">00:05:32.560</a></span> | <span class="t">and so it's a predicted condition. And if we go a little further we have some negative results</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=338" target="_blank">00:05:38.880</a></span> | <span class="t">although you can't really see the box here it is you can just see in the image there</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=343" target="_blank">00:05:43.600</a></span> | <span class="t">this is a false negative because the cat is actually in a box. Okay and we're predicting it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=350" target="_blank">00:05:50.000</a></span> | <span class="t">or the information retrieval system has predicted this is not relevant when it is actually relevant.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=357" target="_blank">00:05:57.760</a></span> | <span class="t">So just remember we have the actual conditions predicted conditions and we have positives or</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=363" target="_blank">00:06:03.600</a></span> | <span class="t">negatives based on those two forms of conditions. Now with that we can move on to our first metric</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=372" target="_blank">00:06:12.400</a></span> | <span class="t">which is recall at k. Recall at k is it's pretty simple we have the true positives which we just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=379" target="_blank">00:06:19.680</a></span> | <span class="t">described divided by the true positives and false negatives. So what does that mean? We take a look</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=387" target="_blank">00:06:27.840</a></span> | <span class="t">at the predicted positives that are also actual positives so the good positively returned results</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=397" target="_blank">00:06:37.840</a></span> | <span class="t">okay that's what this pb is and we divide that by the total number of actual positives in the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=406" target="_blank">00:06:46.720</a></span> | <span class="t">entire data set whether it was returned or not. Okay so here they were returned here they were not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=412" target="_blank">00:06:52.480</a></span> | <span class="t">that's all the recall is it's relatively simple. So let's have a look at this we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=419" target="_blank">00:06:59.840</a></span> | <span class="t">three items that should have been positive in this retrieval process but they were not retrieved</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=430" target="_blank">00:07:10.720</a></span> | <span class="t">okay they're the false negatives so we add them to the denominator of our recall formula</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=436" target="_blank">00:07:16.960</a></span> | <span class="t">and then we have one true positive so one that was an actual positive result</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=443" target="_blank">00:07:23.200</a></span> | <span class="t">and it was also predicted positive which is is good but it could have been better of course so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=450" target="_blank">00:07:30.080</a></span> | <span class="t">we add that to the denominator as well and also to the numerator so we get one over four so 0.25</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=458" target="_blank">00:07:38.080</a></span> | <span class="t">for our recall at two. Now it's a little bit unfair because even if this was a perfect retrieval</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=464" target="_blank">00:07:44.320</a></span> | <span class="t">system there are four actual positives here and we're only returning two items so the best it can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=470" target="_blank">00:07:50.560</a></span> | <span class="t">score is 0.5 but that is just how the recall metric works. Now let's have a look at how we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=478" target="_blank">00:07:58.560</a></span> | <span class="t">would calculate that in Python. So we just create a recall function here all we're doing is taking the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=485" target="_blank">00:08:05.440</a></span> | <span class="t">actual items the predicted items up to the top k okay so before we had recall at two so in this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=494" target="_blank">00:08:14.080</a></span> | <span class="t">case k would be two and we simply do that calculation that you saw before okay nothing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=502" target="_blank">00:08:22.000</a></span> | <span class="t">complicated there that's our recall function and all I'm doing here is saying okay these are the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=506" target="_blank">00:08:26.880</a></span> | <span class="t">actual results and these are up to the max of what we could predict okay because what I'm doing here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=514" target="_blank">00:08:34.480</a></span> | <span class="t">is going through and calculating this for all of the k possible k values up to the number of items</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=520" target="_blank">00:08:40.960</a></span> | <span class="t">we have in the data set just so you can see how recall works. So at the lower k values recall</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=530" target="_blank">00:08:50.480</a></span> | <span class="t">scores a lot lower than those at higher k values. Now if you have a pretty low k value in your</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=538" target="_blank">00:08:58.800</a></span> | <span class="t">system is still performing well that's pretty good news but if you increase your k value a lot</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=547" target="_blank">00:09:07.680</a></span> | <span class="t">you can kind of cheat the system because here we're getting a perfect recall score and we know</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=553" target="_blank">00:09:13.280</a></span> | <span class="t">that our performance is not perfect and that's obviously not ideal and another problem with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=560" target="_blank">00:09:20.480</a></span> | <span class="t">recall is we could swap in here we could swap item one and two okay so we could be predicting</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=568" target="_blank">00:09:28.880</a></span> | <span class="t">number two as our top result and recall at least recall at two would still return us the same score</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=578" target="_blank">00:09:38.480</a></span> | <span class="t">and depending on your use case this may or may not be a problem if it's important for you to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=584" target="_blank">00:09:44.480</a></span> | <span class="t">retrieve the most relevant results at the top of your retrieval list then this can be a problem</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=593" target="_blank">00:09:53.200</a></span> | <span class="t">okay if it doesn't really matter if you're just returning let's say the 10 items and you just need</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=599" target="_blank">00:09:59.200</a></span> | <span class="t">one item to be the one relevant item to be within that 10 you don't really care where it is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=604" target="_blank">00:10:04.320</a></span> | <span class="t">you can go ahead and order unaware metrics like recall will work perfectly fine but if you would</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=612" target="_blank">00:10:12.480</a></span> | <span class="t">like a one item to be at scored at rank one then these order unaware metrics become a problem</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=620" target="_blank">00:10:20.960</a></span> | <span class="t">so moving on to order aware metrics we will start with the mean reciprocal rank or mrr</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=629" target="_blank">00:10:29.360</a></span> | <span class="t">mr has a few advantages over recall first it considers the order of our return results as</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=638" target="_blank">00:10:38.960</a></span> | <span class="t">you will see that in a moment and it also considers multiple queries so we're not just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=643" target="_blank">00:10:43.920</a></span> | <span class="t">relying on a single query in the case of mr so if we take a look at the formula here we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=649" target="_blank">00:10:49.920</a></span> | <span class="t">there are a few things to to consider here first we have the reciprocal rank which is what you can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=657" target="_blank">00:10:57.200</a></span> | <span class="t">see over here then we sum the reciprocal rank for each query q from q1 to the total number of queries</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=668" target="_blank">00:11:08.800</a></span> | <span class="t">which is a capital q and then we take the mean by dividing this summed value by the number of</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=677" target="_blank">00:11:17.520</a></span> | <span class="t">queries that we made that's how we get mmr but we'll go through and break it down a little further</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=684" target="_blank">00:11:24.800</a></span> | <span class="t">in an example so we start with these three queries we have cat in a box white cat and dark cats so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=694" target="_blank">00:11:34.000</a></span> | <span class="t">queries two and three similar but slightly different to query one now the data set is the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=699" target="_blank">00:11:39.120</a></span> | <span class="t">same so we're still returning all of the same items we're returning them in a different order</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=705" target="_blank">00:11:45.040</a></span> | <span class="t">so we first need to calculate the rank reciprocal the rank reciprocal is the one over rank q that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=712" target="_blank">00:11:52.640</a></span> | <span class="t">you saw before now what this does is returns the rank of the first relevant item in the rank q</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=720" target="_blank">00:12:00.000</a></span> | <span class="t">position that's what rank q means okay so for your query q it returns the first relevant rank</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=727" target="_blank">00:12:07.520</a></span> | <span class="t">so in an ideal scenario this would be one so if we take a look at query one over here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=735" target="_blank">00:12:15.680</a></span> | <span class="t">the first item first relevant item is in rank two so that means here that rank one</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=743" target="_blank">00:12:23.760</a></span> | <span class="t">for query one is one over two okay so we get 0.5 over here we get the ideal scenario where</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=753" target="_blank">00:12:33.760</a></span> | <span class="t">it is returning a relevant item a position or rank position one so we get one over one</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=764" target="_blank">00:12:44.960</a></span> | <span class="t">and then over here we get a worse result so we have to go all the way down</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=769" target="_blank">00:12:49.120</a></span> | <span class="t">to rank five to find the first relevant item and that means here we have to do one</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=775" target="_blank">00:12:55.200</a></span> | <span class="t">divided by five so that's what the rank reciprocal part of mr is and then we need to sum all those</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=783" target="_blank">00:13:03.360</a></span> | <span class="t">together okay so we have all those and that leaves us with 1.7 okay but that's not everything</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=793" target="_blank">00:13:13.200</a></span> | <span class="t">we still need to divide by the total number of queries so we have 1.7 divided by q which</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=801" target="_blank">00:13:21.920</a></span> | <span class="t">is three because we made three queries which is equal to 0.57 now how does that look in python</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=811" target="_blank">00:13:31.440</a></span> | <span class="t">again it's pretty simple we're just going to replicate what we just did so we have an actual</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=816" target="_blank">00:13:36.080</a></span> | <span class="t">relevant results okay we would run those and come down to our calculation we have a total of three</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=826" target="_blank">00:13:46.080</a></span> | <span class="t">queries here so our q value the number of queries is three and then we're just going to loop through</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=832" target="_blank">00:13:52.880</a></span> | <span class="t">each of those queries you're going to make our query and we're going to see what the first</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=836" target="_blank">00:13:56.880</a></span> | <span class="t">relevant result is okay so the first relevant result is going to be two one and five okay and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=842" target="_blank">00:14:02.560</a></span> | <span class="t">we see that down here and then all we do is calculate the average reciprocal based on the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=852" target="_blank">00:14:12.320</a></span> | <span class="t">number of queries we made which is 0.57 which is the same as what we got before and now we can move</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=859" target="_blank">00:14:19.440</a></span> | <span class="t">on to the mean average precision now mean average precision or map is another popular order where</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=868" target="_blank">00:14:28.320</a></span> | <span class="t">metric has a bit of an odd name it's a mean of the average precision so the mean of an average</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=874" target="_blank">00:14:34.240</a></span> | <span class="t">but it does make sense as we'll see in a moment so we're going to start by just calculating the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=879" target="_blank">00:14:39.120</a></span> | <span class="t">precision okay so very similar to the recall but this time we're only considering the items that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=886" target="_blank">00:14:46.560</a></span> | <span class="t">we've actually returned okay so the items that we've actually retrieved and you can see that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=892" target="_blank">00:14:52.640</a></span> | <span class="t">because we're just returning the predicted positives okay and the denominator here is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=898" target="_blank">00:14:58.720</a></span> | <span class="t">basically just k okay so we can actually just do this and that gets us our precision at k so the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=908" target="_blank">00:15:08.480</a></span> | <span class="t">number of relevant return results divided by the total number of return results now let's return</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=915" target="_blank">00:15:15.840</a></span> | <span class="t">to our kind of box example in this case we are basically just adding one one because we've</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=924" target="_blank">00:15:24.080</a></span> | <span class="t">returned two items here so it's everything we've returned eg k and we've returned one relevant</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=930" target="_blank">00:15:30.480</a></span> | <span class="t">item so it's just one over two so we replace this with k and then one over two it's pretty simple</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=940" target="_blank">00:15:40.720</a></span> | <span class="t">that's precision and precision is the first component of mean average precision but before</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=948" target="_blank">00:15:48.720</a></span> | <span class="t">we actually get to map at k we need to go to average precision at k now to calculate that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=956" target="_blank">00:15:56.560</a></span> | <span class="t">we take the precision value which we just calculated but you'll notice that we're using</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=962" target="_blank">00:16:02.560</a></span> | <span class="t">a small k here and that's because we're going through every k value from one so precision at</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=971" target="_blank">00:16:11.520</a></span> | <span class="t">one all the way up to the actual k value that we have provided so in our data set we go all the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=977" target="_blank">00:16:17.920</a></span> | <span class="t">way up to eight and we would calculate the precision at one two three and so on all the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=984" target="_blank">00:16:24.160</a></span> | <span class="t">way up to eight and what this is doing here this is called a relevance parameter and it's looking</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=993" target="_blank">00:16:33.120</a></span> | <span class="t">at the relevance of a item at position k so what that means is here we have our precision values</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1006" target="_blank">00:16:46.560</a></span> | <span class="t">that we have calculated and this here is a low case k by the way not capital and the relevance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1014" target="_blank">00:16:54.960</a></span> | <span class="t">score for each one of these if it is not relevant is zero and if it is relevant is one and we go</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1024" target="_blank">00:17:04.160</a></span> | <span class="t">through all of those taking the zeros for not relevant as you can see here and the ones as</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1032" target="_blank">00:17:12.000</a></span> | <span class="t">relevant and we multiply all those together so essentially what we do there is just cancel out</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1037" target="_blank">00:17:17.680</a></span> | <span class="t">all the non-relevant calculations and only calculate the precision where we have a relevant</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1047" target="_blank">00:17:27.360</a></span> | <span class="t">item which is what you get here so in the end what we end up doing is we take all those values</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1055" target="_blank">00:17:35.120</a></span> | <span class="t">so you see 0.5, 0.5, 0.6, 0.57 which is the precision values that we get here and we just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1064" target="_blank">00:17:44.400</a></span> | <span class="t">divide them by the number of relevant results that we've returned but which is four and that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1072" target="_blank">00:17:52.960</a></span> | <span class="t">is our average precision values averaged over the possible k values and you can see here that we've</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1080" target="_blank">00:18:00.320</a></span> | <span class="t">done this for three queries okay so we have query 1, 2 and 3 now the mean part of mean average</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1088" target="_blank">00:18:08.160</a></span> | <span class="t">precision is simply taking the average over each one of these and that's mean average precision</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1097" target="_blank">00:18:17.360</a></span> | <span class="t">so how do we implement that in Python we're going to use the same actual relevant items this time</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1106" target="_blank">00:18:26.000</a></span> | <span class="t">again we're using q like we did before number of queries and we have our predicted the predicted</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1110" target="_blank">00:18:30.480</a></span> | <span class="t">is just the same for each one of our queries in this toy example and we just go through</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1116" target="_blank">00:18:36.800</a></span> | <span class="t">and we calculate the precision first which is it's pretty straightforward we check the relevant</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1127" target="_blank">00:18:47.600</a></span> | <span class="t">parameter values it's either one or zero depending on whether the item at position k</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1133" target="_blank">00:18:53.600</a></span> | <span class="t">is relevant or not and then we calculate the numerator value for ap okay so the average</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1144" target="_blank">00:19:04.080</a></span> | <span class="t">precision and simply divide that by the number of actual items for that particular query</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1150" target="_blank">00:19:10.880</a></span> | <span class="t">okay and then we get these numbers here and then all we need to do is take the mean of all those</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1158" target="_blank">00:19:18.080</a></span> | <span class="t">ap values to get map at k which we have here it's relatively straightforward now the final</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1168" target="_blank">00:19:28.480</a></span> | <span class="t">metric i want to talk about here is very popular one and it's incredibly incredibly useful it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1176" target="_blank">00:19:36.240</a></span> | <span class="t">basically takes everything that I've said about all the other metrics reviews and puts them all</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1181" target="_blank">00:19:41.680</a></span> | <span class="t">together this is called the normalized discount cumulative gain at k metric it's another audio</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1190" target="_blank">00:19:50.640</a></span> | <span class="t">aware metric and we derive it from a few simpler metrics so we start with the cumulative gain at</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1199" target="_blank">00:19:59.120</a></span> | <span class="t">k metric so cumulative again uses again this this relevance parameter but the relevance parameter</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1206" target="_blank">00:20:06.320</a></span> | <span class="t">is slightly different this time it's not just zero or one binary values instead it is a ranking that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1213" target="_blank">00:20:13.360</a></span> | <span class="t">is assigned to every single item for every single query and they are assigned from a scale the scale</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1224" target="_blank">00:20:24.480</a></span> | <span class="t">can vary we're going to use zero to four in this example they are assigned value of zero which is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1232" target="_blank">00:20:32.800</a></span> | <span class="t">less relevant up to four which is the most relevant than item can be for a particular query</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1239" target="_blank">00:20:39.920</a></span> | <span class="t">now of course this means that your data has to be labeled well which is a disadvantage of using this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1248" target="_blank">00:20:48.400</a></span> | <span class="t">this metric but if you have that labeled data it's ideal because you have a lot more expressibility</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1256" target="_blank">00:20:56.640</a></span> | <span class="t">with your evaluation metric so let's have a look at an example of how that might work so going back</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1263" target="_blank">00:21:03.680</a></span> | <span class="t">to our earlier example change it slightly now we're looking for a white cat in a box we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1269" target="_blank">00:21:09.680</a></span> | <span class="t">two items are super relevant because they are white cats in boxes we have number two over here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1278" target="_blank">00:21:18.400</a></span> | <span class="t">and number five they're both white cats in boxes they're perfect so the relevant score for those</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1283" target="_blank">00:21:23.840</a></span> | <span class="t">we've assigned it assigned both of them are four which is the most relevant an item could be for</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1289" target="_blank">00:21:29.360</a></span> | <span class="t">that particular query and then we have some other things so let's go down we go down to threes so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1296" target="_blank">00:21:36.160</a></span> | <span class="t">here number four we have a cat in a box but it's not white and the same for number seven so still</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1302" target="_blank">00:21:42.560</a></span> | <span class="t">relevant there's a cat in a box but it's not a white cat so it's less relevant and go down to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1308" target="_blank">00:21:48.880</a></span> | <span class="t">number two so here item number eight and it's been ranked two because it's a dog in a box so it's a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1318" target="_blank">00:21:58.080</a></span> | <span class="t">domestic animal in a box so it's sort of in the middle it's kind of relevant but it's not not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1324" target="_blank">00:22:04.480</a></span> | <span class="t">relevant at the same time and then we get further away from that so we go down to rank one so we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1332" target="_blank">00:22:12.320</a></span> | <span class="t">have item three and item six item three it's just a box item six it's two cats so it's kind of you</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1340" target="_blank">00:22:20.480</a></span> | <span class="t">know half of what we're looking for so in this case it's less relevant but neither of those are</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1348" target="_blank">00:22:28.560</a></span> | <span class="t">as irrelevant as a dog okay in this case the dog has been ranked as having a relevant score</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1358" target="_blank">00:22:38.960</a></span> | <span class="t">or rank of zero because it's not a cat it's not a box it's it's nothing really to the query other</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1365" target="_blank">00:22:45.040</a></span> | <span class="t">than being a domestic animal which is not what we're looking for so that's how that scoring</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1371" target="_blank">00:22:51.120</a></span> | <span class="t">mechanism works with all of the cumulative gain metrics that we're going to look at and if we were</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1377" target="_blank">00:22:57.680</a></span> | <span class="t">to take that into our formula we would get something like this so we have we're summing over</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1386" target="_blank">00:23:06.640</a></span> | <span class="t">all k values so we have k here up to the k of two okay so this is the lowercase k this is the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1395" target="_blank">00:23:15.680</a></span> | <span class="t">uppercase k so we're going one and two so we have a look at number one it's not relevant it has a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1404" target="_blank">00:23:24.640</a></span> | <span class="t">score of zero so it's equal to zero and then number two it is relevant so it has a score of four</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1413" target="_blank">00:23:33.600</a></span> | <span class="t">so our cumulative gain score in this case is equal to four now it's important to note here that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1426" target="_blank">00:23:46.960</a></span> | <span class="t">ndcg the metric is order aware but cg by itself is not if we've swapped those two items as we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1435" target="_blank">00:23:55.520</a></span> | <span class="t">here so we've swapped these two if we go back to this formula we are now doing four plus zero</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1445" target="_blank">00:24:05.360</a></span> | <span class="t">which again is just equal to four so cumulative gain by itself is not order aware to make it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1454" target="_blank">00:24:14.000</a></span> | <span class="t">order aware we have to use a discounted cumulative gain or dcg metric dcg adds one more component</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1464" target="_blank">00:24:24.400</a></span> | <span class="t">which is this penalty value in the denominator using this penalty function so this should be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1473" target="_blank">00:24:33.040</a></span> | <span class="t">four and this should be four and zero so we take a look at these we get zero plus 2.52</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1484" target="_blank">00:24:44.880</a></span> | <span class="t">okay so we score 2.52 in the case of the first query where we have the not good result in position</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1495" target="_blank">00:24:55.280</a></span> | <span class="t">in rank one whereas if we have a good result in rank one we get a score of four because</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1504" target="_blank">00:25:04.080</a></span> | <span class="t">log to the base two by two is equal to one plus zero okay so we get a score of four for our second</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1514" target="_blank">00:25:14.160</a></span> | <span class="t">query which is better and that's great because we're returning a better score now let's have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1520" target="_blank">00:25:20.720</a></span> | <span class="t">a quick look at how we can calculate the dcg in python so we start by importing log to the base</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1528" target="_blank">00:25:28.160</a></span> | <span class="t">two from the math library we have the same relevant scores that you saw before so that's the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1534" target="_blank">00:25:34.080</a></span> | <span class="t">relic k values and we just go through those and we calculate the cumulative or discounted</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1543" target="_blank">00:25:43.280</a></span> | <span class="t">cumulative gain using relic k and our penalty function there okay you see as it increases</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1551" target="_blank">00:25:51.440</a></span> | <span class="t">because it's cumulative the dcg also increases now one problem with dcg as we've just seen is that the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1565" target="_blank">00:26:05.120</a></span> | <span class="t">values don't really have any range because it depends on the relevance rankings or the range</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1573" target="_blank">00:26:13.840</a></span> | <span class="t">of relevance scores that we've assigned in this case we use zero to four but you could use zero</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1579" target="_blank">00:26:19.120</a></span> | <span class="t">to 100 if you want to be excessive but you could do that and in that case the values that you're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1585" target="_blank">00:26:25.680</a></span> | <span class="t">going to get out of this are going to be completely different than if you use a range of zero to four</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1591" target="_blank">00:26:31.600</a></span> | <span class="t">which makes interpreting these numbers very difficult so that's where the normalized dcg</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1599" target="_blank">00:26:39.040</a></span> | <span class="t">comes in so the normalized dcg or n dcg uses another dcg metric called the ideal dcg to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1609" target="_blank">00:26:49.760</a></span> | <span class="t">normalize these values to within a range of zero to one where one is basically perfect and zero is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1617" target="_blank">00:26:57.440</a></span> | <span class="t">terrible now to calculate the idcg all we need to do is reorder all of our ranked results into the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1625" target="_blank">00:27:05.120</a></span> | <span class="t">ideal order so those results that have the highest relevance will be ranked first and it would go</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1634" target="_blank">00:27:14.080</a></span> | <span class="t">through in terms of relevance score and then we just calculate dcg again using that new order</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1642" target="_blank">00:27:22.240</a></span> | <span class="t">because that is the ideal dcg so using our earlier example we have two items that are both ranked at</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1650" target="_blank">00:27:30.640</a></span> | <span class="t">four so cross these values out and in this case we're going to use four instead and we would get</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1657" target="_blank">00:27:37.360</a></span> | <span class="t">a value four plus 2.52 so the ideal dcg is equal to 6.52 now to calculate that in python</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1670" target="_blank">00:27:50.640</a></span> | <span class="t">it's incredibly simple all we do is sort all of our relevance ranks beforehand using verse</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1678" target="_blank">00:27:58.400</a></span> | <span class="t">equals true and do these that same thing calculate dcg and using that we see we get these values so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1684" target="_blank">00:28:04.480</a></span> | <span class="t">idcg at two is equal to 6.52 and with all those calculations done we have our dcg and our idcg</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1693" target="_blank">00:28:13.200</a></span> | <span class="t">and now we can calculate the normally normalized dcg which is simply dcg divided by the ideal dcg</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1700" target="_blank">00:28:20.560</a></span> | <span class="t">so for our dcg value we got using query one of 2.52</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1707" target="_blank">00:28:27.680</a></span> | <span class="t">and our idcg is 6.52</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1720" target="_blank">00:28:40.000</a></span> | <span class="t">and that leaves us with a not too great score of 0.39 i'll switch back over to python again</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1728" target="_blank">00:28:48.640</a></span> | <span class="t">and see how we would do that for all of our k values up to eight</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1736" target="_blank">00:28:56.960</a></span> | <span class="t">so running through that all i'm doing is calculating the ideal values</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1743" target="_blank">00:29:03.440</a></span> | <span class="t">here and also the normal discounted or dcg values and dividing dcg by idcg and then we get these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1753" target="_blank">00:29:13.360</a></span> | <span class="t">values okay so you can see over time as we include more items in there the score does improve but it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1759" target="_blank">00:29:19.360</a></span> | <span class="t">never gets too perfect because this is not a perfect or ideal ranking of all of our items</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1766" target="_blank">00:29:26.960</a></span> | <span class="t">now ndcg is a great offline metric because it really prioritizes for highly relevant documents</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1776" target="_blank">00:29:36.560</a></span> | <span class="t">but at the same time we do need that more complex training data or label data in order for this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1783" target="_blank">00:29:43.360</a></span> | <span class="t">metric to actually work but if we do have that data this metric is perfect now that's the the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1791" target="_blank">00:29:51.600</a></span> | <span class="t">end of our metrics it's all of them so we've covered recaller k we've covered mean reciprocal</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1797" target="_blank">00:29:57.200</a></span> | <span class="t">rank we have covered mean average precision and we have also covered ndcg you can use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1806" target="_blank">00:30:06.480</a></span> | <span class="t">a few of those in your information retrieval systems to evaluate your performance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1814" target="_blank">00:30:14.320</a></span> | <span class="t">and you you really don't need much else other than that for your offline metrics</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1820" target="_blank">00:30:20.560</a></span> | <span class="t">in the case of spotify for example with their podcast search they use mean reciprocal rank</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1827" target="_blank">00:30:27.920</a></span> | <span class="t">at 30 and also recall at 30 and that was that they were there on offline metrics they didn't</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1835" target="_blank">00:30:35.040</a></span> | <span class="t">use anything else other than recall at one for their in batch evaluation now of course these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1841" target="_blank">00:30:41.680</a></span> | <span class="t">metrics still need to be supported with online metrics during ab testing and whilst you're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1848" target="_blank">00:30:48.960</a></span> | <span class="t">actually in production but these really get that first step of preparing an information retrieval</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1856" target="_blank">00:30:56.240</a></span> | <span class="t">system that is the best it possibly can be without needing to deploy it to any users</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1863" target="_blank">00:31:03.520</a></span> | <span class="t">and that's ideal because you will get the best information retrieval system you can if you use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1870" target="_blank">00:31:10.240</a></span> | <span class="t">these offline metrics well so that's it for this video i hope this has been useful so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=BD9TkvEsKwM&t=1879" target="_blank">00:31:19.200</a></span> | <span class="t">thank you very much for watching and i will see you again in the next one bye</span></div></div></body></html>
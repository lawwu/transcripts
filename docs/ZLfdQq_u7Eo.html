<html><head><title>IndexLSH for Fast Similarity Search in Faiss</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 80%;
        margin: auto;
        overflow: hidden;
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>IndexLSH for Fast Similarity Search in Faiss</h2><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo"><img src="https://i.ytimg.com/vi/ZLfdQq_u7Eo/maxresdefault.jpg" style="width:50%;"></a><div><br></div><div style="text-align: left;"><a href="./ZLfdQq_u7Eo.html">Whisper Transcript</a> | <a href="./transcript_ZLfdQq_u7Eo.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">Hi and welcome to the video. We're going to be covering how we can implement LSH in FICE.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=7" target="_blank">00:00:07.440</a></span> | <span class="t">Now we covered LSH and how it works using random projection in a previous video which I'm going to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=15" target="_blank">00:00:15.360</a></span> | <span class="t">release at the same time as this video so I'll link to that in the description if you want to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=20" target="_blank">00:00:20.480</a></span> | <span class="t">understand how LSH works. But in this video we're just going to cover how we implement it in FICE.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=25" target="_blank">00:00:25.840</a></span> | <span class="t">So we're going to be using the SIFT1M dataset which you can download using, I'll put a link</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=34" target="_blank">00:00:34.960</a></span> | <span class="t">to the script in the description, but it's just a big dataset of dense vectors. Now from this we'll</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=43" target="_blank">00:00:43.440</a></span> | <span class="t">get our 1 million samples xb and we also have our queries which I'm going to just, we're just going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=52" target="_blank">00:00:52.480</a></span> | <span class="t">to use one query at a time. Okay so we'll have one query, 1 million samples, and we perform our search</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=59" target="_blank">00:00:59.360</a></span> | <span class="t">using that. So what we first want to do is import FICE. I'm going to get my dimensionality which is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=67" target="_blank">00:01:07.520</a></span> | <span class="t">is it xb.shape and one I think d yep 128 so that's our dimensionality of each vector</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=77" target="_blank">00:01:17.440</a></span> | <span class="t">within the SIFT1M dataset and initially let's use an n bits value of 4 which gives us if we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=84" target="_blank">00:01:24.880</a></span> | <span class="t">think about it how many how many buckets does that give us we can do this right so it gives us</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=91" target="_blank">00:01:31.840</a></span> | <span class="t">a total of 16 buckets. Okay these are also potential buckets our vectors aren't necessarily</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=99" target="_blank">00:01:39.840</a></span> | <span class="t">going to be separated between all of them they might we might end up only using like 10 of those</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=105" target="_blank">00:01:45.680</a></span> | <span class="t">buckets for example. Okay and then what we want to do is initialize our index so FICE index lsh</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=113" target="_blank">00:01:53.200</a></span> | <span class="t">and in here we need to pass our dimensionality and also our n bits value so how many binary values</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=122" target="_blank">00:02:02.320</a></span> | <span class="t">we're going to include within each bucketed item. So do we first thing it's always good to check</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=132" target="_blank">00:02:12.240</a></span> | <span class="t">do we need to train the index. Index is trained is true so that means we don't need to train it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=137" target="_blank">00:02:17.920</a></span> | <span class="t">there's no optimizations or anything we need to do here so that's good don't need to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=141" target="_blank">00:02:21.520</a></span> | <span class="t">worry about that and then so without needing training all we do is index add and we add our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=151" target="_blank">00:02:31.360</a></span> | <span class="t">data. Okay and now we're actually just ready to go ahead and search so we do di equals index search</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=161" target="_blank">00:02:41.680</a></span> | <span class="t">xq and let's return let's set k up here actually so let's set k equal to 10. Okay so we do k</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=173" target="_blank">00:02:53.680</a></span> | <span class="t">and then we get the these are the apparently the most similar indexes to our query. Okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=185" target="_blank">00:03:05.200</a></span> | <span class="t">and there's one good thing to check here which makes it really easy to figure out if we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=190" target="_blank">00:03:10.640</a></span> | <span class="t">enough buckets or not is d which is the distance between those vectors. Now obviously if we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=198" target="_blank">00:03:18.080</a></span> | <span class="t">all of our vectors in a single bucket and we search and our query ends up in the same bucket</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=206" target="_blank">00:03:26.080</a></span> | <span class="t">all of the distances here are going to be zero because they're all going to be exactly the same</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=212" target="_blank">00:03:32.800</a></span> | <span class="t">hamming distance which is what we're returning so let's look and that's what we get. I mean we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=219" target="_blank">00:03:39.120</a></span> | <span class="t">very few numbers here so that's not that surprising. Let's push k up to 10k you'd</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=227" target="_blank">00:03:47.200</a></span> | <span class="t">think at this point you know surely we'd get some ones but no. So at least the first 10,000</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=235" target="_blank">00:03:55.200</a></span> | <span class="t">nearest neighbors are all within one bucket so it clearly there's an issue here we can't</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=242" target="_blank">00:04:02.400</a></span> | <span class="t">differentiate between all of those but if we just increase this to a very high number let's say like</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=250" target="_blank">00:04:10.240</a></span> | <span class="t">500,000 so this is returning half of the index at this point we should I imagine see we see a few</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=257" target="_blank">00:04:17.840</a></span> | <span class="t">ones so at some point within the first 500,000 items we do actually we move from a single bucket</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=267" target="_blank">00:04:27.520</a></span> | <span class="t">to at least one other bucket. Now if we think about it we can we can actually estimate roughly</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=276" target="_blank">00:04:36.320</a></span> | <span class="t">how what n bits value we need in order to kind of get a better distribution between our buckets</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=285" target="_blank">00:04:45.840</a></span> | <span class="t">so to not have everything in a single bucket so let's try these we have for n bits in in these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=292" target="_blank">00:04:52.880</a></span> | <span class="t">values let's give it a go see what we get and we see okay n bits equals two so this gives us an</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=300" target="_blank">00:05:00.320</a></span> | <span class="t">average of 250,000 items within each bucket so obviously that's not useful. Here we get 62k</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=310" target="_blank">00:05:10.000</a></span> | <span class="t">again not used to 4k 15k that's a lot better right but it's still not useful because we kind of want</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=319" target="_blank">00:05:19.840</a></span> | <span class="t">you know if we if we set k equal to 10 this isn't really going to give us anything particularly</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=327" target="_blank">00:05:27.040</a></span> | <span class="t">useful so and then we also need to consider the fact that we in our buckets not all of them are</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=334" target="_blank">00:05:34.320</a></span> | <span class="t">going to get used and what we will find is that and it's almost like there's there will be a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=339" target="_blank">00:05:39.120</a></span> | <span class="t">majority of or there will be a minority of buckets that end up with the majority of vectors so we we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=348" target="_blank">00:05:48.880</a></span> | <span class="t">need to go sub one uh for this to to work so i would say something probably n bits of 24 we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=358" target="_blank">00:05:58.560</a></span> | <span class="t">getting that i mean that value actually looks pretty good 0.05 so on average we should get</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=364" target="_blank">00:06:04.080</a></span> | <span class="t">0.05 items within each bucket okay so i mean let's let's test that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=374" target="_blank">00:06:14.640</a></span> | <span class="t">so we're gonna copy this and we'll just write a similar code to what we wrote before although</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=380" target="_blank">00:06:20.960</a></span> | <span class="t">one thing before we do that let's just check uh the average similarity let's uh so change k to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=388" target="_blank">00:06:28.480</a></span> | <span class="t">like 100 or 10 let's let's go with 10 yeah let's do 10 and what i want to do is given that i want</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=399" target="_blank">00:06:39.440</a></span> | <span class="t">to calculate the the cosine similarity average cosine similarity so we'll do that we use from</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=406" target="_blank">00:06:46.960</a></span> | <span class="t">sk learn metrics pairwise import cosine similarity this is just a super quick way for us to calculate</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=416" target="_blank">00:06:56.320</a></span> | <span class="t">and then check sk learn and we'll do cosine similarity and we have i zero</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=435" target="_blank">00:07:15.760</a></span> | <span class="t">xq sure oh so sorry we need to uh sorry to get there the indexes so i i just contains the indexes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=449" target="_blank">00:07:29.200</a></span> | <span class="t">uh we need to we need to pull them out of xb okay and we have this so we also need to take the mean</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=457" target="_blank">00:07:37.360</a></span> | <span class="t">of that so cos mean we'll get 0.44 which is just the average of those the average similarity though</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=468" target="_blank">00:07:48.960</a></span> | <span class="t">so it's pretty low let's compare that to if we did that for the whole um the whole data set so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=476" target="_blank">00:07:56.480</a></span> | <span class="t">like this see what we get okay so actually these are yeah i mean these are slightly more similar</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=486" target="_blank">00:08:06.960</a></span> | <span class="t">um so we even you know get slightly better results even even with that terrible</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=492" target="_blank">00:08:12.400</a></span> | <span class="t">sort of bucketing and so what i want to do is is repeat that process we just did there but i want</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=500" target="_blank">00:08:20.720</a></span> | <span class="t">to do it for different n bits values so we need to take our index bring it down here and we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=511" target="_blank">00:08:31.120</a></span> | <span class="t">going to say this we do index add our data and then we do di equals index search as we as we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=526" target="_blank">00:08:46.480</a></span> | <span class="t">usually do k is 10 and then we want to do cos equals cosine similarity again we're going to do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=536" target="_blank">00:08:56.400</a></span> | <span class="t">xb i so we're pulling out those indexes that we've got um we're doing this different n bits values</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=543" target="_blank">00:09:03.360</a></span> | <span class="t">hence hence loop and xq okay and then what we're going to do is just print</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=551" target="_blank">00:09:11.200</a></span> | <span class="t">n bits is equal to whatever it's equal to at that point</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=560" target="_blank">00:09:20.960</a></span> | <span class="t">and then new line i'm going to put um what is similarity so the similarity is equal to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=569" target="_blank">00:09:29.520</a></span> | <span class="t">cos dot mean like that and let's just see what we what we get so okay cool so so we look here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=579" target="_blank">00:09:39.840</a></span> | <span class="t">and so n bits of two is it's terrible gets better it gets better and then at 24 so that bit where</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=588" target="_blank">00:09:48.720</a></span> | <span class="t">we had the 0.05 we get the maximum value so we get this uh 7 3 here 7 4 which is the best we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=596" target="_blank">00:09:56.960</a></span> | <span class="t">get and then it kind of comes off a little bit here and i've kind of visualized that here so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=602" target="_blank">00:10:02.320</a></span> | <span class="t">this is the same um so structure i've gone a little bit high with with n bits as well</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=608" target="_blank">00:10:08.160</a></span> | <span class="t">and this is essentially the sort of structure we get so the bit that we just kind of saw</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=615" target="_blank">00:10:15.040</a></span> | <span class="t">was this section here where we're increasing n bits and reducing the number of or reducing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=622" target="_blank">00:10:22.640</a></span> | <span class="t">like heavily reducing the number of vectors within each bucket on average and the cosine</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=630" target="_blank">00:10:30.320</a></span> | <span class="t">similarity just shoots up really quick but then afterwards we still get this kind of slow increase</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=639" target="_blank">00:10:39.360</a></span> | <span class="t">and that's because so the buckets are now quite spread like the the vectors that are spread</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=647" target="_blank">00:10:47.040</a></span> | <span class="t">very nicely between different buckets but as we increase the resolution even further and further</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=653" target="_blank">00:10:53.520</a></span> | <span class="t">all it means is that we're adding more of the original information the original positional</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=659" target="_blank">00:10:59.120</a></span> | <span class="t">information of those vectors and essentially improving the resolution of those vectors so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=663" target="_blank">00:11:03.600</a></span> | <span class="t">they're just getting slightly more accurate in the whether the hashed buckets are closer to other</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=672" target="_blank">00:11:12.080</a></span> | <span class="t">very similar or not similar vectors now essentially the binary vectors are more heavily representing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=680" target="_blank">00:11:20.160</a></span> | <span class="t">the original dense vectors and that's why we see that slight increase that continues even after we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=688" target="_blank">00:11:28.960</a></span> | <span class="t">get to two n bits of 32 now one final thing i just wanted to quickly cover um is say we do have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=698" target="_blank">00:11:38.640</a></span> | <span class="t">issues and we want to sort of visualize the actual buckets themselves you know how how can we how can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=704" target="_blank">00:11:44.800</a></span> | <span class="t">we extract those buckets and and view and view the number of vectors that we have in each one now</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=711" target="_blank">00:11:51.440</a></span> | <span class="t">there isn't any any way of doing this in um in vice so you we kind of have to put our own</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=720" target="_blank">00:12:00.400</a></span> | <span class="t">code together so what we need to do is i'm going to create first create another index</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=726" target="_blank">00:12:06.080</a></span> | <span class="t">because i want to visualize these so i'm going to do and if what if i visualize it with n bits</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=733" target="_blank">00:12:13.600</a></span> | <span class="t">of 32 there's going to be well how many how many buckets would we have there it would be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=740" target="_blank">00:12:20.320</a></span> | <span class="t">2 to the power 32 so yeah we can't visualize that many buckets so we're going to go with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=745" target="_blank">00:12:25.920</a></span> | <span class="t">4 and n bits of 4 which gives us 16 buckets so index lsh we have d and we're going to use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=756" target="_blank">00:12:36.320</a></span> | <span class="t">a n bits value of 4 so n bits equals 4 just put that there</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=764" target="_blank">00:12:44.160</a></span> | <span class="t">okay we're going to add our vectors and now what we want to do is actually extract</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=775" target="_blank">00:12:55.200</a></span> | <span class="t">those binary vectors themselves so to do that we write array so we're going to store them in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=782" target="_blank">00:13:02.480</a></span> | <span class="t">the array variable and we do vice dot vector to array like this and in here we do index dot codes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=794" target="_blank">00:13:14.560</a></span> | <span class="t">so codes um just that word there is essentially that means you know the binary vectors that we've</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=802" target="_blank">00:13:22.720</a></span> | <span class="t">built they are called codes that's all it means but and we use it this word a lot in in similarity</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=808" target="_blank">00:13:28.800</a></span> | <span class="t">search so it's worth remembering also n bits is used a lot as well so in future videos we will</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=815" target="_blank">00:13:35.840</a></span> | <span class="t">in this series we you will see them quite a lot so then let's have a look at what we have we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=823" target="_blank">00:13:43.120</a></span> | <span class="t">okay so we wanted to pull out the binary codes and we're getting these these numbers which is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=831" target="_blank">00:13:51.360</a></span> | <span class="t">not exactly what we expect or or is it right um well okay let's have a look at the the min value</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=838" target="_blank">00:13:58.400</a></span> | <span class="t">here zero okay array max okay so we get 0 to 15 which means we get 16 values and okay let's do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=849" target="_blank">00:14:09.520</a></span> | <span class="t">n to the power of n bits okay so that means we have 16 unique buckets that all of our vectors</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=856" target="_blank">00:14:16.720</a></span> | <span class="t">are spread between so that's interesting let's see how many vectors we have we have 1 million</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=865" target="_blank">00:14:25.200</a></span> | <span class="t">so we have 1 million spread between 16 buckets so actually that sounds about right uh but how do we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=870" target="_blank">00:14:30.480</a></span> | <span class="t">so these these values here these are just the integer versions of our binary vectors so um well</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=879" target="_blank">00:14:39.920</a></span> | <span class="t">like this is represented by a zero and this is represented by one right so what we can do is use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=893" target="_blank">00:14:53.360</a></span> | <span class="t">this little little script here to convert them into uh the actual binary vectors so here this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=900" target="_blank">00:15:00.880</a></span> | <span class="t">this value is our first one which is a five and the next one is a 12 which you see here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=908" target="_blank">00:15:08.240</a></span> | <span class="t">so i mean that's that is our there are binary vectors and we can we can visualize how they are</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=916" target="_blank">00:15:16.480</a></span> | <span class="t">are spread um how many items are within each one of those buckets using this array and what we'll</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=923" target="_blank">00:15:23.520</a></span> | <span class="t">get is something that looks like this um so this is what i mean where we have so we have 16 buckets</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=930" target="_blank">00:15:30.000</a></span> | <span class="t">which you can see on the left here so all of these with 16 of those and not all of them even</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=938" target="_blank">00:15:38.800</a></span> | <span class="t">have any any vectors in so we have so we have one two three four that don't even contain any vectors</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=945" target="_blank">00:15:45.600</a></span> | <span class="t">and then the majority the vast majority are contained within these and these right so so these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=953" target="_blank">00:15:53.760</a></span> | <span class="t">four buckets contain almost everything and they have loads they have uh so the count is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=961" target="_blank">00:16:01.920</a></span> | <span class="t">is to the thousands there so here that that number</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=966" target="_blank">00:16:06.400</a></span> | <span class="t">add a few more zeros onto the end um so yeah the these four buckets are far too many</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=976" target="_blank">00:16:16.240</a></span> | <span class="t">far too many vectors in for it to be useful so that's why we before we increase it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=982" target="_blank">00:16:22.480</a></span> | <span class="t">increase our end bits value up to 24 now i think i mean that's basically everything i wanted to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=988" target="_blank">00:16:28.640</a></span> | <span class="t">cover but just be quickly in terms of performance um so visualize these using this is using device</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=995" target="_blank">00:16:35.600</a></span> | <span class="t">lh s lsh index um so we have n bits so obviously we just increase n bits loads</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1003" target="_blank">00:16:43.360</a></span> | <span class="t">we increase the recall performance so that's one thing about lsh is that to get good performance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1011" target="_blank">00:16:51.680</a></span> | <span class="t">you really have to increase the n bits value a lot and at that point it actually gets it can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1017" target="_blank">00:16:57.120</a></span> | <span class="t">get really inefficient um so this is a the time for each query as compared to a flight index</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1024" target="_blank">00:17:04.560</a></span> | <span class="t">so obviously i mean you you kind of want to be careful with a lsh index obviously it can be useful</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1035" target="_blank">00:17:15.600</a></span> | <span class="t">um but you know high dimensionality is difficult to to balance well with with speed and accuracy</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1044" target="_blank">00:17:24.720</a></span> | <span class="t">but obviously you know it can be done it just depends on how much accuracy you're willing to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1051" target="_blank">00:17:31.840</a></span> | <span class="t">sacrifice because in most cases with lsh you will be sacrificing a reasonable amount of accuracy so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1058" target="_blank">00:17:38.080</a></span> | <span class="t">the recall here is about 50 percent um so that's uh it's it's managing to to identify 50 percent</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1066" target="_blank">00:17:46.800</a></span> | <span class="t">around here of the same items that a flat index would would identify and it's only slightly faster</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1074" target="_blank">00:17:54.320</a></span> | <span class="t">so yeah you just have to sort of weigh you know what is most important for your use case with that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1083" target="_blank">00:18:03.680</a></span> | <span class="t">but anyway that's it for lsh um this this is the last video we'll cover uh for lsh for now</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1093" target="_blank">00:18:13.040</a></span> | <span class="t">in the next few videos and articles we're going to be covering a few different indexes and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1102" target="_blank">00:18:22.800</a></span> | <span class="t">and how we use them uh effectively so it should be pretty interesting but we're definitely getting a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1110" target="_blank">00:18:30.320</a></span> | <span class="t">bit more advanced than lsh now so it should be good but that's it for this video thank</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=ZLfdQq_u7Eo&t=1116" target="_blank">00:18:36.160</a></span> | <span class="t">you very much for watching and i'll see you in the next one</span></div></div></body></html>
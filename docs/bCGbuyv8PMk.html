<html><head><title>Rishabh Garg, Tesla Optimus — Challenges in High Performance Robotics Systems</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>Rishabh Garg, Tesla Optimus — Challenges in High Performance Robotics Systems</h2><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk"><img src="https://i.ytimg.com/vi_webp/bCGbuyv8PMk/maxresdefault.webp" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=0">0:0</a> Introduction to high-performance robotics challenges<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=15">0:15</a> The problem of unexplained robot behavior<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=54">0:54</a> Root cause analysis: policy vs. software<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=77">1:17</a> Designing a toy robotics system for analysis<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=84">1:24</a> System architecture: sensors, CPU, GPU, actuators, CAN bus<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=117">1:57</a> The initial, simple code loop<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=134">2:14</a> Expectation vs. reality: unexpected loop execution gaps<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=162">2:42</a> The impact of CAN bus data rate on loop execution<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=193">3:13</a> Potential solutions: accepting delay vs. multithreading<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=240">4:0</a> A new, pipelined design for reduced cycle time<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=272">4:32</a> New problems: "stuttering" and abnormal motor behavior<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=289">4:49</a> Data collection with external transceivers and "candump"<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=324">5:24</a> Expected vs. actual message plots: missed messages and jitter<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=372">6:12</a> Using cycle time plots to identify desynchronization<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=418">6:58</a> Transmit phase desynchronization: missed and queued data<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=483">8:3</a> Receive phase desynchronization: stale data and overcompensation<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=518">8:38</a> Resolving synchronization issues: kernel primitives and padding<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=565">9:25</a> The impact of logging on system performance<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=669">11:9</a> Reception and priority inversion<br><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=722">12:2</a> Conclusion and summary of key takeaways<br><br><div style="text-align: left;"><a href="./bCGbuyv8PMk.html">Whisper Transcript</a> | <a href="./transcript_bCGbuyv8PMk.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=15" target="_blank">00:00:15.000</a></span> | <span class="t">Good afternoon, everyone, and really excited to be here today.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=18" target="_blank">00:00:18.000</a></span> | <span class="t">Really exciting stuff so far, so many models, so many new ideas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=22" target="_blank">00:00:22.000</a></span> | <span class="t">And today I want to talk about what happens between the controller and the wire.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=27" target="_blank">00:00:27.000</a></span> | <span class="t">Now, we have seen so many policies that work, that control robots.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=30" target="_blank">00:00:30.000</a></span> | <span class="t">But again, we need to get that data to the actuators.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=34" target="_blank">00:00:34.000</a></span> | <span class="t">We need to get that data from sensors and feed the whole system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=37" target="_blank">00:00:37.000</a></span> | <span class="t">And what happens if your carefully crafted policy does not work as expected?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=41" target="_blank">00:00:41.000</a></span> | <span class="t">Like, is this issue in the policy or is it in the software system?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=44" target="_blank">00:00:44.000</a></span> | <span class="t">So today we look at a lot of instances where the issue will look like it's the policy,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=49" target="_blank">00:00:49.000</a></span> | <span class="t">but it's actually the software system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=51" target="_blank">00:00:51.000</a></span> | <span class="t">And along the way, we'll try to design a very small robotics robot.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=56" target="_blank">00:00:56.000</a></span> | <span class="t">So why this talk?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=57" target="_blank">00:00:57.000</a></span> | <span class="t">Again, well, robots are complex.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=58" target="_blank">00:00:58.000</a></span> | <span class="t">So many systems, so many different software components.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=61" target="_blank">00:01:01.000</a></span> | <span class="t">And yet we're focused on, like, one big question.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=65" target="_blank">00:01:05.000</a></span> | <span class="t">When things go wrong on the robot, when you don't see that motor move, what's the root cause?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=70" target="_blank">00:01:10.000</a></span> | <span class="t">Is the policy that is not giving the command or is it the software system?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=74" target="_blank">00:01:14.000</a></span> | <span class="t">And this is a question that I grapple almost every day.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=77" target="_blank">00:01:17.000</a></span> | <span class="t">And so I want to talk about what I've seen so far and how to diagnose these issues on the robot.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=82" target="_blank">00:01:22.000</a></span> | <span class="t">So let's go to the buildup.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=83" target="_blank">00:01:23.000</a></span> | <span class="t">Let's try to build a very small toy robotics general architecture, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=87" target="_blank">00:01:27.000</a></span> | <span class="t">Like, this is what a general robot would look like.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=89" target="_blank">00:01:29.000</a></span> | <span class="t">You'd have some actuators, a CPU, maybe a hybrid accelerator, and then a sensor.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=93" target="_blank">00:01:33.000</a></span> | <span class="t">Perfect.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=94" target="_blank">00:01:34.000</a></span> | <span class="t">Now, one of the most critical aspects is the communication protocol.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=99" target="_blank">00:01:39.000</a></span> | <span class="t">So for our talk, we'll use CAN.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=101" target="_blank">00:01:41.000</a></span> | <span class="t">CAN is great.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=102" target="_blank">00:01:42.000</a></span> | <span class="t">CAN is open source.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=103" target="_blank">00:01:43.000</a></span> | <span class="t">Everyone can use CAN.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=104" target="_blank">00:01:44.000</a></span> | <span class="t">It's cheap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=105" target="_blank">00:01:45.000</a></span> | <span class="t">It's affordable.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=106" target="_blank">00:01:46.000</a></span> | <span class="t">And it has enough data rate and enough compatibility for a lot of components out there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=111" target="_blank">00:01:51.000</a></span> | <span class="t">So we'll stick to CAN and we'll see how that influences a lot of the design decisions down the line.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=117" target="_blank">00:01:57.000</a></span> | <span class="t">All right.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=118" target="_blank">00:01:58.000</a></span> | <span class="t">So let's also start simple with the code.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=120" target="_blank">00:02:00.000</a></span> | <span class="t">We'll start with receiving the data, giving that to the policy, and basically sending it back out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=126" target="_blank">00:02:06.000</a></span> | <span class="t">Nothing happening.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=127" target="_blank">00:02:07.000</a></span> | <span class="t">Nothing fancy, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=128" target="_blank">00:02:08.000</a></span> | <span class="t">And let's assume that we have approximately two milliseconds for our policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=133" target="_blank">00:02:13.000</a></span> | <span class="t">And this is what we should expect to see, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=136" target="_blank">00:02:16.000</a></span> | <span class="t">Our loop's running every two milliseconds.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=138" target="_blank">00:02:18.000</a></span> | <span class="t">We are able to see our policy output.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=139" target="_blank">00:02:19.000</a></span> | <span class="t">We read data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=140" target="_blank">00:02:20.000</a></span> | <span class="t">We send it out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=141" target="_blank">00:02:21.000</a></span> | <span class="t">Standard.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=142" target="_blank">00:02:22.000</a></span> | <span class="t">But as soon as we deploy it on the robot, this is what happens.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=146" target="_blank">00:02:26.000</a></span> | <span class="t">There's a gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=148" target="_blank">00:02:28.000</a></span> | <span class="t">Every two milliseconds, there's a gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=150" target="_blank">00:02:30.000</a></span> | <span class="t">Wait.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=151" target="_blank">00:02:31.000</a></span> | <span class="t">What's going on?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=152" target="_blank">00:02:32.000</a></span> | <span class="t">Well, let's look at the loop again.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=153" target="_blank">00:02:33.000</a></span> | <span class="t">So at the edge of the loop, we have question marks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=156" target="_blank">00:02:36.000</a></span> | <span class="t">We see that we're transmitting and receiving CAN data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=159" target="_blank">00:02:39.000</a></span> | <span class="t">So let's look at the CAN bus.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=160" target="_blank">00:02:40.000</a></span> | <span class="t">Maybe we'll find some hints there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=162" target="_blank">00:02:42.000</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=163" target="_blank">00:02:43.000</a></span> | <span class="t">So let's say we have 100 bits per message.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=166" target="_blank">00:02:46.000</a></span> | <span class="t">And we have about 10 messages, five to be sent out, five to be received.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=169" target="_blank">00:02:49.000</a></span> | <span class="t">That gives us a total of 1,000 bits.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=172" target="_blank">00:02:52.000</a></span> | <span class="t">And for a CAN bus that's operating at one megabit per second, that's about 0.1 milliseconds per</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=177" target="_blank">00:02:57.000</a></span> | <span class="t">message or one milliseconds per 10 message.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=180" target="_blank">00:03:00.000</a></span> | <span class="t">You can see how even a small number of messages are saturating the CAN bus to the point that the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=185" target="_blank">00:03:05.000</a></span> | <span class="t">loop time, how much our system takes to run, is on the same order as the transmission</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=190" target="_blank">00:03:10.000</a></span> | <span class="t">time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=191" target="_blank">00:03:11.000</a></span> | <span class="t">And this explains the one millisecond gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=193" target="_blank">00:03:13.000</a></span> | <span class="t">So great.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=194" target="_blank">00:03:14.000</a></span> | <span class="t">But then what to do about it?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=195" target="_blank">00:03:15.000</a></span> | <span class="t">It's like, it's almost unavoidable, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=197" target="_blank">00:03:17.000</a></span> | <span class="t">Like we cannot go around this one millisecond gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=200" target="_blank">00:03:20.000</a></span> | <span class="t">Well, that's solution number one.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=202" target="_blank">00:03:22.000</a></span> | <span class="t">You just accept the delay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=203" target="_blank">00:03:23.000</a></span> | <span class="t">Hopefully it's three milliseconds and that's not too bad.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=206" target="_blank">00:03:26.000</a></span> | <span class="t">But again, a system would not be high performance if we let that stop us.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=210" target="_blank">00:03:30.000</a></span> | <span class="t">So we'll multithread and we'll pipeline.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=213" target="_blank">00:03:33.000</a></span> | <span class="t">We'll try to figure out how we can work around that one millisecond and see how we can sort</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=217" target="_blank">00:03:37.000</a></span> | <span class="t">of organize our tasks differently to still get that two millisecond loop time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=222" target="_blank">00:03:42.000</a></span> | <span class="t">So here we'll take a moment to pause and see that, you know, the loop, it has multiple components</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=226" target="_blank">00:03:46.000</a></span> | <span class="t">broken down into three now.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=227" target="_blank">00:03:47.000</a></span> | <span class="t">TX, RX, and the policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=229" target="_blank">00:03:49.000</a></span> | <span class="t">And we'll be running the communication in a different thread and the policy in a different thread.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=234" target="_blank">00:03:54.000</a></span> | <span class="t">And now we'll see how we'll take the simple building block and stagger it so that we can actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=238" target="_blank">00:03:58.000</a></span> | <span class="t">achieve faster loop times.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=240" target="_blank">00:04:00.000</a></span> | <span class="t">And this is it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=241" target="_blank">00:04:01.000</a></span> | <span class="t">So what we do, we seek the policy the first time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=244" target="_blank">00:04:04.000</a></span> | <span class="t">We get some data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=245" target="_blank">00:04:05.000</a></span> | <span class="t">We feed it to the policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=247" target="_blank">00:04:07.000</a></span> | <span class="t">But before we conclude the policy, we start receiving the next set of data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=251" target="_blank">00:04:11.000</a></span> | <span class="t">And that's for the next iteration.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=253" target="_blank">00:04:13.000</a></span> | <span class="t">When the next iteration starts, we transmit the data from the last policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=257" target="_blank">00:04:17.000</a></span> | <span class="t">And we continue resuming the next iteration of this policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=261" target="_blank">00:04:21.000</a></span> | <span class="t">Essentially, we have parallelized our RX and TX.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=264" target="_blank">00:04:24.000</a></span> | <span class="t">But we're still receiving data for the same policy at the same cadence.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=268" target="_blank">00:04:28.000</a></span> | <span class="t">This is great.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=269" target="_blank">00:04:29.000</a></span> | <span class="t">We might have solved our problems.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=271" target="_blank">00:04:31.000</a></span> | <span class="t">Let's move on.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=273" target="_blank">00:04:33.000</a></span> | <span class="t">So we deployed the system on the robot.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=276" target="_blank">00:04:36.000</a></span> | <span class="t">And now we see new problems.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=278" target="_blank">00:04:38.000</a></span> | <span class="t">Our system is stuttering.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=279" target="_blank">00:04:39.000</a></span> | <span class="t">Our actuators are making sounds like catching up or like we're seeing weird motions on the actuator.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=285" target="_blank">00:04:45.000</a></span> | <span class="t">This has to be policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=286" target="_blank">00:04:46.000</a></span> | <span class="t">There's no way this can be software.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=288" target="_blank">00:04:48.000</a></span> | <span class="t">Well, let's investigate more.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=290" target="_blank">00:04:50.000</a></span> | <span class="t">Let's get some more data from the CAN bus.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=292" target="_blank">00:04:52.000</a></span> | <span class="t">So, again, like here we have our CAN bus again.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=296" target="_blank">00:04:56.000</a></span> | <span class="t">And we see our CPU, GPU, all our accelerators.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=299" target="_blank">00:04:59.000</a></span> | <span class="t">And what we'll try to do is get an external transceiver.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=302" target="_blank">00:05:02.000</a></span> | <span class="t">These are, again, very cheap, very open source products that you can get anywhere.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=305" target="_blank">00:05:05.000</a></span> | <span class="t">And we connect it to the CAN bus and we get data off the CAN bus.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=309" target="_blank">00:05:09.000</a></span> | <span class="t">We take this data, we feed it to another host computer, let's say a laptop.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=313" target="_blank">00:05:13.000</a></span> | <span class="t">And on there we can run utilities like CAN dump, which will actually give you a timestamp data of what message was seen at what time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=320" target="_blank">00:05:20.000</a></span> | <span class="t">So once we get this raw data off the bus, we can start plotting it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=324" target="_blank">00:05:24.000</a></span> | <span class="t">And this is what we should expect.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=326" target="_blank">00:05:26.000</a></span> | <span class="t">That every two milliseconds, we have a message on the bus that is being sent out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=331" target="_blank">00:05:31.000</a></span> | <span class="t">It should be very nicely spaced and it should reach the actuators in time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=335" target="_blank">00:05:35.000</a></span> | <span class="t">And if we see this on the bus, we're really happy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=338" target="_blank">00:05:38.000</a></span> | <span class="t">Now, what happens a lot of the times in systems is you will not see this, you will see something like this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=344" target="_blank">00:05:44.000</a></span> | <span class="t">Here we'll see, like, between message number three and four, there's almost no gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=349" target="_blank">00:05:49.000</a></span> | <span class="t">What happened there?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=350" target="_blank">00:05:50.000</a></span> | <span class="t">And between two and three, there's four milliseconds of gap.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=353" target="_blank">00:05:53.000</a></span> | <span class="t">It's almost like message number three was just late and four was on time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=358" target="_blank">00:05:58.000</a></span> | <span class="t">And because of that, we had this weird jitter where the actuator would try to catch up or try to follow two commands at the same time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=367" target="_blank">00:06:07.000</a></span> | <span class="t">Okay, same thing happened with seven and eight.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=370" target="_blank">00:06:10.000</a></span> | <span class="t">So let's take a deeper look, but first let's try to plot this differently.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=374" target="_blank">00:06:14.000</a></span> | <span class="t">So there's this plot called the cycle time plot.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=377" target="_blank">00:06:17.000</a></span> | <span class="t">And what we plot here is the time since last message.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=381" target="_blank">00:06:21.000</a></span> | <span class="t">Time since last message is just a way to say, like, hey, last message came in at two milliseconds interval.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=387" target="_blank">00:06:27.000</a></span> | <span class="t">This one should also come at two milliseconds.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=388" target="_blank">00:06:28.000</a></span> | <span class="t">So we should see a straight line around the two millisecond mark.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=392" target="_blank">00:06:32.000</a></span> | <span class="t">But here we see some messages jump at four milliseconds and the one after that comes to zero.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=397" target="_blank">00:06:37.000</a></span> | <span class="t">This is expected because if a message is delayed, the cycle time for that would be late.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=402" target="_blank">00:06:42.000</a></span> | <span class="t">But then for the next one, it would be much closer to zero because that one was not late.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=407" target="_blank">00:06:47.000</a></span> | <span class="t">And the difference between the last message and the current one is basically nothing.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=411" target="_blank">00:06:51.000</a></span> | <span class="t">Okay, so now we've characterized the system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=413" target="_blank">00:06:53.000</a></span> | <span class="t">We know what's going on and we can start solving it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=417" target="_blank">00:06:57.000</a></span> | <span class="t">But this is what's going on with the TX side.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=420" target="_blank">00:07:00.000</a></span> | <span class="t">So let's see.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=421" target="_blank">00:07:01.000</a></span> | <span class="t">So we missed sending the data and queued it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=423" target="_blank">00:07:03.000</a></span> | <span class="t">Why would that happen?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=425" target="_blank">00:07:05.000</a></span> | <span class="t">Well, policies are not very real time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=428" target="_blank">00:07:08.000</a></span> | <span class="t">At times they can take longer.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=429" target="_blank">00:07:09.000</a></span> | <span class="t">At times they can take shorter.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=430" target="_blank">00:07:10.000</a></span> | <span class="t">And what happens if a policy takes longer?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=432" target="_blank">00:07:12.000</a></span> | <span class="t">Well, you miss the time when you were supposed to send it out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=436" target="_blank">00:07:16.000</a></span> | <span class="t">So all you can do is just queue it somewhere.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=438" target="_blank">00:07:18.000</a></span> | <span class="t">You can store it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=439" target="_blank">00:07:19.000</a></span> | <span class="t">But that cannot be sent out anymore.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=441" target="_blank">00:07:21.000</a></span> | <span class="t">And when the next iteration comes around, that's when you send both the last message and the current message.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=447" target="_blank">00:07:27.000</a></span> | <span class="t">So you'll see two messages just go on the bus at the same time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=450" target="_blank">00:07:30.000</a></span> | <span class="t">And this can also happen if our TX and RX threads start desynchronizing.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=454" target="_blank">00:07:34.000</a></span> | <span class="t">But this is one of the issues that is very commonly seen with like a multi-threaded system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=458" target="_blank">00:07:38.000</a></span> | <span class="t">And it's very important to have synchronization in the systems.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=461" target="_blank">00:07:41.000</a></span> | <span class="t">But let's say we do synchronize it and we are able to fix our TX side.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=467" target="_blank">00:07:47.000</a></span> | <span class="t">Well, we see some improvement.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=469" target="_blank">00:07:49.000</a></span> | <span class="t">We don't see that like everything is solved.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=471" target="_blank">00:07:51.000</a></span> | <span class="t">We see some improvement.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=473" target="_blank">00:07:53.000</a></span> | <span class="t">Okay, but now this has to be policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=475" target="_blank">00:07:55.000</a></span> | <span class="t">Our graphs are looking fine.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=476" target="_blank">00:07:56.000</a></span> | <span class="t">Everything is on the bus is fine.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=477" target="_blank">00:07:57.000</a></span> | <span class="t">This has to be policy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=478" target="_blank">00:07:58.000</a></span> | <span class="t">There's no other systems.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=480" target="_blank">00:08:00.000</a></span> | <span class="t">Well, there's one last issue that we have to check.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=484" target="_blank">00:08:04.000</a></span> | <span class="t">And that is what happens if we desynchronize in the RX side?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=488" target="_blank">00:08:08.000</a></span> | <span class="t">What happens if our thread is delayed?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=490" target="_blank">00:08:10.000</a></span> | <span class="t">Well, now our policy will not get the new data and it will work with the last data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=494" target="_blank">00:08:14.000</a></span> | <span class="t">And because of that, the output will also be based on the last data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=498" target="_blank">00:08:18.000</a></span> | <span class="t">And so in policy number two or iteration number two, we'll actually have an old command still.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=503" target="_blank">00:08:23.000</a></span> | <span class="t">Like which is relatively older.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=505" target="_blank">00:08:25.000</a></span> | <span class="t">And in policy number three, we'll directly jump.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=507" target="_blank">00:08:27.000</a></span> | <span class="t">We'll skip one of the data processing.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=509" target="_blank">00:08:29.000</a></span> | <span class="t">And because of that, we'll see a sort of skip of catching up behavior on the motors,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=514" target="_blank">00:08:34.000</a></span> | <span class="t">which will sound like almost like a jitter.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=516" target="_blank">00:08:36.000</a></span> | <span class="t">Okay, so how do we resolve these two things?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=519" target="_blank">00:08:39.000</a></span> | <span class="t">Well, there are synchronization primitives.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=521" target="_blank">00:08:41.000</a></span> | <span class="t">You can make conditional variables, semaphores.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=524" target="_blank">00:08:44.000</a></span> | <span class="t">These are like very low-level system things that are widely used in robotics</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=527" target="_blank">00:08:47.000</a></span> | <span class="t">and should be used as well for this toy system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=530" target="_blank">00:08:50.000</a></span> | <span class="t">But again, if these are not available, which is sometimes the case,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=533" target="_blank">00:08:53.000</a></span> | <span class="t">like we're not working with Linux-based system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=535" target="_blank">00:08:55.000</a></span> | <span class="t">We'll work with like a real-time OS or like a microcontroller,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=538" target="_blank">00:08:58.000</a></span> | <span class="t">where we may not have all these semaphores.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=540" target="_blank">00:09:00.000</a></span> | <span class="t">We can just add padding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=542" target="_blank">00:09:02.000</a></span> | <span class="t">Just have some cushion, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=544" target="_blank">00:09:04.000</a></span> | <span class="t">Like have some cushion so that if some desynchronization happens,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=546" target="_blank">00:09:06.000</a></span> | <span class="t">you still have the same Rx going into the right policy and coming out the other way in a timely manner.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=553" target="_blank">00:09:13.000</a></span> | <span class="t">We don't miss messages.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=555" target="_blank">00:09:15.000</a></span> | <span class="t">Okay, perfect.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=556" target="_blank">00:09:16.000</a></span> | <span class="t">So this makes our system fairly robust, fairly high-performant.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=560" target="_blank">00:09:20.000</a></span> | <span class="t">But there are a few other related problems which will happen with a system like this,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=563" target="_blank">00:09:23.000</a></span> | <span class="t">which we should also talk about.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=565" target="_blank">00:09:25.000</a></span> | <span class="t">So let's talk about logging.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=567" target="_blank">00:09:27.000</a></span> | <span class="t">Logging is benign, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=568" target="_blank">00:09:28.000</a></span> | <span class="t">We just log that, hey, that message is coming in.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=572" target="_blank">00:09:32.000</a></span> | <span class="t">We want to just log that this is the data that we got, this is the output.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=575" target="_blank">00:09:35.000</a></span> | <span class="t">It's fine, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=576" target="_blank">00:09:36.000</a></span> | <span class="t">But if we log too much, at some point we have to send those logs to a disk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=580" target="_blank">00:09:40.000</a></span> | <span class="t">And that is very costly.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=582" target="_blank">00:09:42.000</a></span> | <span class="t">Imagine what happens if your main control loop starts logging</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=585" target="_blank">00:09:45.000</a></span> | <span class="t">and decides just one day that, hey, I'm done, I'll just start putting this on the hard disk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=590" target="_blank">00:09:50.000</a></span> | <span class="t">Well, your robot would stay frozen for 30 milliseconds, as we saw on the Raspberry Pi with an SD card.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=595" target="_blank">00:09:55.000</a></span> | <span class="t">So that's bad.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=596" target="_blank">00:09:56.000</a></span> | <span class="t">How do we fix that?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=598" target="_blank">00:09:58.000</a></span> | <span class="t">Well, we just throw more CPU at it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=600" target="_blank">00:10:00.000</a></span> | <span class="t">We just add another CPU, and now all our logging is handled by that third CPU.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=604" target="_blank">00:10:04.000</a></span> | <span class="t">Cool.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=605" target="_blank">00:10:05.000</a></span> | <span class="t">Okay, so now we have, like, we're seeing how multithreaded is slowly getting baked into the system,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=609" target="_blank">00:10:09.000</a></span> | <span class="t">how the robot is operating in a real-time deadline guarantee,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=612" target="_blank">00:10:12.000</a></span> | <span class="t">and how we are able to, like, avoid the pitfalls.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=615" target="_blank">00:10:15.000</a></span> | <span class="t">Perfect.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=616" target="_blank">00:10:16.000</a></span> | <span class="t">Let's talk about something a little more low-level again, like microcontrollers.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=620" target="_blank">00:10:20.000</a></span> | <span class="t">Microcontrollers are fairly simple, and their logging doesn't actually go through a whole disk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=625" target="_blank">00:10:25.000</a></span> | <span class="t">and file system way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=626" target="_blank">00:10:26.000</a></span> | <span class="t">They just log to some other peripheral.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=629" target="_blank">00:10:29.000</a></span> | <span class="t">That takes time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=630" target="_blank">00:10:30.000</a></span> | <span class="t">In fact, for UART, it can be on the order of milliseconds, depending on how much we are logging.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=634" target="_blank">00:10:34.000</a></span> | <span class="t">So here's an interesting problem.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=636" target="_blank">00:10:36.000</a></span> | <span class="t">Let's say we drop a packet, and we log that, hey, we dropped the packet.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=640" target="_blank">00:10:40.000</a></span> | <span class="t">Well, that log itself would take enough time that we'll drop the next packet.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=645" target="_blank">00:10:45.000</a></span> | <span class="t">And then, because you drop the next packet, you log again.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=648" target="_blank">00:10:48.000</a></span> | <span class="t">So basically, just keep logging, and you see a complete blackout on the canvas.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=653" target="_blank">00:10:53.000</a></span> | <span class="t">And it's very hard to debug, like, why am I getting logs and seeing packet drops but no data?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=658" target="_blank">00:10:58.000</a></span> | <span class="t">These are mysterious things that, in my experience, like, it's really good to, like, know about the pitfalls beforehand</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=663" target="_blank">00:11:03.000</a></span> | <span class="t">before we dive in the system and really figure out that, hey, this can also be a problem, just a log statement.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=669" target="_blank">00:11:09.000</a></span> | <span class="t">Finally, there's also priority inversion.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=672" target="_blank">00:11:12.000</a></span> | <span class="t">So in the kernel, in the Linux kernel, there are ways in which data is received by the user process.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=677" target="_blank">00:11:17.000</a></span> | <span class="t">It's not direct.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=678" target="_blank">00:11:18.000</a></span> | <span class="t">Like, it takes a while between the interrupt, the kernel process handling, and then it goes to the user process.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=683" target="_blank">00:11:23.000</a></span> | <span class="t">In robotics, we tend to just boost the priority of all our processes so high that we start just blocking the kernel almost.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=690" target="_blank">00:11:30.000</a></span> | <span class="t">Like, if the kernel doesn't run, we won't get the data, but we're trying to get the data, and we're blocking the very thing that will give us the data.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=697" target="_blank">00:11:37.000</a></span> | <span class="t">Well, this is inversion in action, and it will see your system again drop out for, like, seconds almost at a time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=703" target="_blank">00:11:43.000</a></span> | <span class="t">So again, this is something we fix by just making sure we know the parts of the pipeline.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=708" target="_blank">00:11:48.000</a></span> | <span class="t">We fix the right priorities and we make sure that our whole system as a whole, like, it works together well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=713" target="_blank">00:11:53.000</a></span> | <span class="t">So this is how, like, software and robotics have to work together.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=716" target="_blank">00:11:56.000</a></span> | <span class="t">We have to talk about hardware, the various profiling, the various priority stuff, and actually just take a recap from the top.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=724" target="_blank">00:12:04.000</a></span> | <span class="t">So we went over a pipeline, we saw how to reduce cycle time, beat how the communication delays.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=730" target="_blank">00:12:10.000</a></span> | <span class="t">We saw how synchronization can actually cause some unexpected jitter, which are hard to diagnose.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=735" target="_blank">00:12:15.000</a></span> | <span class="t">Could be the policy, could be the system.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=737" target="_blank">00:12:17.000</a></span> | <span class="t">So we want to make sure that that doesn't happen.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=739" target="_blank">00:12:19.000</a></span> | <span class="t">Logging strategies so that we don't block the system while we're trying to tell the user that, hey, this is happening.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=744" target="_blank">00:12:24.000</a></span> | <span class="t">And finally, priority inversion to avoid starvation.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=747" target="_blank">00:12:27.000</a></span> | <span class="t">And that's how we start designing high-performance robotic systems, at least on a very basic level.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=751" target="_blank">00:12:31.000</a></span> | <span class="t">And that's my talk for today.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=753" target="_blank">00:12:33.000</a></span> | <span class="t">And thank you so much for being here and listening.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=755" target="_blank">00:12:35.000</a></span> | <span class="t">Thank you.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=756" target="_blank">00:12:36.000</a></span> | <span class="t">Thank you.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=756" target="_blank">00:12:36.000</a></span> | <span class="t">Thank you.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=756" target="_blank">00:12:36.000</a></span> | <span class="t">Thank you.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=757" target="_blank">00:12:37.000</a></span> | <span class="t">Thank you.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=bCGbuyv8PMk&t=758" target="_blank">00:12:38.000</a></span> | <span class="t">We'll see you next time.</span></div></div></body></html>
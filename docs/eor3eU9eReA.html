<html><head><title>LangChain Streaming and API Integration</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>LangChain Streaming and API Integration</h2><a href="https://www.youtube.com/watch?v=eor3eU9eReA"><img src="https://i.ytimg.com/vi/eor3eU9eReA/maxresdefault.jpg" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=0">0:0</a> LangChain Streaming<br><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=54">0:54</a> Streaming for AI<br><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=368">6:8</a> Basic LangChain Streaming<br><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=616">10:16</a> Streaming with Agents<br><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1693">28:13</a> Custom Agent and Streaming<br><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1873">31:13</a> Streaming to an API<br><br><div style="text-align: left;"><a href="./eor3eU9eReA.html">Whisper Transcript</a> | <a href="./transcript_eor3eU9eReA.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">In this chapter we're going to cover streaming and async in Langchain. Now both using async code</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=6" target="_blank">00:00:06.800</a></span> | <span class="t">and using streaming are incredibly important components of I think almost any conversational</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=15" target="_blank">00:00:15.700</a></span> | <span class="t">chat interface or at least any good conversational chat interface. For async if your application is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=24" target="_blank">00:00:24.660</a></span> | <span class="t">not async and you're spending a load of time in your API whatever else waiting for LLM calls</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=31" target="_blank">00:00:31.800</a></span> | <span class="t">because a lot of those are behind APIs you are waiting and your application is doing nothing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=37" target="_blank">00:00:37.740</a></span> | <span class="t">because you've written synchronous code and that well there are many problems with that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=43" target="_blank">00:00:43.220</a></span> | <span class="t">mainly it doesn't scale so async code generally performs much better and especially for AI where</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=51" target="_blank">00:00:51.500</a></span> | <span class="t">a lot of the time we're kind of waiting for API calls. So async is incredibly important</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=56" target="_blank">00:00:56.000</a></span> | <span class="t">for that. For streaming now streaming is a slightly different thing so let's say I want to tell</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=64" target="_blank">00:01:04.140</a></span> | <span class="t">me a story okay I'm using gbt4 here it's a bit slower so we can actually stream we can see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=70" target="_blank">00:01:10.960</a></span> | <span class="t">that token by token this text is being produced and sent to us. Now this is not just a visual</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=76" target="_blank">00:01:16.820</a></span> | <span class="t">thing this is the LLM when it is generating tokens or words it is generating them one by one and that's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=87" target="_blank">00:01:27.260</a></span> | <span class="t">because these LLMs literally generate tokens one by one so they're looking at all of the previous</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=93" target="_blank">00:01:33.060</a></span> | <span class="t">tokens in order to generate the next one and then generate next one generate next one that's how they</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=97" target="_blank">00:01:37.500</a></span> | <span class="t">work. So when we are implementing streaming we're getting that feed of tokens directly from the LLM</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=106" target="_blank">00:01:46.260</a></span> | <span class="t">through to our you know our back end or our front end that is what we see when when we see that token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=111" target="_blank">00:01:51.700</a></span> | <span class="t">by token interface. All right so that's one thing but what one other thing that I can do that let me switch</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=118" target="_blank">00:01:58.960</a></span> | <span class="t">across to 4.0 is I can say okay we just got this story I'm going to ask are there any</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=128" target="_blank">00:02:08.860</a></span> | <span class="t">standard storytelling techniques to follow use above please use search</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=139" target="_blank">00:02:19.820</a></span> | <span class="t">okay so look we get this very briefly there we saw that it was searching the web and the way it's not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=152" target="_blank">00:02:32.200</a></span> | <span class="t">because we told it okay we told the LLM to use the search tool but then the LLM output some tokens to say</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=160" target="_blank">00:02:40.780</a></span> | <span class="t">use the search tool that is going to use a search tool and it also would have output the token saying</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=167" target="_blank">00:02:47.360</a></span> | <span class="t">what that search query would have been although we didn't see it there</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=170" target="_blank">00:02:50.320</a></span> | <span class="t">but what the chat gpt interface is doing there so it received those tokens saying hey I'm going to use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=178" target="_blank">00:02:58.820</a></span> | <span class="t">a search tool it doesn't just send us those tokens like it does with the standard tokens here instead</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=183" target="_blank">00:03:03.740</a></span> | <span class="t">it used those tokens to show us that searching the web little text box so streaming is not just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=192" target="_blank">00:03:12.960</a></span> | <span class="t">the streaming of these direct tokens it's also the streaming of these intermediate steps that the LLM may</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=202" target="_blank">00:03:22.320</a></span> | <span class="t">be thinking through which is particularly important when it comes to agents and agentic interfaces so it's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=210" target="_blank">00:03:30.420</a></span> | <span class="t">also a feature thing right streaming doesn't just look nice it's also a feature then finally of course</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=217" target="_blank">00:03:37.240</a></span> | <span class="t">when we're looking at this okay let's say we go back to gpt4 and i say okay use all of this information</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=229" target="_blank">00:03:49.960</a></span> | <span class="t">to generate a long story for me right and okay we are getting the first token now so we know something is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=243" target="_blank">00:04:03.420</a></span> | <span class="t">happening we need to start reading now imagine if we were not streaming anything here and we're just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=249" target="_blank">00:04:09.160</a></span> | <span class="t">waiting right we're still waiting now we're still waiting and we wouldn't see anything we're just like</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=254" target="_blank">00:04:14.760</a></span> | <span class="t">oh it's just blank or maybe there's a little loading spinner so we'd still be waiting</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=258" target="_blank">00:04:18.940</a></span> | <span class="t">and even now we're still waiting right this is an extreme example but can you imagine just waiting</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=272" target="_blank">00:04:32.040</a></span> | <span class="t">for so long and not seeing anything as a user right now just now we would have got our answer if we were</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=278" target="_blank">00:04:38.980</a></span> | <span class="t">not streaming i mean that that would be painful as a user you you'd not want to wait especially in a chat</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=285" target="_blank">00:04:45.800</a></span> | <span class="t">interface you don't want to wait that long it's okay with okay for example deep research takes a long</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=292" target="_blank">00:04:52.460</a></span> | <span class="t">time to process but you know it's going to take a long time to process and it's a different use case</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=297" target="_blank">00:04:57.340</a></span> | <span class="t">right you're getting a report this is a chat interface and yes most messages are not going to take that long</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=305" target="_blank">00:05:05.480</a></span> | <span class="t">to generate also probably not going to be using gpt4 depending on i don't know maybe some people still do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=312" target="_blank">00:05:12.340</a></span> | <span class="t">but in some scenarios it's painful to need to wait that long okay and it's also the same for agents</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=319" target="_blank">00:05:19.940</a></span> | <span class="t">it's nice when you're using agents to get an update on okay we're using this tool it's using this tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=325" target="_blank">00:05:25.180</a></span> | <span class="t">this is how it's using them perplexity for example have a very nice example of this so okay what's this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=333" target="_blank">00:05:33.000</a></span> | <span class="t">opening eye co-founder joins marati's startup let's see right so we see this is really nice it's we're using</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=338" target="_blank">00:05:38.840</a></span> | <span class="t">pro search it's searching for news sharing with the results like we're getting all this information</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=344" target="_blank">00:05:44.160</a></span> | <span class="t">as we're waiting which is really cool and it helps us understand what is actually happening</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=350" target="_blank">00:05:50.580</a></span> | <span class="t">right it's not needed in all use cases but it's super nice to have those intermediate steps</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=355" target="_blank">00:05:55.740</a></span> | <span class="t">right so then we're not waiting and i think this bit probably also stream but it was just super fast</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=361" target="_blank">00:06:01.040</a></span> | <span class="t">so i didn't see it but that's pretty cool so streaming is pretty important let's dive into</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=369" target="_blank">00:06:09.380</a></span> | <span class="t">our example okay we'll open that in collab and off we go so starting with the prerequisites same as</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=376" target="_blank">00:06:16.340</a></span> | <span class="t">always langchain optionally langsmith we'll also enter our langchain api key if you'd like to use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=383" target="_blank">00:06:23.200</a></span> | <span class="t">langsmith we'll also enter our openai api key so that is platform.openai.com and then as usual we can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=391" target="_blank">00:06:31.480</a></span> | <span class="t">just invoke our lm right so we have that it's working now let's see how we would stream with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=399" target="_blank">00:06:39.000</a></span> | <span class="t">astream okay so whenever a method so stream is actually a method as well we could use that but</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=406" target="_blank">00:06:46.480</a></span> | <span class="t">it's not async right so whenever we see a method in linechain has a prefixed onto what would be a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=413" target="_blank">00:06:53.020</a></span> | <span class="t">another method that's like the async version of this so we can actually stream using async super easily</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=423" target="_blank">00:07:03.600</a></span> | <span class="t">using just lm astream okay now this is just a sample and to be completely honest you probably will</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=434" target="_blank">00:07:14.180</a></span> | <span class="t">not be able to use this in an actual application but it's just an example and we're going to see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=439" target="_blank">00:07:19.200</a></span> | <span class="t">how we would use this or how we would stream asynchronously in an application further down in this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=445" target="_blank">00:07:25.840</a></span> | <span class="t">notebook so starting with this you can see here that we're getting these tokens right we're just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=452" target="_blank">00:07:32.700</a></span> | <span class="t">appending it to tokens here we don't actually need to do that i don't think we're even using this but</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=456" target="_blank">00:07:36.700</a></span> | <span class="t">maybe we yeah we'll do it here it's fine so we're just appending the tokens as they come back</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=463" target="_blank">00:07:43.240</a></span> | <span class="t">from our lm penning it to this we'll see what that is in a moment and then i'm just printing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=469" target="_blank">00:07:49.500</a></span> | <span class="t">the token content right so the content of the token so in this case that would be l in this case it would</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=476" target="_blank">00:07:56.640</a></span> | <span class="t">be lp it would be sans for so on and so on so you can see for the most parts it tends to be word level</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=484" target="_blank">00:08:04.480</a></span> | <span class="t">but it can also be subword level as you see sent immense is one word of course so you know they get</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=491" target="_blank">00:08:11.620</a></span> | <span class="t">broken up in in various ways</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=493" target="_blank">00:08:13.740</a></span> | <span class="t">then adding this pipe character onto the end here so we can see okay where are our individual tokens</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=501" target="_blank">00:08:21.740</a></span> | <span class="t">then we also have flush so flush uh you can actually turn this off and it's still gonna stream you're still gonna see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=507" target="_blank">00:08:27.740</a></span> | <span class="t">everything but it's going to be a bit more you can see it's kind of a it's like bit by bit when we use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=514" target="_blank">00:08:34.000</a></span> | <span class="t">flush it forces the console to update what is being shown to us immediately all right so we get a much</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=522" target="_blank">00:08:42.340</a></span> | <span class="t">smoother um when we're looking at this it's much smoother versus when flush is not set to true so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=529" target="_blank">00:08:49.940</a></span> | <span class="t">yeah when you're printing that is good to do just so you can see you don't necessarily need to okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=535" target="_blank">00:08:55.220</a></span> | <span class="t">now we added all those tokens to the tokens list so we can have a look at each individual object that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=541" target="_blank">00:09:01.820</a></span> | <span class="t">was returned to us right and this is interesting so you see that we have the ai message chunk right</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=547" target="_blank">00:09:07.660</a></span> | <span class="t">that's an object and then you have the content the first one's actually empty</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=550" target="_blank">00:09:10.920</a></span> | <span class="t">second one has that n for nlp and yeah i mean that's all we really need to know they're very simple</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=558" target="_blank">00:09:18.820</a></span> | <span class="t">objects but they're actually quite useful because uh just look at this right so we can add each one of</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=566" target="_blank">00:09:26.660</a></span> | <span class="t">our ai message chunks right let's see what that does it doesn't create a list it creates this right</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=572" target="_blank">00:09:32.560</a></span> | <span class="t">so we still just have one ai message chunk ah but it's combined the content within those ai message</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=581" target="_blank">00:09:41.080</a></span> | <span class="t">chunks which is kind of cool right so for example like we could remove these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=586" target="_blank">00:09:46.260</a></span> | <span class="t">right and then we just see nlp so that's kind of nice little feature there i do i actually quite like</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=594" target="_blank">00:09:54.620</a></span> | <span class="t">that but uh you do need to just be a little bit careful because obviously you can do that the wrong</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=600" target="_blank">00:10:00.660</a></span> | <span class="t">way and you're going to get like a i don't know what that is some weird token salad so yeah you need to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=608" target="_blank">00:10:08.280</a></span> | <span class="t">just make sure you are going to be merging those in the correct order unless you i don't know unless</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=614" target="_blank">00:10:14.420</a></span> | <span class="t">you're doing something weird okay cool so streaming that that was streaming from a lm let's have a look</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=621" target="_blank">00:10:21.320</a></span> | <span class="t">at streaming with agents so we it gets a bit more complicated to be completely honest but we also</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=630" target="_blank">00:10:30.240</a></span> | <span class="t">need to things are going to get a bit more complicated so that we can implement this in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=635" target="_blank">00:10:35.420</a></span> | <span class="t">for example an api right there is it's kind of like a necessary thing in any case so to just very</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=644" target="_blank">00:10:44.340</a></span> | <span class="t">quickly we're going to construct our agent executor like we did in the agent execution chapter and for</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=651" target="_blank">00:10:51.320</a></span> | <span class="t">that for the agent executor we're going to need tools chat prompt template lm agent and the agent</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=657" target="_blank">00:10:57.360</a></span> | <span class="t">executor itself okay very quickly i'm not going to go through these in detail we just define our tools</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=663" target="_blank">00:11:03.040</a></span> | <span class="t">you know add multiply exponentiate subtract and final answer tool merge those into a single list</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=669" target="_blank">00:11:09.340</a></span> | <span class="t">of tools then we have our prompt template again same as before we just have system message we have chat</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=676" target="_blank">00:11:16.460</a></span> | <span class="t">history we have query and then we have the agent scratch pad for those intermediate steps then we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=684" target="_blank">00:11:24.300</a></span> | <span class="t">define our agent using lcell lcell works quite well with both streaming and async by the way it supports</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=691" target="_blank">00:11:31.740</a></span> | <span class="t">both out of the box which is nice so we define our agent then coming down here we're going to create</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=701" target="_blank">00:11:41.580</a></span> | <span class="t">agent executor this is the same as before all right so there's nothing new in here i don't think so just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=707" target="_blank">00:11:47.900</a></span> | <span class="t">initialize our agent things there then it's yeah we're looping through looping through yeah nothing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=717" target="_blank">00:11:57.500</a></span> | <span class="t">nothing new there so we're just executing we're invoking our agent seeing if there's a tool call uh this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=725" target="_blank">00:12:05.740</a></span> | <span class="t">is slightly we could shift this to before or after it doesn't actually matter that much</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=730" target="_blank">00:12:10.700</a></span> | <span class="t">so we're checking if it's final answer if not we continue we're extra tools and so on okay cool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=738" target="_blank">00:12:18.140</a></span> | <span class="t">so then we can invoke that okay we go what is 10 plus 10</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=745" target="_blank">00:12:25.340</a></span> | <span class="t">there we go right so we have our agent executor it is working now when we are running our agent executor with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=757" target="_blank">00:12:37.580</a></span> | <span class="t">every new query if we're putting this into an api we're probably going to need to provide it with a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=764" target="_blank">00:12:44.940</a></span> | <span class="t">fresh callback handler okay so this is the callback handler is what's going to handle uh taking the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=771" target="_blank">00:12:51.100</a></span> | <span class="t">tokens that are being generated by a lem or agent and giving them to some other piece of code like for</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=777" target="_blank">00:12:57.740</a></span> | <span class="t">example the the streaming response for an api and our core handler is going to put those tokens in a queue in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=787" target="_blank">00:13:07.740</a></span> | <span class="t">our case and then our for example the streaming object is going to pick them up from the queue and put them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=794" target="_blank">00:13:14.220</a></span> | <span class="t">wherever they need to be so to allow us to do that with every new query rather than us needing to initialize</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=803" target="_blank">00:13:23.020</a></span> | <span class="t">everything when we actually initialize our agent we can add a configurable field to our lem okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=810" target="_blank">00:13:30.300</a></span> | <span class="t">so we set the configurable fields here oh also one thing is that we set streaming equal to true that's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=816" target="_blank">00:13:36.620</a></span> | <span class="t">very minor thing but just so you see that there we do do that so we add some configurable fields to our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=823" target="_blank">00:13:43.180</a></span> | <span class="t">lm which means we can basically pass an object in for these on every new invocation so we set our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=831" target="_blank">00:13:51.340</a></span> | <span class="t">configurable field it's going to be called callbacks and we just add a description right there's nothing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=836" target="_blank">00:13:56.780</a></span> | <span class="t">more to it so this will now allow us to provide that field when we're invoking our agent okay now we need</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=847" target="_blank">00:14:07.820</a></span> | <span class="t">to define our callback handler and as i mentioned what is basically going to be happening is this callback</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=854" target="_blank">00:14:14.380</a></span> | <span class="t">handler is going to be passing tokens into our async io queue object and then we're going to be picking</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=862" target="_blank">00:14:22.140</a></span> | <span class="t">them up from the queue elsewhere okay so we can call it a queue callback handler okay and that is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=868" target="_blank">00:14:28.780</a></span> | <span class="t">inheriting from the async callback handler because we want all this to be done asynchronously because</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=873" target="_blank">00:14:33.980</a></span> | <span class="t">we're thinking here about okay how do we implement all this stuff within apis and actual real world code</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=879" target="_blank">00:14:39.820</a></span> | <span class="t">and we we do want to be doing all this in async so let me execute that and i'll just explain a little</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=886" target="_blank">00:14:46.380</a></span> | <span class="t">bit of what we're looking at so we have the initialization right it's nothing nothing specific</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=892" target="_blank">00:14:52.380</a></span> | <span class="t">here we just what we really want to be doing is we want to be setting our queue object assigning that to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=898" target="_blank">00:14:58.540</a></span> | <span class="t">the class attributes and then there's also this final answer scene which we're setting to false so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=905" target="_blank">00:15:05.580</a></span> | <span class="t">what we're going to be using that for is we our lm will be streaming tokens towards whilst it's using its</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=914" target="_blank">00:15:14.140</a></span> | <span class="t">tool calling and we might not want to display those immediately or we might want to display them in a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=919" target="_blank">00:15:19.100</a></span> | <span class="t">different way so by setting this final answer scene to false whilst our lm is outputting those tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=928" target="_blank">00:15:28.540</a></span> | <span class="t">tokens we can handle them in a different way and then as soon as we see that it's done with the tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=934" target="_blank">00:15:34.060</a></span> | <span class="t">calls and it's on to the final answer which is actually another tool call but once we see that it's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=937" target="_blank">00:15:37.980</a></span> | <span class="t">on to the final answer tool call we can set this true and then we can start processing our tokens in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=944" target="_blank">00:15:44.460</a></span> | <span class="t">a you know different way essentially okay so we have that then we have this a iter method this is required</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=952" target="_blank">00:15:52.860</a></span> | <span class="t">for any async generator object so what that is going to be doing is going to iterating through right it's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=960" target="_blank">00:16:00.940</a></span> | <span class="t">a generator it's going to be going iterating through and saying okay if our queue is empty right this is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=966" target="_blank">00:16:06.940</a></span> | <span class="t">the queue that we set up here if it's empty wait a moment right we use the sleep method here and this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=973" target="_blank">00:16:13.900</a></span> | <span class="t">is an async sleep method this is super important we're using we're awaiting for an asynchronous sleep</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=980" target="_blank">00:16:20.940</a></span> | <span class="t">all right so whilst we're whilst we're waiting for that 0.1 seconds our our code can be doing other</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=987" target="_blank">00:16:27.820</a></span> | <span class="t">things right that that is important if we if we use i think the standard is time.sleep that is not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=995" target="_blank">00:16:35.100</a></span> | <span class="t">asynchronous and so it will actually block the thread for that 0.1 seconds so we don't want that to happen</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1001" target="_blank">00:16:41.900</a></span> | <span class="t">generally our queue should probably not be empty that frequently given how quickly tokens are going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1007" target="_blank">00:16:47.900</a></span> | <span class="t">to be added to the queue so the only way that this would potentially be empty is maybe our lm stops maybe</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1016" target="_blank">00:16:56.860</a></span> | <span class="t">there's like a connection interruption for a you know brief second or something and no tokens are added so in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1023" target="_blank">00:17:03.020</a></span> | <span class="t">that case we don't actually do anything we don't keep checking the queue we just wait a moment okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1028" target="_blank">00:17:08.380</a></span> | <span class="t">and then we check again now if it was empty we wait and then we continue on to the next iteration</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1035" target="_blank">00:17:15.500</a></span> | <span class="t">otherwise it probably won't be empty we get whatever is from our inside our queue we get that out pull it out</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1043" target="_blank">00:17:23.580</a></span> | <span class="t">then we say okay if that token is a done token we're going to return so we're going to stop this generator</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1053" target="_blank">00:17:33.020</a></span> | <span class="t">right we're finished otherwise if it's something else we're going to yield that token which means we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1059" target="_blank">00:17:39.180</a></span> | <span class="t">we're returning that token but then we're continuing through that loop again right so that is our generator</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1066" target="_blank">00:17:46.860</a></span> | <span class="t">logic then we have some other methods here these are l these are line chain specific</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1073" target="_blank">00:17:53.340</a></span> | <span class="t">okay we have on lm new token and we have on lm end starting with on lm new token this is basically</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1081" target="_blank">00:18:01.900</a></span> | <span class="t">when an lm returns a token to us line chain is going to run or execute this method okay this is the method</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1089" target="_blank">00:18:09.900</a></span> | <span class="t">that will be called what this is going to do is it's going to go into the keyword arguments and it's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1095" target="_blank">00:18:15.420</a></span> | <span class="t">going to get the chunk object so this is coming from our lm if there is something in that chunk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1101" target="_blank">00:18:21.420</a></span> | <span class="t">it's going to check for a final answer tool call first okay so we get our tool calls and we say</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1109" target="_blank">00:18:29.260</a></span> | <span class="t">if the name within our chunk right probably this will be empty most of the tokens will return</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1115" target="_blank">00:18:35.820</a></span> | <span class="t">right so you remember before when we're looking at the chunks here this is what we're looking at right</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1121" target="_blank">00:18:41.580</a></span> | <span class="t">the content for us is actually always going to be empty and instead we're actually going to get the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1126" target="_blank">00:18:46.140</a></span> | <span class="t">additional keyword args here and inside there we're going to have our tool calling our tool calls as we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1132" target="_blank">00:18:52.300</a></span> | <span class="t">saw in the previous videos right so that's what we're extracting we're extracting that information</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1138" target="_blank">00:18:58.140</a></span> | <span class="t">that's why we're going additional keyword args right and get those tool the tool call information</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1145" target="_blank">00:19:05.100</a></span> | <span class="t">right or it will be none right so if if it is none i don't think it ever would be none to be honest it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1151" target="_blank">00:19:11.340</a></span> | <span class="t">would be strange if it's none i think that means something would be wrong okay so here we're using</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1156" target="_blank">00:19:16.460</a></span> | <span class="t">the walrus operator so the walrus operator what it's doing here is whilst we're checking the if logic here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1164" target="_blank">00:19:24.860</a></span> | <span class="t">whilst we do that it's also assigning whatever is inside this it's assigning over to tool calls</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1171" target="_blank">00:19:31.340</a></span> | <span class="t">and then with the if we're checking where the tool calls is well something or none right because we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1178" target="_blank">00:19:38.380</a></span> | <span class="t">using get here so if if this get operation fails and there is no tool calls this object here will be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1185" target="_blank">00:19:45.660</a></span> | <span class="t">equal to none which gets assigned to tool calls here and then this this if none will return false and this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1193" target="_blank">00:19:53.660</a></span> | <span class="t">logic will not run okay and it will just continue if this is true so if there is something returned here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1200" target="_blank">00:20:00.460</a></span> | <span class="t">we're going to check if that something returned is using the function name or tool name final answer if it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1206" target="_blank">00:20:06.620</a></span> | <span class="t">is we're going to set our finance scene equal to true otherwise we're just going to add our chunk into</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1213" target="_blank">00:20:13.100</a></span> | <span class="t">the queue okay we use put no weight here because we're we're using async otherwise if you were not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1218" target="_blank">00:20:18.860</a></span> | <span class="t">using async i think you might just put weight or maybe even put put like no okay you would you'd use</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1226" target="_blank">00:20:26.220</a></span> | <span class="t">put if it's just synchronous code but i i don't think i've ever implemented this synchronously so it would</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1232" target="_blank">00:20:32.780</a></span> | <span class="t">actually just be put no weight for async okay and then return so we have that then we have on llm end</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1241" target="_blank">00:20:41.900</a></span> | <span class="t">okay so this is when line chain sees that the llm has returned or indicated that it is finished with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1250" target="_blank">00:20:50.620</a></span> | <span class="t">the response line chain will call this so you you have to be aware that this will happen multiple times</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1260" target="_blank">00:21:00.300</a></span> | <span class="t">during agent execution because if you think within our agent executor we're hitting the llm multiple</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1268" target="_blank">00:21:08.460</a></span> | <span class="t">times we have that first step where it's deciding oh i'm going to use the add tool or the multiply tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1274" target="_blank">00:21:14.700</a></span> | <span class="t">and then that response gets back towards we execute that tool and then we pass the output from that tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1281" target="_blank">00:21:21.340</a></span> | <span class="t">and all the the original user query in the chat history we pass that back to our llm again</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1285" target="_blank">00:21:25.980</a></span> | <span class="t">all right so that's another call to our llm that's going to come back it's going to finish</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1289" target="_blank">00:21:29.820</a></span> | <span class="t">all right it's going to give us something else right so there's multiple llm calls happening</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1294" target="_blank">00:21:34.300</a></span> | <span class="t">throughout our agent execution logic so this on llm call will actually get called at the end of every</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1301" target="_blank">00:21:41.340</a></span> | <span class="t">single one of those llm calls now if we get to the end of our llm call and it was just a it was a tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1310" target="_blank">00:21:50.060</a></span> | <span class="t">invocation so we had the you know it called the add tool we don't want to put the done token into our queue</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1319" target="_blank">00:21:59.180</a></span> | <span class="t">because when the done token is added to our queue we're going to stop iterating okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1324" target="_blank">00:22:04.540</a></span> | <span class="t">instead if it was just a tool call we're going to say step end right and we'll actually get this token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1332" target="_blank">00:22:12.140</a></span> | <span class="t">back so this is useful on for example the front end you could have okay i've i've used the add tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1340" target="_blank">00:22:20.220</a></span> | <span class="t">these are the parameters and it's the end of the set so you could have that your tool call is being</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1347" target="_blank">00:22:27.020</a></span> | <span class="t">used on some front end and when as soon as it sees step end it knows okay we're done with that here was</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1351" target="_blank">00:22:31.900</a></span> | <span class="t">the response right and it can just show you that and we're going to use that we'll see that soon but</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1358" target="_blank">00:22:38.300</a></span> | <span class="t">let's say we get to the final answer tool we're on the final answer tool and then we get this signal</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1363" target="_blank">00:22:43.340</a></span> | <span class="t">that the llm has finished then we need to stop iterating otherwise our our stream generator is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1372" target="_blank">00:22:52.060</a></span> | <span class="t">just going to keep going forever right nothing's going to stop it or maybe it will time out i don't</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1376" target="_blank">00:22:56.540</a></span> | <span class="t">think it will though so at that point we need to send okay stop right we need to say we're done and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1384" target="_blank">00:23:04.300</a></span> | <span class="t">and then that will that will come back to here to our iterator and to our async iterator and it will</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1391" target="_blank">00:23:11.660</a></span> | <span class="t">return and stop the generator okay so that's the core logic that we have inside that i know there's a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1399" target="_blank">00:23:19.340</a></span> | <span class="t">lot going on there it's but we need all of this so it's important to be aware of it okay so now let's see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1407" target="_blank">00:23:27.500</a></span> | <span class="t">how we might actually call our agent with all this streaming in this way so we're going to initialize</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1417" target="_blank">00:23:37.100</a></span> | <span class="t">our queue i'm going to use that to initialize a streamer okay using the the custom streamer that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1422" target="_blank">00:23:42.860</a></span> | <span class="t">we just sell custom callback handler whatever you want to call it okay then i'm going to define a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1428" target="_blank">00:23:48.940</a></span> | <span class="t">function so this is an asynchronous function it has to be if we're using async and what it's going to do is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1434" target="_blank">00:23:54.700</a></span> | <span class="t">it's going to call our agent with a config here and we're going to pass it that call the the callback</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1442" target="_blank">00:24:02.860</a></span> | <span class="t">which is the streamer right note here i'm not calling the agent executor i'm just calling the agent</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1447" target="_blank">00:24:07.660</a></span> | <span class="t">right so the uh if we come back up here we're calling this all right so that's not going to include all the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1455" target="_blank">00:24:15.020</a></span> | <span class="t">tool execution logic and importantly we're calling the agent with the config that uses callbacks right</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1463" target="_blank">00:24:23.660</a></span> | <span class="t">so this this configurable fields here from our lm is actually being fed through it propagates through to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1468" target="_blank">00:24:28.460</a></span> | <span class="t">our agent object as well to the runnable serializable all right so that's what we're executing here we see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1475" target="_blank">00:24:35.500</a></span> | <span class="t">agent with config and we're passing in those callbacks which is just one actually okay so that sets up our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1481" target="_blank">00:24:41.980</a></span> | <span class="t">agent and then we invoke it with a stream okay like we did before and we're just going to return everything</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1488" target="_blank">00:24:48.860</a></span> | <span class="t">so let's uh run that okay and we see all the token or the chunk objects are being returned and this is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1497" target="_blank">00:24:57.100</a></span> | <span class="t">useful to understand what we're actually doing up here all right so when we're doing this chunk message</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1504" target="_blank">00:25:04.140</a></span> | <span class="t">additional cake keyword arguments all right we can see that in here so this would be the chunk message</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1509" target="_blank">00:25:09.260</a></span> | <span class="t">object we get the additional keyword logs we go into tool calls and we get the information here so we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1515" target="_blank">00:25:15.820</a></span> | <span class="t">have the id for that tool call which we saw in the previous chapters then we have our function right so the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1523" target="_blank">00:25:23.660</a></span> | <span class="t">function includes the name right so we know what tool we're calling from this first chunk but we don't</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1529" target="_blank">00:25:29.580</a></span> | <span class="t">know the arguments right those arguments are going to stream to us so we can see them begin to come</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1535" target="_blank">00:25:35.100</a></span> | <span class="t">through in the next chunk so next chunk is just it's just the first token for for the add function</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1542" target="_blank">00:25:42.380</a></span> | <span class="t">right and we can see these all come together over multiple steps and we actually get all of our arguments</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1550" target="_blank">00:25:50.060</a></span> | <span class="t">okay that's pretty cool so actually one thing i would like to show you here as well so if we just do token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1558" target="_blank">00:25:58.380</a></span> | <span class="t">equals tokens sorry and we do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1564" target="_blank">00:26:04.700</a></span> | <span class="t">tokens dot append token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1569" target="_blank">00:26:09.660</a></span> | <span class="t">okay we have all of our tokens in here now all right see that they're all ai message chunks</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1579" target="_blank">00:26:19.260</a></span> | <span class="t">so we can actually add those together all right so let's we'll go with these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1584" target="_blank">00:26:24.780</a></span> | <span class="t">here and based on these we're going to get all the arguments okay so this is kind of interesting</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1590" target="_blank">00:26:30.060</a></span> | <span class="t">so it's one until i think like the second to last maybe</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1595" target="_blank">00:26:35.660</a></span> | <span class="t">right so we have these and actually we just want to add those together so i'm going to go with tokens</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1606" target="_blank">00:26:46.620</a></span> | <span class="t">one and i'm just going to go four uh four token in we're going to go from the second onwards i'm going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1620" target="_blank">00:27:00.380</a></span> | <span class="t">to tk plus token right and let's see what tk looks like at the end here tk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1631" target="_blank">00:27:11.020</a></span> | <span class="t">okay so now you see it's kind of merged all those um arguments here sorry plus equal okay so run that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1640" target="_blank">00:27:20.700</a></span> | <span class="t">and you can see here that it's merged those arguments it didn't get all of them so i kind of missed some</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1644" target="_blank">00:27:24.940</a></span> | <span class="t">at the end there but it's merging them right so you can see that that logic where it's you know before it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1650" target="_blank">00:27:30.220</a></span> | <span class="t">was adding the content from various trunks it also does the same for the other parameters within your</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1657" target="_blank">00:27:37.580</a></span> | <span class="t">chunk object which is i i think it's pretty cool you can see here the name wasn't included that's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1663" target="_blank">00:27:43.020</a></span> | <span class="t">because we started on token one or on token zero where the name was so if we actually started from token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1669" target="_blank">00:27:49.740</a></span> | <span class="t">zero and let's just let's just pull them in there all right so from one onwards</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1675" target="_blank">00:27:55.660</a></span> | <span class="t">we're going to get a complete ai message chunk which includes the name here and all of those arguments</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1684" target="_blank">00:28:04.860</a></span> | <span class="t">and you'll you'll see also here right populate everything which is pretty cool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1688" target="_blank">00:28:08.860</a></span> | <span class="t">okay so we have that now based on this we're going to want to modify our custom agent</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1696" target="_blank">00:28:16.700</a></span> | <span class="t">executor because we're streaming everything right so we want to add streaming inside our agent executor</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1704" target="_blank">00:28:24.220</a></span> | <span class="t">which we're doing here right so this is async def stream and we're sharing async for token in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1710" target="_blank">00:28:30.460</a></span> | <span class="t">the a stream okay so this is like the very first instance if output is non we're just going to be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1718" target="_blank">00:28:38.460</a></span> | <span class="t">adding our token so that the chunk sorry to our output like the first token becomes our output</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1726" target="_blank">00:28:46.380</a></span> | <span class="t">otherwise we're just appending our tokens to the output okay if the token content is empty which it should be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1735" target="_blank">00:28:55.980</a></span> | <span class="t">right because we're using tool calls all the time we're just going to print content okay i just added</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1740" target="_blank">00:29:00.940</a></span> | <span class="t">these as so we see like print everything i just want to want to be able to see that i wouldn't expect</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1746" target="_blank">00:29:06.700</a></span> | <span class="t">this to run because we're saying it has to use tool calling okay so within our agent if we come up to here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1754" target="_blank">00:29:14.940</a></span> | <span class="t">we said tool choice any so it's been forced to use tool calling so it should never really be returning</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1760" target="_blank">00:29:20.380</a></span> | <span class="t">anything inside the content field but just in case it's there right so we'll see if that is actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1766" target="_blank">00:29:26.140</a></span> | <span class="t">true then we're just getting out our tool calls information okay from our trunk and we're going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1772" target="_blank">00:29:32.300</a></span> | <span class="t">to say okay if there's something in there we're going to print what is in there okay and then we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1776" target="_blank">00:29:36.060</a></span> | <span class="t">going to extract our tool name if there is some if there is a tool name i'm going to show you the tool name</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1780" target="_blank">00:29:40.860</a></span> | <span class="t">then we're going to get the args and if the args are not empty we're going to see what we get in there okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1789" target="_blank">00:29:49.180</a></span> | <span class="t">and then from all of this we're actually going to we merge all of it into our ai message right because</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1794" target="_blank">00:29:54.780</a></span> | <span class="t">we're merging everything as we're going through merging everything into outputs as i showed you</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1798" target="_blank">00:29:58.700</a></span> | <span class="t">before okay cool and then we're just awaiting our stream that will like kick it off okay and then we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1804" target="_blank">00:30:04.540</a></span> | <span class="t">do the the standard agent executor stuff again here right so we're just pulling out tool name tool logs</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1810" target="_blank">00:30:10.620</a></span> | <span class="t">tool call id and then we're using all that to execute our tool here and then we're creating a new tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1815" target="_blank">00:30:15.980</a></span> | <span class="t">message and passing that back in and then also here i move the break for the final answer into the final</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1823" target="_blank">00:30:23.260</a></span> | <span class="t">step so that is our custom agent executor with streaming and let's see what let's see what it does</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1829" target="_blank">00:30:29.740</a></span> | <span class="t">okay same verbose equal true so we see all those print statements</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1836" target="_blank">00:30:36.460</a></span> | <span class="t">okay so you can kind of see it's a little bit messy but you can see we have tool calls that had some</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1844" target="_blank">00:30:44.060</a></span> | <span class="t">stuff inside it had add here and what we're printing out here is we're printing out the full ai message</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1850" target="_blank">00:30:50.060</a></span> | <span class="t">chunk with tool calls and then i'm just printing out okay what are we actually pulling out from from that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1855" target="_blank">00:30:55.580</a></span> | <span class="t">so these are actually coming from the same thing okay and then same here all right so we're looking at the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1860" target="_blank">00:31:00.780</a></span> | <span class="t">full message and then we're looking okay we're getting this argument out from it okay so we can see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1866" target="_blank">00:31:06.620</a></span> | <span class="t">everything that is being pulled out you know chunk by chunk or token by token and that's it okay so we could</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1874" target="_blank">00:31:14.300</a></span> | <span class="t">just get everything like that however right so i'm printing everything so we can see that it's streaming what if i don't print</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1880" target="_blank">00:31:20.940</a></span> | <span class="t">okay so we're setting verbose or by default verbose is equal to false here so what happens if we invoke now</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1889" target="_blank">00:31:29.660</a></span> | <span class="t">let's see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1891" target="_blank">00:31:31.100</a></span> | <span class="t">okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1895" target="_blank">00:31:35.340</a></span> | <span class="t">cool we got nothing so the reason we got nothing is we're not printing but we don't if you are</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1910" target="_blank">00:31:50.540</a></span> | <span class="t">if you're building an api for example you're pulling your tokens through you can't print them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1917" target="_blank">00:31:57.420</a></span> | <span class="t">to your like a front end or print them as to the output of your api printing goes to your terminal</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1927" target="_blank">00:32:07.740</a></span> | <span class="t">or your console window it doesn't go anywhere else instead what we want to do is we actually want to get</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1935" target="_blank">00:32:15.420</a></span> | <span class="t">those tokens out right but if but how do we do that all right so we we printed them but another place</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1943" target="_blank">00:32:23.180</a></span> | <span class="t">that those tokens are is in our queue all right because we set them up to go to the queue</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1948" target="_blank">00:32:28.460</a></span> | <span class="t">so we can actually pull them out of our queue whilst our agent executor is running and then we can do whatever</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1959" target="_blank">00:32:39.100</a></span> | <span class="t">we want with them because our code is async so it can be doing multiple things at the same time</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1963" target="_blank">00:32:43.180</a></span> | <span class="t">so whilst our code is running the agent executor</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1966" target="_blank">00:32:46.540</a></span> | <span class="t">whilst that is happening our code can also be pulling out from our queue tokens are in there and sending them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1975" target="_blank">00:32:55.180</a></span> | <span class="t">to like an api for example right or whatever downstream logic you have so let's see what that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1982" target="_blank">00:33:02.860</a></span> | <span class="t">looks like we start by just initializing our queue initializing our streamer with that queue then we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1988" target="_blank">00:33:08.620</a></span> | <span class="t">create a task so this is basically saying okay i i want to run this but don't run it right now i'm not ready yet</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=1996" target="_blank">00:33:16.140</a></span> | <span class="t">the reason that i say i'm not ready yet is because i also want to define here my async loop which is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2003" target="_blank">00:33:23.900</a></span> | <span class="t">going to be printing those tokens right but this is async right so we we set this up this is like get ready</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2010" target="_blank">00:33:30.540</a></span> | <span class="t">to run this because it is async this is running right this is just running like it's there it's already</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2017" target="_blank">00:33:37.180</a></span> | <span class="t">running so we get this we continue we continue this none of this is actually executed yet</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2022" target="_blank">00:33:42.780</a></span> | <span class="t">right only here when we await the task that we set up here only then does our agent executor</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2032" target="_blank">00:33:52.220</a></span> | <span class="t">run and our async object here begin getting tokens right and here again i'm printing but i don't need to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2042" target="_blank">00:34:02.140</a></span> | <span class="t">print i could i could have like a let's say where this is within an api or something</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2047" target="_blank">00:34:07.580</a></span> | <span class="t">let's say i'm i'm saying okay send token to xyz token right that's sending up tokens somewhere or if we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2060" target="_blank">00:34:20.540</a></span> | <span class="t">maybe we're yielding this to our some sort of streamer object within our api right we can do whatever we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2066" target="_blank">00:34:26.780</a></span> | <span class="t">want with those tokens okay i'm just printing them because i want to actually see them okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2072" target="_blank">00:34:32.620</a></span> | <span class="t">but just important here is that we're not printing them within our agent executor we're printing them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2078" target="_blank">00:34:38.380</a></span> | <span class="t">outside the agent executor we've got them out and we can put them wherever we want which is perfect</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2084" target="_blank">00:34:44.300</a></span> | <span class="t">when you're building an actual sort of real world use case we're using an api or something else okay so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2089" target="_blank">00:34:49.100</a></span> | <span class="t">let's run that let's see what we get look at that we get all of the information we could need</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2095" target="_blank">00:34:55.900</a></span> | <span class="t">and a little bit more right because now we're using the agent executor and now we can also see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2102" target="_blank">00:35:02.540</a></span> | <span class="t">oh we have this step end right so i know or i know just from looking at this right this is my first</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2109" target="_blank">00:35:09.180</a></span> | <span class="t">tool use so what tool is it let's have a look it's the add tool and then we have these arguments so i can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2116" target="_blank">00:35:16.380</a></span> | <span class="t">then pass them right downstream then we have the next tool use which is here down here so then we can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2124" target="_blank">00:35:24.620</a></span> | <span class="t">then pass them in the way that we like so that's pretty cool let's i mean let's see right so we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2133" target="_blank">00:35:33.500</a></span> | <span class="t">we're getting those fingers out can we can we do something with them before i before i print them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2139" target="_blank">00:35:39.180</a></span> | <span class="t">and show them yes let's see okay so we're now modifying our our loop here same stuff right we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2147" target="_blank">00:35:47.500</a></span> | <span class="t">still initializing our queue initializing our streamer initializing our tasks okay and we're still doing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2153" target="_blank">00:35:53.180</a></span> | <span class="t">this async for token streamer okay but then we're doing stuff with our tokens so i'm saying okay if we're on</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2161" target="_blank">00:36:01.500</a></span> | <span class="t">stream end i'm not actually going to print stream and i'm going to print new line okay otherwise if</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2168" target="_blank">00:36:08.220</a></span> | <span class="t">we're getting a tool call here we're going to say if that tool call is the tool name i am going to print</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2176" target="_blank">00:36:16.300</a></span> | <span class="t">calling tool name okay if it's the arguments i'm going to print the tool argument and i'm going to end</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2183" target="_blank">00:36:23.820</a></span> | <span class="t">that with nothing so that we don't go onto a new line so we're actually going to be streaming everything</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2188" target="_blank">00:36:28.780</a></span> | <span class="t">okay so let's just see what this looks like</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2190" target="_blank">00:36:30.860</a></span> | <span class="t">oh my bad i just added that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2197" target="_blank">00:36:37.500</a></span> | <span class="t">okay</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2199" target="_blank">00:36:39.820</a></span> | <span class="t">you see that so it goes it goes very fast so it's kind of hard to see it i'm going to slow</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2207" target="_blank">00:36:47.020</a></span> | <span class="t">it down so you can see so you can see that we as soon as we get the tool name we stream that we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2213" target="_blank">00:36:53.660</a></span> | <span class="t">calling the add tool then we stream token by token the actual arguments for that tool</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2218" target="_blank">00:36:58.460</a></span> | <span class="t">then for the next one again we do the same we're calling this tool name then we're streaming token</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2224" target="_blank">00:37:04.460</a></span> | <span class="t">by token again we're processing everything downstream from outside of the agent executor and this is an</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2231" target="_blank">00:37:11.580</a></span> | <span class="t">essential thing to be able to do when we're actually implementing streaming and async and everything</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2238" target="_blank">00:37:18.780</a></span> | <span class="t">else in an actual application so i know that's a lot but it's important so that is it for our chapter</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2248" target="_blank">00:37:28.940</a></span> | <span class="t">on streaming and async i hope it's all been useful thanks</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2264" target="_blank">00:37:44.780</a></span> | <span class="t">you</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=eor3eU9eReA&t=2266" target="_blank">00:37:46.840</a></span> | <span class="t">you</span></div></div></body></html>
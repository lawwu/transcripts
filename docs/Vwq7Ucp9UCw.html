<html><head><title>How to Index Q&A Data With Haystack and Elasticsearch</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 80%;
        margin: auto;
        overflow: hidden;
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>How to Index Q&A Data With Haystack and Elasticsearch</h2><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw"><img src="https://i.ytimg.com/vi_webp/Vwq7Ucp9UCw/maxresdefault.webp" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=0">0:0</a> <Untitled Chapter 1><br><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=53">0:53</a> install it on windows using the msi installer<br><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=673">11:13</a> index all of these documents into our elastic search<br><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=749">12:29</a> count the number of entries<br><br><div style="text-align: left;"><a href="./Vwq7Ucp9UCw.html">Whisper Transcript</a> | <a href="./transcript_Vwq7Ucp9UCw.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">Okay so in this video what we're going to do is actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=3" target="_blank">00:00:03.600</a></span> | <span class="t">index our data so at the moment we just have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=7" target="_blank">00:00:07.200</a></span> | <span class="t">all of our paragraphs from Meditations by Marcus Aurelius</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=11" target="_blank">00:00:11.600</a></span> | <span class="t">and to do this we are going to be using the Elasticsearch document store.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=16" target="_blank">00:00:16.960</a></span> | <span class="t">So of course if we're using Elasticsearch we first need to actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=20" target="_blank">00:00:20.560</a></span> | <span class="t">download and install it so I'm just going to take you through</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=23" target="_blank">00:00:23.920</a></span> | <span class="t">those steps now.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=29" target="_blank">00:00:29.280</a></span> | <span class="t">And all we need to do is head on over to this website up here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=35" target="_blank">00:00:35.520</a></span> | <span class="t">and elasticsearch.co and you can see the address just there. Now I'm going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=43" target="_blank">00:00:43.040</a></span> | <span class="t">to follow the instructions for Windows but of course if you're on Linux or Mac</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=47" target="_blank">00:00:47.520</a></span> | <span class="t">just follow through it's very similar either way.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=51" target="_blank">00:00:51.840</a></span> | <span class="t">So here we're going to install it on Windows</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=57" target="_blank">00:00:57.920</a></span> | <span class="t">using the MSI installer. So just scroll down here and we can see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=63" target="_blank">00:01:03.440</a></span> | <span class="t">we can download the package from this link so download</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=67" target="_blank">00:01:07.200</a></span> | <span class="t">that and once you download it just open it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=70" target="_blank">00:01:10.720</a></span> | <span class="t">and we'll see this window pop up. So</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=74" target="_blank">00:01:14.960</a></span> | <span class="t">once you see this window pop up we just go through with all of the default</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=79" target="_blank">00:01:19.440</a></span> | <span class="t">settings. So install as a service and continue</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=83" target="_blank">00:01:23.840</a></span> | <span class="t">through obviously if you do need to change anything change it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=88" target="_blank">00:01:28.320</a></span> | <span class="t">but for me there's nothing here that I want to modify.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=92" target="_blank">00:01:32.000</a></span> | <span class="t">Notice here we have the HTTP port and we're using</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=95" target="_blank">00:01:35.520</a></span> | <span class="t">92.0.0 we'll be using that later. We just continue through here default</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=100" target="_blank">00:01:40.800</a></span> | <span class="t">settings and then we click install and we just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=103" target="_blank">00:01:43.840</a></span> | <span class="t">let that install.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=106" target="_blank">00:01:46.560</a></span> | <span class="t">Okay so now that we've installed Elasticsearch we can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=111" target="_blank">00:01:51.200</a></span> | <span class="t">go ahead and actually check that it's running.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=114" target="_blank">00:01:54.560</a></span> | <span class="t">So to do that we're going to import Python requests</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=120" target="_blank">00:02:00.000</a></span> | <span class="t">and whenever we interact with Elasticsearch it's either going to be</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=124" target="_blank">00:02:04.720</a></span> | <span class="t">through haystack or it will be through the request library and we'll just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=130" target="_blank">00:02:10.000</a></span> | <span class="t">interact with the Elasticsearch API. So to check the health of our cluster</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=139" target="_blank">00:02:19.920</a></span> | <span class="t">so essentially check that it's actually up and running</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=143" target="_blank">00:02:23.360</a></span> | <span class="t">all we need to do is send a get request to localhost and if you remember</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=150" target="_blank">00:02:30.800</a></span> | <span class="t">earlier we had it was port 9.2.0.0 of course if the port</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=155" target="_blank">00:02:35.600</a></span> | <span class="t">on yours was different modify it this is just the default value</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=160" target="_blank">00:02:40.240</a></span> | <span class="t">and after this we need to reach out to the cluster endpoint</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=164" target="_blank">00:02:44.560</a></span> | <span class="t">and we are checking the health and then we'll just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=167" target="_blank">00:02:47.680</a></span> | <span class="t">format that as a JSON. So what you should see here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=171" target="_blank">00:02:51.920</a></span> | <span class="t">is we have our cluster which is Elasticsearch</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=175" target="_blank">00:02:55.520</a></span> | <span class="t">may have a different name if you modified it but by default it's Elasticsearch</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=179" target="_blank">00:02:59.680</a></span> | <span class="t">the status is yellow which basically just means we have one node up and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=185" target="_blank">00:03:05.760</a></span> | <span class="t">running you can have multiple nodes in Elasticsearch</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=188" target="_blank">00:03:08.880</a></span> | <span class="t">and for your cluster health to be green it will expect your</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=196" target="_blank">00:03:16.480</a></span> | <span class="t">shards of indexes to have a backup shards across different nodes and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=201" target="_blank">00:03:21.920</a></span> | <span class="t">obviously we can't do that if we only have one node but it's completely fine</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=205" target="_blank">00:03:25.040</a></span> | <span class="t">for us because we're just in development if you're in production</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=208" target="_blank">00:03:28.080</a></span> | <span class="t">yes you probably want it to have those backup shards</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=212" target="_blank">00:03:32.720</a></span> | <span class="t">if none of that made any sense don't worry about it we really don't need to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=215" target="_blank">00:03:35.840</a></span> | <span class="t">know any of that for what we're doing here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=219" target="_blank">00:03:39.840</a></span> | <span class="t">now what we can also do is we can check if we have any indices</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=226" target="_blank">00:03:46.560</a></span> | <span class="t">already</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=228" target="_blank">00:03:48.960</a></span> | <span class="t">now if I take a look at mine I will already have some indices set up</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=235" target="_blank">00:03:55.600</a></span> | <span class="t">which I've just set up prior to recording this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=240" target="_blank">00:04:00.960</a></span> | <span class="t">and to check that we go to localhost again</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=249" target="_blank">00:04:09.760</a></span> | <span class="t">and this time we want to call the CAT API which is what we would call</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=257" target="_blank">00:04:17.600</a></span> | <span class="t">whenever we want to see data in a table human readable format</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=261" target="_blank">00:04:21.760</a></span> | <span class="t">rather than JSON and what we're checking here are the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=266" target="_blank">00:04:26.400</a></span> | <span class="t">indices</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=268" target="_blank">00:04:28.880</a></span> | <span class="t">and we'll just add text onto there so we can actually see that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=272" target="_blank">00:04:32.800</a></span> | <span class="t">and this is quite messy so if we just print it instead</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=276" target="_blank">00:04:36.800</a></span> | <span class="t">look a bit cleaner okay so you can see I have these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=280" target="_blank">00:04:40.320</a></span> | <span class="t">two indices you shouldn't I don't think have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=284" target="_blank">00:04:44.000</a></span> | <span class="t">either of those no you won't have either of those so don't</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=287" target="_blank">00:04:47.040</a></span> | <span class="t">worry about that now what we are going to do is create a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=292" target="_blank">00:04:52.320</a></span> | <span class="t">new index which will be called Aurelius and that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=296" target="_blank">00:04:56.000</a></span> | <span class="t">is where we will put our documents</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=300" target="_blank">00:05:00.720</a></span> | <span class="t">now to actually implement that we will be going through the Haystack</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=306" target="_blank">00:05:06.480</a></span> | <span class="t">library which you can pip install</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=310" target="_blank">00:05:10.560</a></span> | <span class="t">farm Haystack</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=314" target="_blank">00:05:14.720</a></span> | <span class="t">and what we want to do is from Haystack dot document store</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=322" target="_blank">00:05:22.000</a></span> | <span class="t">elastic search import</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=328" target="_blank">00:05:28.880</a></span> | <span class="t">elastic search document store so this is our document store instance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=335" target="_blank">00:05:35.520</a></span> | <span class="t">and of course this is not aware of our elastic search</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=339" target="_blank">00:05:39.200</a></span> | <span class="t">instance we need to initialize that so we'll store it in a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=346" target="_blank">00:05:46.240</a></span> | <span class="t">variable called docstore</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=349" target="_blank">00:05:49.440</a></span> | <span class="t">and all we write is elastic search document store</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=353" target="_blank">00:05:53.840</a></span> | <span class="t">now we need to initialize it with the parameters so it knows</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=357" target="_blank">00:05:57.200</a></span> | <span class="t">where to connect to our elastic search instance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=360" target="_blank">00:06:00.640</a></span> | <span class="t">so to do that we write host and this is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=367" target="_blank">00:06:07.120</a></span> | <span class="t">local host now if you have a username and password set which you don't by</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=373" target="_blank">00:06:13.360</a></span> | <span class="t">default you will need to enter them in here I don't have any set so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=379" target="_blank">00:06:19.200</a></span> | <span class="t">no worries</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=385" target="_blank">00:06:25.200</a></span> | <span class="t">and then we also need to specify our index and at the moment we don't have an</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=389" target="_blank">00:06:29.040</a></span> | <span class="t">Aurelius index and that's fine because this will initialize it for us</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=393" target="_blank">00:06:33.520</a></span> | <span class="t">so we'll just call it Aurelius</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=397" target="_blank">00:06:37.760</a></span> | <span class="t">now if we go down here we can see what it actually did so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=405" target="_blank">00:06:45.120</a></span> | <span class="t">it sent a put request to here localhost 9200 Aurelius</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=412" target="_blank">00:06:52.960</a></span> | <span class="t">so that's how you create a new index after that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=416" target="_blank">00:06:56.720</a></span> | <span class="t">what we want to do is first import our data so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=422" target="_blank">00:07:02.880</a></span> | <span class="t">we have the data here which I got from this website</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=429" target="_blank">00:07:09.920</a></span> | <span class="t">and process with this script which you can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=433" target="_blank">00:07:13.600</a></span> | <span class="t">find on github I'll keep a link in the description so you can just go and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=439" target="_blank">00:07:19.760</a></span> | <span class="t">copy that if you need to now I haven't really done much</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=443" target="_blank">00:07:23.680</a></span> | <span class="t">pre-processing it's pretty straightforward</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=446" target="_blank">00:07:26.640</a></span> | <span class="t">and all you need to do here is actually open</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=449" target="_blank">00:07:29.760</a></span> | <span class="t">that data so we do that with open and from here that data file is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=457" target="_blank">00:07:37.360</a></span> | <span class="t">located two folders up in a data folder it's called meditations.txt</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=466" target="_blank">00:07:46.560</a></span> | <span class="t">I'm going to be reading that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=469" target="_blank">00:07:49.680</a></span> | <span class="t">and all we do is data equals f dot read</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=477" target="_blank">00:07:57.680</a></span> | <span class="t">and then if we just have a quick look at first 100 characters there we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=485" target="_blank">00:08:05.760</a></span> | <span class="t">see that we have this new line character and that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=489" target="_blank">00:08:09.520</a></span> | <span class="t">signifies a new paragraph from the text so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=495" target="_blank">00:08:15.200</a></span> | <span class="t">what we want to do here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=498" target="_blank">00:08:18.320</a></span> | <span class="t">is split the data by new line</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=504" target="_blank">00:08:24.160</a></span> | <span class="t">and then if we check the length of that see that we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=507" target="_blank">00:08:27.920</a></span> | <span class="t">508 separate paragraphs in there so what we now want to do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=516" target="_blank">00:08:36.160</a></span> | <span class="t">is we want to modify this data so that it's in the correct format</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=521" target="_blank">00:08:41.680</a></span> | <span class="t">for haystack and elasticsearch so that format looks like this so it</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=528" target="_blank">00:08:48.880</a></span> | <span class="t">expects a list of dictionaries where each</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=532" target="_blank">00:08:52.160</a></span> | <span class="t">dictionary looks like this of the text and inside here we would</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=538" target="_blank">00:08:58.800</a></span> | <span class="t">have our paragraph so each one</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=543" target="_blank">00:09:03.440</a></span> | <span class="t">of these items here and then there's another</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=546" target="_blank">00:09:06.800</a></span> | <span class="t">optional field called meta and meta contains a dictionary and in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=553" target="_blank">00:09:13.920</a></span> | <span class="t">here we can put whatever we want so for us I don't think at the moment</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=559" target="_blank">00:09:19.280</a></span> | <span class="t">there's really that much to put into here other than</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=563" target="_blank">00:09:23.920</a></span> | <span class="t">where it came from so the the book or maybe</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=567" target="_blank">00:09:27.680</a></span> | <span class="t">maybe the source is probably a better word to use here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=572" target="_blank">00:09:32.480</a></span> | <span class="t">and all of these are coming from meditations</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=575" target="_blank">00:09:35.440</a></span> | <span class="t">now later on we will probably add a few other books as well and then the source</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=580" target="_blank">00:09:40.640</a></span> | <span class="t">will be different and when we return that item from our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=585" target="_blank">00:09:45.520</a></span> | <span class="t">retriever and our reader we'll at least be able to see which book</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=589" target="_blank">00:09:49.120</a></span> | <span class="t">came from him would be also be pretty cool to</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=593" target="_blank">00:09:53.360</a></span> | <span class="t">maybe include like a page number or something but</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=596" target="_blank">00:09:56.400</a></span> | <span class="t">at the moment with this there are no page numbers included so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=600" target="_blank">00:10:00.880</a></span> | <span class="t">we don't we're not doing that at the moment</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=605" target="_blank">00:10:05.120</a></span> | <span class="t">so that's a format that we need and it's going to be a list of these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=610" target="_blank">00:10:10.480</a></span> | <span class="t">so to do that we'll just do some list comprehension</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=616" target="_blank">00:10:16.000</a></span> | <span class="t">so we're going to write this and let's just copy this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=621" target="_blank">00:10:21.200</a></span> | <span class="t">I think yeah that should be fine we'll copy this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=625" target="_blank">00:10:25.440</a></span> | <span class="t">and just indent that and in here we have our paragraph</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=633" target="_blank">00:10:33.440</a></span> | <span class="t">and sources meditations for all of them and then we just write</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=636" target="_blank">00:10:36.720</a></span> | <span class="t">for paragraph</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=640" target="_blank">00:10:40.160</a></span> | <span class="t">in and data okay so yeah that should work and if we just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=646" target="_blank">00:10:46.240</a></span> | <span class="t">check what we have here</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=651" target="_blank">00:10:51.120</a></span> | <span class="t">okay so that's that's what we want so we have text</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=655" target="_blank">00:10:55.360</a></span> | <span class="t">we have the paragraph and then in here we have this meta with the source</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=658" target="_blank">00:10:58.560</a></span> | <span class="t">which is always meditations at the moment so</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=661" target="_blank">00:11:01.680</a></span> | <span class="t">that looks pretty good and we'll just double check</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=666" target="_blank">00:11:06.240</a></span> | <span class="t">the length again it should be 508 okay perfect now what we need to do</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=673" target="_blank">00:11:13.280</a></span> | <span class="t">is index all of these documents into our elastic search instance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=680" target="_blank">00:11:20.480</a></span> | <span class="t">and to do that it's it's super easy all we do is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=683" target="_blank">00:11:23.520</a></span> | <span class="t">call docstore because we're doing this through haystack now</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=687" target="_blank">00:11:27.200</a></span> | <span class="t">and we do write documents and we just pass in our data.json</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=694" target="_blank">00:11:34.800</a></span> | <span class="t">and that should work okay cool so we can see here what it's done</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=702" target="_blank">00:11:42.080</a></span> | <span class="t">as it's sent a post request to the bulk api and sent two of them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=709" target="_blank">00:11:49.520</a></span> | <span class="t">i assume because it can only send so many documents at once so that's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=716" target="_blank">00:11:56.240</a></span> | <span class="t">pretty cool and now what i want to check is</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=720" target="_blank">00:12:00.720</a></span> | <span class="t">that we actually have 508 documents in our elastic search instance</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=728" target="_blank">00:12:08.240</a></span> | <span class="t">so to do that we're going to revert back to requests</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=731" target="_blank">00:12:11.920</a></span> | <span class="t">so we do requests.get again go to our</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=740" target="_blank">00:12:20.000</a></span> | <span class="t">localhost</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=742" target="_blank">00:12:22.800</a></span> | <span class="t">9200 and here we need to specify the index that we want to count the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=750" target="_blank">00:12:30.400</a></span> | <span class="t">number of entries in and then all we do is add count onto the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=754" target="_blank">00:12:34.560</a></span> | <span class="t">end there and this will return a json object so we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=758" target="_blank">00:12:38.640</a></span> | <span class="t">do this so that we can see it and sure enough we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=762" target="_blank">00:12:42.080</a></span> | <span class="t">have 508 items in that document store</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=767" target="_blank">00:12:47.360</a></span> | <span class="t">so if we head on back to our original plan</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=771" target="_blank">00:12:51.280</a></span> | <span class="t">so up here we had meditations we've now got that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=778" target="_blank">00:12:58.640</a></span> | <span class="t">and we've also set up the first part of our stack over here so elastic</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=786" target="_blank">00:13:06.400</a></span> | <span class="t">now has meditations in there so we can cross that off now the next step</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=794" target="_blank">00:13:14.080</a></span> | <span class="t">is setting up our retriever which we'll cover in the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=797" target="_blank">00:13:17.280</a></span> | <span class="t">next video so that's everything for this video i hope you enjoyed and i will see</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=Vwq7Ucp9UCw&t=805" target="_blank">00:13:25.040</a></span> | <span class="t">you again in the next one</span></div></div></body></html>
<html><head><title>Semantic Chunking for RAG</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }
    .container {
        width: 95%;  /* Increased width to use more space */
        margin: auto;
        overflow: auto;  /* Added to handle overflow by adding a scrollbar if necessary */
    }
    h2, h3 {
        color: #333;
        text-align: center;
    }
    a {
        color: #0000FF;  /* Traditional blue color for links */
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    img {
        display: block;
        margin: auto;
        max-width: 100%;
    }
    .c {
        margin: 10px 0;
    }
    .s, .t {
        display: inline-block;
        margin-right: 5px;
    }
    .max-width {
        max-width: 800px;
        margin: auto;
        padding-left: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;  /* Ensure text alignment is consistent */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2;
    }
    tr:nth-child(odd) {
        background-color: #e6e6e6;
    }
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-69VLBMTTP0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-69VLBMTTP0');
    </script>
    </head><body><div class='container'><a href="index.html">back to index</a><h2>Semantic Chunking for RAG</h2><a href="https://www.youtube.com/watch?v=TcRRfcbsApw"><img src="https://i.ytimg.com/vi_webp/TcRRfcbsApw/maxresdefault.webp" style="width:50%;"></a><div><br></div><h3>Chapters</h3><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=0">0:0</a> Semantic Chunking for RAG<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=45">0:45</a> What is Semantic Chunking<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=211">3:31</a> Semantic Chunking in Python<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=737">12:17</a> Adding Context to Chunks<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=821">13:41</a> Providing LLMs with More Context<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1091">18:11</a> Indexing our Chunks<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1227">20:27</a> Creating Chunks for the LLM<br><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1638">27:18</a> Querying for Chunks<br><br><div style="text-align: left;"><a href="./TcRRfcbsApw.html">Whisper Transcript</a> | <a href="./transcript_TcRRfcbsApw.html">Transcript Only Page</a></div><br><div style="max-width: 800px;"><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=0" target="_blank">00:00:00.000</a></span> | <span class="t">Today we're going to talk about semantic chunking and a few other methods that we can include</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=5" target="_blank">00:00:05.880</a></span> | <span class="t">within our chunking strategy to improve our rag performance.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=10" target="_blank">00:00:10.720</a></span> | <span class="t">But first let's begin with semantic chunking and just understand what I mean when I say</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=17" target="_blank">00:00:17.640</a></span> | <span class="t">semantic chunking.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=18" target="_blank">00:00:18.720</a></span> | <span class="t">So when we chunk our documents semantically, what we are actually doing is taking how we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=25" target="_blank">00:00:25.940</a></span> | <span class="t">embed our documents for a rag pipeline, how we store them and how we retrieve them and</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=32" target="_blank">00:00:32.020</a></span> | <span class="t">applying that same mechanism to our chunking strategy.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=35" target="_blank">00:00:35.800</a></span> | <span class="t">So rather than saying I'm going to chunk with 400 tokens or I'm going to chunk based on</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=41" target="_blank">00:00:41.960</a></span> | <span class="t">whether there's some new lines, so on and so on, instead we are building our chunks</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=47" target="_blank">00:00:47.480</a></span> | <span class="t">to optimize our embedding conciseness.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=51" target="_blank">00:00:51.720</a></span> | <span class="t">Now the reason that we do this is if we imagine we have some document over here, there's a</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=58" target="_blank">00:00:58.240</a></span> | <span class="t">load of text, we could just naively chunk this in using the token count or using different</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=65" target="_blank">00:01:05.440</a></span> | <span class="t">delimiters, or we could consider the fact that we're trying to embed each one of these</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=71" target="_blank">00:01:11.520</a></span> | <span class="t">chunks into a single vector embedding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=75" target="_blank">00:01:15.760</a></span> | <span class="t">So these are our ideal end states, we have these single vector embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=81" target="_blank">00:01:21.560</a></span> | <span class="t">These are single vector embeddings, but most chunking strategies out there are very prone</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=90" target="_blank">00:01:30.520</a></span> | <span class="t">to containing multiple meanings within our chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=94" target="_blank">00:01:34.000</a></span> | <span class="t">And the optimal way of reducing the likelihood of that is to go for smaller and smaller chunk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=100" target="_blank">00:01:40.360</a></span> | <span class="t">sizes, which we should still do.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=102" target="_blank">00:01:42.720</a></span> | <span class="t">We should still go with smaller chunk sizes, but using semantic chunking, we can find the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=111" target="_blank">00:01:51.080</a></span> | <span class="t">optimum chunk size to allow us to take some meaning here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=117" target="_blank">00:01:57.760</a></span> | <span class="t">So let's say here to here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=120" target="_blank">00:02:00.360</a></span> | <span class="t">And what we do is find that chunk size that produces essentially a single meaning.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=129" target="_blank">00:02:09.000</a></span> | <span class="t">So we have some meaning here and it is concise.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=134" target="_blank">00:02:14.560</a></span> | <span class="t">And as I mentioned, the reason we do this is if we, for example, take a slightly larger</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=140" target="_blank">00:02:20.440</a></span> | <span class="t">chunk and we bring that over here and we have multiple meanings, let's say there's three</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=146" target="_blank">00:02:26.240</a></span> | <span class="t">potential meanings of what this text could be about.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=149" target="_blank">00:02:29.720</a></span> | <span class="t">If you consider like a, for example, a newspaper article, you take different chunks of that</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=154" target="_blank">00:02:34.640</a></span> | <span class="t">newspaper article and each chunk has a different meaning.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=158" target="_blank">00:02:38.520</a></span> | <span class="t">It's talking about something slightly different, even if the topic is generally the same.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=163" target="_blank">00:02:43.080</a></span> | <span class="t">And what we typically do with our naive chunking strategy is we take all of those meanings</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=169" target="_blank">00:02:49.000</a></span> | <span class="t">and we try and compress them into a single vector embedding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=172" target="_blank">00:02:52.320</a></span> | <span class="t">So it means that, okay, we're kind of capturing the meaning of all of our potential meanings</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=178" target="_blank">00:02:58.760</a></span> | <span class="t">here, but we're not capturing the exact meaning of any of them.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=185" target="_blank">00:03:05.060</a></span> | <span class="t">We're just capturing kind of like a diluted version of what all of these things mean together.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=190" target="_blank">00:03:10.640</a></span> | <span class="t">So by semantically chunking, we can actually calculate the conciseness of our chunks, identify</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=197" target="_blank">00:03:17.260</a></span> | <span class="t">the optimum length for keeping a chunk concise, and then using that, we create our single</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=203" target="_blank">00:03:23.520</a></span> | <span class="t">embedding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=204" target="_blank">00:03:24.520</a></span> | <span class="t">And that is semantic chunking.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=206" target="_blank">00:03:26.680</a></span> | <span class="t">So let's go ahead and see how we actually apply this in Python.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=211" target="_blank">00:03:31.480</a></span> | <span class="t">So in this notebook, we're going to go through the full pipeline.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=214" target="_blank">00:03:34.580</a></span> | <span class="t">So we are going to get a dataset.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=218" target="_blank">00:03:38.580</a></span> | <span class="t">We're going to chunk it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=219" target="_blank">00:03:39.860</a></span> | <span class="t">We're going to prepare it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=220" target="_blank">00:03:40.980</a></span> | <span class="t">I mentioned there's some other things we're going to do to our chunks as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=225" target="_blank">00:03:45.100</a></span> | <span class="t">We're going to embed all of that, and then we'll see how we can begin retrieving some</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=230" target="_blank">00:03:50.900</a></span> | <span class="t">of that information.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=232" target="_blank">00:03:52.460</a></span> | <span class="t">So we're going to go through this notebook.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=234" target="_blank">00:03:54.060</a></span> | <span class="t">There will be a link to this in the description of the video and also in the comments below.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=241" target="_blank">00:04:01.020</a></span> | <span class="t">And the first thing we're going to do is just install the other libraries that we need in</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=246" target="_blank">00:04:06.020</a></span> | <span class="t">order to run a notebook.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=248" target="_blank">00:04:08.400</a></span> | <span class="t">So we have SemanticRouter, which includes our chunking mechanism.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=253" target="_blank">00:04:13.400</a></span> | <span class="t">We have Pinecone, which is where we're going to be storing and retrieving our embeddings</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=257" target="_blank">00:04:17.660</a></span> | <span class="t">from.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=258" target="_blank">00:04:18.660</a></span> | <span class="t">And we have HuggingFaceDatasets, which is where we're going to be pulling this starting</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=263" target="_blank">00:04:23.180</a></span> | <span class="t">dataset from.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=264" target="_blank">00:04:24.540</a></span> | <span class="t">So this dataset, if you watch these videos often, you will have seen it before.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=268" target="_blank">00:04:28.600</a></span> | <span class="t">It's a dump of AI archived papers.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=273" target="_blank">00:04:33.900</a></span> | <span class="t">So things like the LLAMA papers, AHE embeddings, and many other things as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=281" target="_blank">00:04:41.460</a></span> | <span class="t">So we're going to come down to here and we're going to initialize our encoder, so the embedding</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=286" target="_blank">00:04:46.540</a></span> | <span class="t">model.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=287" target="_blank">00:04:47.820</a></span> | <span class="t">And we're going to be using OpenAI for this one, and we're going to use the TextEmbedding3</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=291" target="_blank">00:04:51.780</a></span> | <span class="t">small model.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=292" target="_blank">00:04:52.780</a></span> | <span class="t">We're going to be using this both to create our embeddings for our chunks, which we have</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=296" target="_blank">00:04:56.700</a></span> | <span class="t">created them and putting them into Pinecone, and also for that chunking mechanism.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=303" target="_blank">00:05:03.460</a></span> | <span class="t">And ideally, that's what you should be doing as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=306" target="_blank">00:05:06.140</a></span> | <span class="t">You should be aligning both of those models because you are optimizing your chunks for</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=311" target="_blank">00:05:11.420</a></span> | <span class="t">a specific embedding model.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=313" target="_blank">00:05:13.180</a></span> | <span class="t">So it would not make sense to use a different embedding model to the embedding model you're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=319" target="_blank">00:05:19.260</a></span> | <span class="t">using to create those final chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=321" target="_blank">00:05:21.820</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=322" target="_blank">00:05:22.900</a></span> | <span class="t">And we're going to be using this RollingWindowSplitter.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=326" target="_blank">00:05:26.100</a></span> | <span class="t">So there's a few parameters we can adjust here to see a little bit more of what is going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=331" target="_blank">00:05:31.140</a></span> | <span class="t">on.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=332" target="_blank">00:05:32.180</a></span> | <span class="t">So specifically the plot splits and enable statistics, they're going to show us a lot</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=336" target="_blank">00:05:36.580</a></span> | <span class="t">more information about what is actually happening when we're producing our chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=341" target="_blank">00:05:41.940</a></span> | <span class="t">Now the other parameters that are probably important to note here is the minimum split</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=346" target="_blank">00:05:46.460</a></span> | <span class="t">tokens.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=347" target="_blank">00:05:47.460</a></span> | <span class="t">So I'm basically saying I don't want anything lower than 100 tokens in my splits.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=353" target="_blank">00:05:53.660</a></span> | <span class="t">And then max, I'm saying I don't want anything higher than 500 tokens.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=357" target="_blank">00:05:57.700</a></span> | <span class="t">So we're kind of setting the bounds of where we want this chunking mechanism to function</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=363" target="_blank">00:06:03.060</a></span> | <span class="t">within.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=364" target="_blank">00:06:04.060</a></span> | <span class="t">So I'm going to initialize that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=365" target="_blank">00:06:05.820</a></span> | <span class="t">And then we'll come down to here and we'll perform our first splitting on the first document</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=372" target="_blank">00:06:12.740</a></span> | <span class="t">in our archive data set.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=376" target="_blank">00:06:16.180</a></span> | <span class="t">So if we come up here, we'll see we have these charts that shows what has been happening.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=381" target="_blank">00:06:21.860</a></span> | <span class="t">So as our rolling window of sentences goes through our paper here or document, what it's</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=389" target="_blank">00:06:29.860</a></span> | <span class="t">doing is calculating the differing similarity between chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=395" target="_blank">00:06:35.180</a></span> | <span class="t">And then it's identifying the optimum threshold for the specific model we're using.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=401" target="_blank">00:06:41.020</a></span> | <span class="t">We're using the small TextEmbedding3 model from OpenAI.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=405" target="_blank">00:06:45.800</a></span> | <span class="t">So the threshold is pretty small, you can see up here in the top right, 0.2.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=410" target="_blank">00:06:50.660</a></span> | <span class="t">And those similarities between our windows are what you can see with the blue line as</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=417" target="_blank">00:06:57.100</a></span> | <span class="t">we're going through.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=418" target="_blank">00:06:58.100</a></span> | <span class="t">Then you can see that a split has been made where we see the red dotted line.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=423" target="_blank">00:07:03.020</a></span> | <span class="t">And one thing that's kind of interesting that you can see here is once it gets to the end</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=427" target="_blank">00:07:07.100</a></span> | <span class="t">here, there are many more chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=432" target="_blank">00:07:12.100</a></span> | <span class="t">And I haven't checked, but I'm pretty sure that this area here is actually the references</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=437" target="_blank">00:07:17.940</a></span> | <span class="t">for the paper.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=439" target="_blank">00:07:19.960</a></span> | <span class="t">So you can see that it's basically splitting many times between references because they</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=445" target="_blank">00:07:25.540</a></span> | <span class="t">don't really have that much similarity between them.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=448" target="_blank">00:07:28.380</a></span> | <span class="t">So yes, we can see that, we can come down to here as well, we can see the chunk sizes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=454" target="_blank">00:07:34.220</a></span> | <span class="t">that have been produced.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=455" target="_blank">00:07:35.680</a></span> | <span class="t">So yeah, all between our 100 to 500 range, except with the exception of the last one</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=461" target="_blank">00:07:41.660</a></span> | <span class="t">here, which is the final one.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=464" target="_blank">00:07:44.100</a></span> | <span class="t">So there was, I assume not enough tokens to fit into that chunk, but we can see the structure</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=470" target="_blank">00:07:50.380</a></span> | <span class="t">here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=471" target="_blank">00:07:51.580</a></span> | <span class="t">And then we also have the splitting statistics at the bottom here if you want to check through</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=476" target="_blank">00:07:56.700</a></span> | <span class="t">that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=477" target="_blank">00:07:57.700</a></span> | <span class="t">And when looking at this, the thing that you should pay most attention to is your splits</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=482" target="_blank">00:08:02.820</a></span> | <span class="t">by max chunk size.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=484" target="_blank">00:08:04.900</a></span> | <span class="t">So you want more splits by threshold.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=488" target="_blank">00:08:08.580</a></span> | <span class="t">The more of these you have compared to these, the better your basically semantic chunks</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=493" target="_blank">00:08:13.860</a></span> | <span class="t">are going to be.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=495" target="_blank">00:08:15.140</a></span> | <span class="t">The way that I could reduce this, like the easiest way is actually just to increase my</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=499" target="_blank">00:08:19.980</a></span> | <span class="t">max chunk size.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=501" target="_blank">00:08:21.240</a></span> | <span class="t">But the other thing you can do is actually set a threshold.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=503" target="_blank">00:08:23.940</a></span> | <span class="t">So if you want to.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=507" target="_blank">00:08:27.340</a></span> | <span class="t">So we can take a look at the rolling window splitter class here and see that we have this</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=511" target="_blank">00:08:31.180</a></span> | <span class="t">dynamic threshold value, and we can set that equal to false.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=515" target="_blank">00:08:35.260</a></span> | <span class="t">So if we go back into our code and set dynamic threshold equals false.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=522" target="_blank">00:08:42.920</a></span> | <span class="t">Then we can also set the default threshold value.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=527" target="_blank">00:08:47.980</a></span> | <span class="t">This is looking at the similarity threshold for what defines a split.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=532" target="_blank">00:08:52.540</a></span> | <span class="t">And you can modify that by going to the encoder, score threshold, and modifying this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=540" target="_blank">00:09:00.080</a></span> | <span class="t">And we can just increase the threshold number.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=543" target="_blank">00:09:03.580</a></span> | <span class="t">So before we had roughly 0.22, so I'm going to go to 0.25.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=549" target="_blank">00:09:09.180</a></span> | <span class="t">See what we get.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=550" target="_blank">00:09:10.180</a></span> | <span class="t">Okay, and you can see that our splits by threshold has increased, and the splits by max chunk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=556" target="_blank">00:09:16.160</a></span> | <span class="t">size has decreased.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=559" target="_blank">00:09:19.160</a></span> | <span class="t">And we can keep going with that if we want to.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=561" target="_blank">00:09:21.180</a></span> | <span class="t">I think with the new embed3 models, 0.3 is usually a pretty good value.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=570" target="_blank">00:09:30.520</a></span> | <span class="t">So yeah, this is starting to look a bit better.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=573" target="_blank">00:09:33.400</a></span> | <span class="t">Maybe too many chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=574" target="_blank">00:09:34.400</a></span> | <span class="t">I would say probably too many chunks there, actually.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=577" target="_blank">00:09:37.760</a></span> | <span class="t">But anyway, you can do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=579" target="_blank">00:09:39.320</a></span> | <span class="t">I'm actually going to take that back to what it was before.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=583" target="_blank">00:09:43.640</a></span> | <span class="t">I'm going to set dynamic threshold to true.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=587" target="_blank">00:09:47.040</a></span> | <span class="t">And the other thing you can do is increase or decrease your window size.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=590" target="_blank">00:09:50.560</a></span> | <span class="t">So if I go with 5, which I think is the default value, and try again, you can also see the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=598" target="_blank">00:09:58.480</a></span> | <span class="t">effect that this has on those statistics.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=602" target="_blank">00:10:02.640</a></span> | <span class="t">And you can see here that we get a better ratio here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=607" target="_blank">00:10:07.040</a></span> | <span class="t">But what you tend to find when you increase the window size here is that the similarity</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=613" target="_blank">00:10:13.120</a></span> | <span class="t">is averaged over time.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=615" target="_blank">00:10:15.800</a></span> | <span class="t">And I don't necessarily want to always do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=619" target="_blank">00:10:19.340</a></span> | <span class="t">I think it depends on how high level you're trying to be with your embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=625" target="_blank">00:10:25.840</a></span> | <span class="t">In this case, I want to be pretty concise.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=627" target="_blank">00:10:27.560</a></span> | <span class="t">So I'm going to actually just reduce the window size again, go back to what we had at the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=631" target="_blank">00:10:31.480</a></span> | <span class="t">start.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=632" target="_blank">00:10:32.480</a></span> | <span class="t">So I'm going to remove that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=633" target="_blank">00:10:33.480</a></span> | <span class="t">I'm going to re-initialize our encoder, rerun this, this, and this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=638" target="_blank">00:10:38.920</a></span> | <span class="t">Okay, if we come down here, we can see we have these chunks, they look pretty good.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=646" target="_blank">00:10:46.120</a></span> | <span class="t">These and these as well, which seem maybe quite small even, but we can see that statistics</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=656" target="_blank">00:10:56.120</a></span> | <span class="t">look decent.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=657" target="_blank">00:10:57.120</a></span> | <span class="t">But really what we want to be doing is looking at the chunks as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=661" target="_blank">00:11:01.920</a></span> | <span class="t">So you can see here the first is like the authors and let's just see, yeah, it's just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=668" target="_blank">00:11:08.120</a></span> | <span class="t">the authors and then it cuts at the abstract.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=671" target="_blank">00:11:11.600</a></span> | <span class="t">So the next chunk here is actually our abstract.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=674" target="_blank">00:11:14.900</a></span> | <span class="t">We go through, okay, if we come to the end here, we see that's basically the full abstract,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=684" target="_blank">00:11:24.520</a></span> | <span class="t">like just the abstract.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=685" target="_blank">00:11:25.520</a></span> | <span class="t">And then we go on to the next one here and we have, it's going into the introduction.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=688" target="_blank">00:11:28.960</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=689" target="_blank">00:11:29.960</a></span> | <span class="t">So it's, it has the, like the paper details and the authors, the title and the authors.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=695" target="_blank">00:11:35.760</a></span> | <span class="t">It has the abstract and then the introduction and it's, it's, you know, broken those apart.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=700" target="_blank">00:11:40.880</a></span> | <span class="t">So that looks, I think it looks pretty good.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=703" target="_blank">00:11:43.500</a></span> | <span class="t">So now we can go on to just having a look at what those objects are, we can see them</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=707" target="_blank">00:11:47.720</a></span> | <span class="t">here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=708" target="_blank">00:11:48.720</a></span> | <span class="t">So we have the document split object here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=712" target="_blank">00:11:52.160</a></span> | <span class="t">This just includes all the information that we have there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=715" target="_blank">00:11:55.660</a></span> | <span class="t">What score triggered it, like the split and token count and so on.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=722" target="_blank">00:12:02.200</a></span> | <span class="t">Then if we come down to here, so for each one of those documents split objects, we access</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=728" target="_blank">00:12:08.260</a></span> | <span class="t">the text itself by going into the content attribute and then, well, yeah, that's how,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=736" target="_blank">00:12:16.400</a></span> | <span class="t">that's how splits or chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=738" target="_blank">00:12:18.020</a></span> | <span class="t">Now I mentioned before that we're not just going to focus on semantic chunking majority</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=743" target="_blank">00:12:23.780</a></span> | <span class="t">of what we're talking about, but not just that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=745" target="_blank">00:12:25.740</a></span> | <span class="t">I also want to show you some other little things that we can do in order to improve</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=750" target="_blank">00:12:30.700</a></span> | <span class="t">the quality of our, our chunks, both in our embeddings and also for the LLM.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=756" target="_blank">00:12:36.780</a></span> | <span class="t">So the first one of those is this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=759" target="_blank">00:12:39.220</a></span> | <span class="t">So what I'm doing here is I'm actually taking the title of the paper and I'm also taking</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=764" target="_blank">00:12:44.600</a></span> | <span class="t">the chunk, which is going to go into the content here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=767" target="_blank">00:12:47.840</a></span> | <span class="t">And then I'm just merging those together.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=769" target="_blank">00:12:49.800</a></span> | <span class="t">And then we're actually going to use that to create our embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=772" target="_blank">00:12:52.560</a></span> | <span class="t">We won't feed this chunk to our LLM.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=777" target="_blank">00:12:57.060</a></span> | <span class="t">We just feed it into our embedding model because it gives more context to the embedding model</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=782" target="_blank">00:13:02.140</a></span> | <span class="t">as to what we're actually talking about when we include things like the title of a paper</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=787" target="_blank">00:13:07.020</a></span> | <span class="t">or the chapter of a book, these sort of kind of like hierarchical components.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=793" target="_blank">00:13:13.380</a></span> | <span class="t">So we can create a few of those and we can see what we have.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=797" target="_blank">00:13:17.400</a></span> | <span class="t">So we're looking at the paper on unveiling emotions and generative AI.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=802" target="_blank">00:13:22.140</a></span> | <span class="t">So that can be a really useful bit of context when we're looking at, you know, sometimes</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=808" target="_blank">00:13:28.020</a></span> | <span class="t">paragraphs or chunks that don't mention the overall aim of, or the overall context of</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=814" target="_blank">00:13:34.620</a></span> | <span class="t">where it is coming from.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=816" target="_blank">00:13:36.580</a></span> | <span class="t">So we do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=817" target="_blank">00:13:37.580</a></span> | <span class="t">We're going to use this function later when we're creating our embeddings.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=820" target="_blank">00:13:40.980</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=821" target="_blank">00:13:41.980</a></span> | <span class="t">And then the other thing that I want to do, I mentioned it here is for the LLM, I actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=826" target="_blank">00:13:46.420</a></span> | <span class="t">want to pull in some context from the surrounding chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=829" target="_blank">00:13:49.940</a></span> | <span class="t">So the way that I'm going to do that, and so I'm just going to number all of my chunks,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=833" target="_blank">00:13:53.980</a></span> | <span class="t">add that ID into my metadata, and then just add a reference to the chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=839" target="_blank">00:13:59.560</a></span> | <span class="t">So I'm doing that with this pre-chunk and post-chunk field within the metadata here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=845" target="_blank">00:14:05.320</a></span> | <span class="t">So if I run this, I'll just show you what I'm doing.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=848" target="_blank">00:14:08.660</a></span> | <span class="t">I don't need the type.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=849" target="_blank">00:14:09.660</a></span> | <span class="t">I just want to show you, let me show you one of them.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=854" target="_blank">00:14:14.220</a></span> | <span class="t">So metadata and we go zero.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=856" target="_blank">00:14:16.380</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=857" target="_blank">00:14:17.380</a></span> | <span class="t">So we have the title.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=859" target="_blank">00:14:19.260</a></span> | <span class="t">We have the content, which is our semantic chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=863" target="_blank">00:14:23.260</a></span> | <span class="t">We have the pre-chunk and then here you can see our post-chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=866" target="_blank">00:14:26.580</a></span> | <span class="t">There's no pre-chunk for this one because it is literally the first chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=869" target="_blank">00:14:29.940</a></span> | <span class="t">If we go to number one, we will see that this content here will become the pre-chunk value.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=874" target="_blank">00:14:34.780</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=875" target="_blank">00:14:35.780</a></span> | <span class="t">So you can see up there, we have the post-chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=878" target="_blank">00:14:38.860</a></span> | <span class="t">So what's coming after and the current chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=882" target="_blank">00:14:42.700</a></span> | <span class="t">Now we have that, that's quite a lot of text and it's not so efficient when you are storing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=889" target="_blank">00:14:49.220</a></span> | <span class="t">everything in like Pinecone.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=891" target="_blank">00:14:51.340</a></span> | <span class="t">So what you can do is, you can do this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=894" target="_blank">00:14:54.820</a></span> | <span class="t">You can just store the chunks themselves.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=896" target="_blank">00:14:56.660</a></span> | <span class="t">It's just a lot of extra information or you can just add the IDs, right?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=901" target="_blank">00:15:01.980</a></span> | <span class="t">So this is, it can be a bit easier.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=904" target="_blank">00:15:04.420</a></span> | <span class="t">I think, especially when you're looking at storing a lot of data, this is probably what</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=908" target="_blank">00:15:08.380</a></span> | <span class="t">you want to do.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=909" target="_blank">00:15:09.380</a></span> | <span class="t">When it's less data, you can probably just put in the text itself.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=913" target="_blank">00:15:13.680</a></span> | <span class="t">It's not really a big deal.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=915" target="_blank">00:15:15.740</a></span> | <span class="t">So yes, let me show you what we're doing here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=919" target="_blank">00:15:19.440</a></span> | <span class="t">So the ID for each chunk that we're creating here is actually archive ID plus the chunk</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=925" target="_blank">00:15:25.620</a></span> | <span class="t">number.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=927" target="_blank">00:15:27.540</a></span> | <span class="t">And of course it's pretty easy to sell the pre-chunk ID and post-chunk ID because we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=934" target="_blank">00:15:34.140</a></span> | <span class="t">just need to either go I minus one or I plus one.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=939" target="_blank">00:15:39.060</a></span> | <span class="t">So we do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=941" target="_blank">00:15:41.460</a></span> | <span class="t">Then we build our metadata and then let's have a look at a few of these.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=948" target="_blank">00:15:48.420</a></span> | <span class="t">So we're just looking at the first three records from that, from the previous document.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=953" target="_blank">00:15:53.020</a></span> | <span class="t">So we have the title of the document and the authors.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=959" target="_blank">00:15:59.100</a></span> | <span class="t">The pre-chunk ID is nothing, of course, post-chunk is this, whereas the current chunk is actually</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=964" target="_blank">00:16:04.740</a></span> | <span class="t">zero.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=965" target="_blank">00:16:05.740</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=966" target="_blank">00:16:06.740</a></span> | <span class="t">Then we look at the next one, current chunk one, post-chunk two, pre-chunk zero.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=972" target="_blank">00:16:12.580</a></span> | <span class="t">Then again, current two, pre-one, post.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=978" target="_blank">00:16:18.380</a></span> | <span class="t">It's the final one within this set of three.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=981" target="_blank">00:16:21.220</a></span> | <span class="t">So it didn't actually give us a post-chunk ID here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=984" target="_blank">00:16:24.140</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=985" target="_blank">00:16:25.140</a></span> | <span class="t">So that's the sort of structure that we're setting up for this dataset.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=989" target="_blank">00:16:29.380</a></span> | <span class="t">Let's go on to actually indexing all of this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=993" target="_blank">00:16:33.340</a></span> | <span class="t">So the first thing we would need to do is set up our vector index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=998" target="_blank">00:16:38.980</a></span> | <span class="t">You go to app.pycone.io to get that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1002" target="_blank">00:16:42.860</a></span> | <span class="t">Then you want to come down to here and we're going to set up our serverless spec.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1008" target="_blank">00:16:48.940</a></span> | <span class="t">And actually I'm using a paid region here, so you can actually switch this to US East</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1014" target="_blank">00:16:54.140</a></span> | <span class="t">one, and this will be the free plan of serverless.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1019" target="_blank">00:16:59.340</a></span> | <span class="t">I have mine in US West one too, so I'm going to leave that, but yes, you probably want</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1025" target="_blank">00:17:05.100</a></span> | <span class="t">to use this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1026" target="_blank">00:17:06.540</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1027" target="_blank">00:17:07.540</a></span> | <span class="t">So before we create our index, we actually need to find the dimensionality of our encoder</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1033" target="_blank">00:17:13.140</a></span> | <span class="t">model.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1034" target="_blank">00:17:14.140</a></span> | <span class="t">So to do that, we can just encode, like create an embedding, and then we can see that dimensionality</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1039" target="_blank">00:17:19.620</a></span> | <span class="t">is one, five, three, six.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1041" target="_blank">00:17:21.220</a></span> | <span class="t">Otherwise you can just look online and you will be able to find the embedding dimension</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1046" target="_blank">00:17:26.220</a></span> | <span class="t">of your models.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1047" target="_blank">00:17:27.860</a></span> | <span class="t">Then we're going to create an index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1049" target="_blank">00:17:29.580</a></span> | <span class="t">So I'm going to call this one better rag chunking.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1052" target="_blank">00:17:32.340</a></span> | <span class="t">I'm going to be using the dot product metric here, so that's our similarity metric.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1056" target="_blank">00:17:36.980</a></span> | <span class="t">We can use others.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1057" target="_blank">00:17:37.980</a></span> | <span class="t">We can use cosine, for example.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1060" target="_blank">00:17:40.220</a></span> | <span class="t">Here we're actually using embed three from OpenAI.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1065" target="_blank">00:17:45.100</a></span> | <span class="t">And then we pass in our serverless spec as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1068" target="_blank">00:17:48.140</a></span> | <span class="t">We run that, and I actually already have my index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1072" target="_blank">00:17:52.460</a></span> | <span class="t">Actually oops.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1073" target="_blank">00:17:53.460</a></span> | <span class="t">Okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1074" target="_blank">00:17:54.460</a></span> | <span class="t">I just messed that up.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1075" target="_blank">00:17:55.460</a></span> | <span class="t">So better rag chunking.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1077" target="_blank">00:17:57.240</a></span> | <span class="t">I want to initialize that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1079" target="_blank">00:17:59.000</a></span> | <span class="t">And I already have my index initialized.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1082" target="_blank">00:18:02.000</a></span> | <span class="t">So you can see that I have this vector count here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1084" target="_blank">00:18:04.540</a></span> | <span class="t">Actually this is pretty high for the full data set.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1087" target="_blank">00:18:07.180</a></span> | <span class="t">So I'll show you later.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1088" target="_blank">00:18:08.180</a></span> | <span class="t">You can just limit how many vectors you're putting into your index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1091" target="_blank">00:18:11.820</a></span> | <span class="t">The splitting or chunking that we do here, it can be expensive because we're creating</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1095" target="_blank">00:18:15.940</a></span> | <span class="t">many, many embeddings to produce our semantic chunks, which down the line results in better</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1102" target="_blank">00:18:22.500</a></span> | <span class="t">performance, or can result in better performance, but I mean for this example, I don't know</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1109" target="_blank">00:18:29.760</a></span> | <span class="t">if you want to spend that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1111" target="_blank">00:18:31.180</a></span> | <span class="t">So I would recommend if you would like to make this quicker, you can actually just download</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1118" target="_blank">00:18:38.300</a></span> | <span class="t">the pre-chunked data set from here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1121" target="_blank">00:18:41.880</a></span> | <span class="t">So this again, it's from Hugging Face.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1125" target="_blank">00:18:45.860</a></span> | <span class="t">So if I come here, you can see that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1130" target="_blank">00:18:50.220</a></span> | <span class="t">You can also see all the chunks and everything if you want to check that out as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1134" target="_blank">00:18:54.900</a></span> | <span class="t">Actually it looks pretty interesting.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1136" target="_blank">00:18:56.460</a></span> | <span class="t">So yes, you can do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1140" target="_blank">00:19:00.160</a></span> | <span class="t">If you want to limit the number of records that you're going to be processing and storing</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1146" target="_blank">00:19:06.140</a></span> | <span class="t">in Pinecone, you can do that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1147" target="_blank">00:19:07.900</a></span> | <span class="t">So if I modify this, you can do, for example, just take the first 10,000 records like that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1156" target="_blank">00:19:16.420</a></span> | <span class="t">And that will just limit how much you're pulling through there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1158" target="_blank">00:19:18.980</a></span> | <span class="t">Otherwise, if you're using this data set, what you can also do to pandas, and we can</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1164" target="_blank">00:19:24.980</a></span> | <span class="t">go like, I log, I think like this and go with the first 10,000 records like this instead.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1173" target="_blank">00:19:33.820</a></span> | <span class="t">So let me try and run that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1177" target="_blank">00:19:37.100</a></span> | <span class="t">Yes.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1178" target="_blank">00:19:38.420</a></span> | <span class="t">So that will work.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1179" target="_blank">00:19:39.420</a></span> | <span class="t">So, okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1180" target="_blank">00:19:40.780</a></span> | <span class="t">Looking at the rest of what we have here, we set the splitter statistics and splits</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1185" target="_blank">00:19:45.680</a></span> | <span class="t">to false because we don't want to be visualizing them with every like embedding run that we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1190" target="_blank">00:19:50.660</a></span> | <span class="t">doing here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1191" target="_blank">00:19:51.660</a></span> | <span class="t">It's just, we don't need to.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1192" target="_blank">00:19:52.660</a></span> | <span class="t">Again, like this is more for investigation.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1196" target="_blank">00:19:56.060</a></span> | <span class="t">When you're actually creating your embeddings, you don't need to be looking at these.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1199" target="_blank">00:19:59.140</a></span> | <span class="t">There's no need to.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1201" target="_blank">00:20:01.180</a></span> | <span class="t">Then you come down here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1202" target="_blank">00:20:02.180</a></span> | <span class="t">We are creating our chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1204" target="_blank">00:20:04.000</a></span> | <span class="t">We then build our metadata using that function that I showed you before.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1208" target="_blank">00:20:08.300</a></span> | <span class="t">And then the other thing that we're doing here is building our chunks for the embedding</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1210" target="_blank">00:20:10.900</a></span> | <span class="t">model.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1211" target="_blank">00:20:11.900</a></span> | <span class="t">So we're using the title as a kind of like a prefix and then the actual chunk itself</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1216" target="_blank">00:20:16.500</a></span> | <span class="t">and embedding all of that together, which we do here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1219" target="_blank">00:20:19.620</a></span> | <span class="t">And then after that, we just add everything to Pinecone, which I've already done.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1222" target="_blank">00:20:22.580</a></span> | <span class="t">So I'm going to actually stop this now and I can just continue.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1227" target="_blank">00:20:27.500</a></span> | <span class="t">Now that we have our chunks stored in Pinecone, we can go ahead and actually begin querying</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1234" target="_blank">00:20:34.140</a></span> | <span class="t">against them.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1235" target="_blank">00:20:35.400</a></span> | <span class="t">So to do that, what we need to do is we'll set up like a little function for query.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1241" target="_blank">00:20:41.180</a></span> | <span class="t">So I'm going to say define query.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1243" target="_blank">00:20:43.860</a></span> | <span class="t">The input to this will be your text, your input query.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1250" target="_blank">00:20:50.740</a></span> | <span class="t">And the first thing we need to do is create our embedding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1253" target="_blank">00:20:53.180</a></span> | <span class="t">So we're going to create our, I call it the query vector or query embedding.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1258" target="_blank">00:20:58.780</a></span> | <span class="t">So I'm going to do encode.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1261" target="_blank">00:21:01.800</a></span> | <span class="t">I'm going to put my text into a list here, extract that out.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1267" target="_blank">00:21:07.700</a></span> | <span class="t">And then I'm going to pass this over to our Pinecone index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1271" target="_blank">00:21:11.820</a></span> | <span class="t">So I'm going to do index, or we should get the context out of that actually.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1276" target="_blank">00:21:16.260</a></span> | <span class="t">So context equals index.query.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1281" target="_blank">00:21:21.620</a></span> | <span class="t">We have xq, which is our vector.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1284" target="_blank">00:21:24.460</a></span> | <span class="t">You can actually define that here as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1286" target="_blank">00:21:26.920</a></span> | <span class="t">So vector top K, make that a little easier to read, top K, which is how many contexts</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1296" target="_blank">00:21:36.780</a></span> | <span class="t">we'd like to return, how many chunks.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1299" target="_blank">00:21:39.260</a></span> | <span class="t">I'm going to say five, oh, and include metadata.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1303" target="_blank">00:21:43.700</a></span> | <span class="t">So include metadata.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1304" target="_blank">00:21:44.700</a></span> | <span class="t">I want to set that to true, and that will allow us to return like the other records</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1309" target="_blank">00:21:49.720</a></span> | <span class="t">that we had in there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1310" target="_blank">00:21:50.740</a></span> | <span class="t">So I'm going to just for now return the context, and we'll see what we have in there, and then</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1317" target="_blank">00:21:57.140</a></span> | <span class="t">we'll just modify it accordingly.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1319" target="_blank">00:21:59.740</a></span> | <span class="t">So run that, make sure it actually works as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1322" target="_blank">00:22:02.980</a></span> | <span class="t">So query, text, I'm going to say, what are EHI embeddings?</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1330" target="_blank">00:22:10.820</a></span> | <span class="t">Okay, so it worked, that's good, but it's not in a very good format for what we need.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1336" target="_blank">00:22:16.820</a></span> | <span class="t">So I'm going to take a look, okay, we have, come up to the top here, we have matches.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1342" target="_blank">00:22:22.020</a></span> | <span class="t">So we want to go into our matches.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1345" target="_blank">00:22:25.420</a></span> | <span class="t">We then want to iterate through each one of those matches.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1349" target="_blank">00:22:29.420</a></span> | <span class="t">So let me modify this.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1355" target="_blank">00:22:35.060</a></span> | <span class="t">We want to iterate through each one of those.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1356" target="_blank">00:22:36.860</a></span> | <span class="t">So for match in matches, I want to get, should I call this M, I want to get the metadata.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1366" target="_blank">00:22:46.740</a></span> | <span class="t">Metadata equals M metadata.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1371" target="_blank">00:22:51.500</a></span> | <span class="t">And actually we can just go straight into the content.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1373" target="_blank">00:22:53.500</a></span> | <span class="t">So I can get content, metadata, content.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1378" target="_blank">00:22:58.620</a></span> | <span class="t">The other things that we might want are the post chunk ID and pre-chunk ID, if we'd like</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1383" target="_blank">00:23:03.940</a></span> | <span class="t">to pull those through, and also the title as well.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1386" target="_blank">00:23:06.240</a></span> | <span class="t">So I can get the title, pre, and also post.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1402" target="_blank">00:23:22.900</a></span> | <span class="t">Okay, we should be able to run that, yes.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1408" target="_blank">00:23:28.100</a></span> | <span class="t">Then what we want to do is format this data or, you know, do something with it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1413" target="_blank">00:23:33.180</a></span> | <span class="t">So one thing that I would like to do is using the pre and post IDs that we have here, I'd</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1417" target="_blank">00:23:37.900</a></span> | <span class="t">like to fetch them for our index.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1419" target="_blank">00:23:39.780</a></span> | <span class="t">So I'm going to do index fetch, and you see that we get these IDs, so I'm going to get</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1424" target="_blank">00:23:44.580</a></span> | <span class="t">those.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1425" target="_blank">00:23:45.580</a></span> | <span class="t">So we have IDs equals, and then that's the pre and post, pre, post, and let's see what</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1430" target="_blank">00:23:50.900</a></span> | <span class="t">we get out of that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1431" target="_blank">00:23:51.900</a></span> | <span class="t">I just still want to go to the top.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1434" target="_blank">00:23:54.900</a></span> | <span class="t">Okay, so we're at the top here, we have our vectors that we return, I'm going to get those,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1440" target="_blank">00:24:00.500</a></span> | <span class="t">so vectors, and then we need to iterate through each one of these, or we can just get the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1445" target="_blank">00:24:05.860</a></span> | <span class="t">pre and post content, I think.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1448" target="_blank">00:24:08.420</a></span> | <span class="t">So maybe that's easier, so I'm going to say these are our other chunks, and then I'm going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1457" target="_blank">00:24:17.020</a></span> | <span class="t">to get the pre content, pre chunk, let's call it, pre chunk equals the other chunks, vectors,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1468" target="_blank">00:24:28.860</a></span> | <span class="t">the pre ID, okay, which is going to give us this, then we hunt the metadata, then we want</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1477" target="_blank">00:24:37.140</a></span> | <span class="t">the content, okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1480" target="_blank">00:24:40.580</a></span> | <span class="t">And then we'll do the same for post.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1484" target="_blank">00:24:44.020</a></span> | <span class="t">Okay, so that should give us everything that we need, I think, if I do it right, I did</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1493" target="_blank">00:24:53.180</a></span> | <span class="t">something wrong.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1494" target="_blank">00:24:54.180</a></span> | <span class="t">Ah, okay, so we have the ID, followed by metadata, followed by content, don't know where I got</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1501" target="_blank">00:25:01.060</a></span> | <span class="t">vectors from here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1502" target="_blank">00:25:02.380</a></span> | <span class="t">So ID, there we go.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1507" target="_blank">00:25:07.540</a></span> | <span class="t">So that should work, cool.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1510" target="_blank">00:25:10.540</a></span> | <span class="t">Now what we're going to do is pull these together, we're going to include it in this query here,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1515" target="_blank">00:25:15.740</a></span> | <span class="t">so we have, these are our matches.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1521" target="_blank">00:25:21.240</a></span> | <span class="t">From there, we get these, okay, so we've got a content, title, pre and post IDs, then we're</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1529" target="_blank">00:25:29.300</a></span> | <span class="t">going to get other chunks, okay, and then we're going to pull this together in a way</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1534" target="_blank">00:25:34.740</a></span> | <span class="t">that's going to make sense for our LLMs, so that is going to depend on, you know, the</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1540" target="_blank">00:25:40.180</a></span> | <span class="t">format that we exactly need.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1542" target="_blank">00:25:42.900</a></span> | <span class="t">So what I'm going to do is something pretty generic, to be honest.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1545" target="_blank">00:25:45.580</a></span> | <span class="t">So I'm going to go with, we have our chunks here, I'm going to say, I want some of my</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1551" target="_blank">00:25:51.860</a></span> | <span class="t">pre chunk and some of my post chunk around my current chunk, and I also want the title</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1557" target="_blank">00:25:57.180</a></span> | <span class="t">at the top, maybe, I don't know whether that's super necessary, but it's fine.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1562" target="_blank">00:26:02.240</a></span> | <span class="t">So we'll do chunk equals, and we'll go title first, or we can even just do this here, we'll</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1570" target="_blank">00:26:10.820</a></span> | <span class="t">put title, then I'm going to put in a little bit of space, I'm going to put in the pre</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1579" target="_blank">00:26:19.260</a></span> | <span class="t">chunk, but I just want the end of the pre chunk, not everything.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1583" target="_blank">00:26:23.300</a></span> | <span class="t">So pre chunk, and I'm just going to go with string values here, you probably don't necessarily</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1588" target="_blank">00:26:28.660</a></span> | <span class="t">want to do that, but it's fine, so I'm going to go, I don't know, the last 400 characters,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1596" target="_blank">00:26:36.380</a></span> | <span class="t">then new line, I'm going to go to the chunk, you don't need to do new line necessarily,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1602" target="_blank">00:26:42.180</a></span> | <span class="t">but I'm going to here, just for sake of readability, then you want to do your post chunk, and we</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1608" target="_blank">00:26:48.020</a></span> | <span class="t">just want to take the start of that.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1611" target="_blank">00:26:51.180</a></span> | <span class="t">I'll do the same, so we'll go the first 400 characters, okay.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1616" target="_blank">00:26:56.540</a></span> | <span class="t">And that's everything I really want there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1618" target="_blank">00:26:58.980</a></span> | <span class="t">And then I'm going to return the chunks, and of course, we're returning a fair bit here,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1625" target="_blank">00:27:05.940</a></span> | <span class="t">so you do want to be careful, depending on the LLM that you're using, that you're not</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1628" target="_blank">00:27:08.940</a></span> | <span class="t">going over the context window that it's going to be returning, and even here, I think maybe</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1633" target="_blank">00:27:13.820</a></span> | <span class="t">it would make more sense to do a smaller top K value, like three is probably fine.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1639" target="_blank">00:27:19.100</a></span> | <span class="t">Another thing you can do is use reranking, of course, and that will, you can rerank with</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1644" target="_blank">00:27:24.460</a></span> | <span class="t">more records, and then rerank to get a more ideal order of those results, and then just</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1652" target="_blank">00:27:32.620</a></span> | <span class="t">take like the top three.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1653" target="_blank">00:27:33.940</a></span> | <span class="t">That's usually the sort of numbers that I would go with.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1657" target="_blank">00:27:37.980</a></span> | <span class="t">So the chunk is, sorry, it should be content here, and also we should be doing chunks dot</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1666" target="_blank">00:27:46.060</a></span> | <span class="t">append chunk.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1667" target="_blank">00:27:47.060</a></span> | <span class="t">Okay, and all of this should come back with something, so we can try the query I had before,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1674" target="_blank">00:27:54.700</a></span> | <span class="t">just like, what are EHI embeddings, I don't know if this is in here or not.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1687" target="_blank">00:28:07.140</a></span> | <span class="t">So EHI, I may not have this in the dataset, so let me try something that I know is going</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1696" target="_blank">00:28:16.700</a></span> | <span class="t">to be in there, so we can go with what are large language models, so should be an easy</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1703" target="_blank">00:28:23.380</a></span> | <span class="t">one.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1704" target="_blank">00:28:24.380</a></span> | <span class="t">Okay, and let's see what we get here.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1707" target="_blank">00:28:27.900</a></span> | <span class="t">So we have section three, reuses history and work, so it wants to evaluate large language</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1713" target="_blank">00:28:33.620</a></span> | <span class="t">models are computational models that have the capability to understand and generate</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1717" target="_blank">00:28:37.860</a></span> | <span class="t">human language.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1719" target="_blank">00:28:39.340</a></span> | <span class="t">LLMs have the, where are we, new text based on a given input, n-gram models, no, no, no,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1728" target="_blank">00:28:48.300</a></span> | <span class="t">okay, cool.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1729" target="_blank">00:28:49.300</a></span> | <span class="t">So it's explaining what LLMs are there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1731" target="_blank">00:28:51.700</a></span> | <span class="t">Yeah, so that's just like a quick introduction to this idea of semantic chunking rather than,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1738" target="_blank">00:28:58.660</a></span> | <span class="t">you know, the typical chunking methods that we might see elsewhere, and also this idea</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1745" target="_blank">00:29:05.140</a></span> | <span class="t">of just adding, you know, some extra context to your chunks, like where we added the title</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1751" target="_blank">00:29:11.380</a></span> | <span class="t">to our chunks, and how we actually go through a full pipeline where we're creating our,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1757" target="_blank">00:29:17.980</a></span> | <span class="t">taking our dataset, chunking it, adding extra context where needed, and then actually creating</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1763" target="_blank">00:29:23.580</a></span> | <span class="t">our embeddings, and then finally at the end there searching through it.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1767" target="_blank">00:29:27.380</a></span> | <span class="t">So yeah, that is it for this walkthrough, I hope this has been useful and interesting,</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1773" target="_blank">00:29:33.460</a></span> | <span class="t">but for now I will leave it there.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1775" target="_blank">00:29:35.540</a></span> | <span class="t">So thank you very much for watching, and I will see you again in the next one, bye.</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1780" target="_blank">00:29:40.180</a></span> | <span class="t">[Music]</span></div><div class="c"><span class="s"><a href="https://www.youtube.com/watch?v=TcRRfcbsApw&t=1790" target="_blank">00:29:50.180</a></span> | <span class="t">[Music]</span></div></div></body></html>